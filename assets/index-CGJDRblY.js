var jd=Object.defineProperty;var qd=(e,t,n)=>t in e?jd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Sa=(e,t,n)=>qd(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Mi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const be={},Xn=[],Ut=()=>{},Cl=()=>!1,nr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Si=e=>e.startsWith("onUpdate:"),Qe=Object.assign,Ei=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},zd=Object.prototype.hasOwnProperty,we=(e,t)=>zd.call(e,t),_=Array.isArray,_n=e=>to(e)==="[object Map]",$l=e=>to(e)==="[object Set]",Wd=e=>to(e)==="[object RegExp]",oe=e=>typeof e=="function",Le=e=>typeof e=="string",dn=e=>typeof e=="symbol",Ve=e=>e!==null&&typeof e=="object",Pl=e=>(Ve(e)||oe(e))&&oe(e.then)&&oe(e.catch),Dl=Object.prototype.toString,to=e=>Dl.call(e),Gd=e=>to(e).slice(8,-1),Vl=e=>to(e)==="[object Object]",xi=e=>Le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$s=Mi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sr=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Kd=/-\w/g,kt=sr(e=>e.replace(Kd,t=>t.slice(1).toUpperCase())),Jd=/\B([A-Z])/g,Sn=sr(e=>e.replace(Jd,"-$1").toLowerCase()),or=sr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Er=sr(e=>e?`on${or(e)}`:""),ht=(e,t)=>!Object.is(e,t),es=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Al=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ur=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ea;const rr=()=>Ea||(Ea=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ci(e){if(_(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Le(s)?Xd(s):Ci(s);if(o)for(const r in o)t[r]=o[r]}return t}else if(Le(e)||Ve(e))return e}const Yd=/;(?![^(]*\))/g,Zd=/:([^]+)/,Qd=/\/\*[^]*?\*\//g;function Xd(e){const t={};return e.replace(Qd,"").split(Yd).forEach(n=>{if(n){const s=n.split(Zd);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ot(e){let t="";if(Le(e))t=e;else if(_(e))for(let n=0;n<e.length;n++){const s=ot(e[n]);s&&(t+=s+" ")}else if(Ve(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const _d="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ec=Mi(_d);function Rl(e){return!!e||e===""}const Tl=e=>!!(e&&e.__v_isRef===!0),ce=e=>Le(e)?e:e==null?"":_(e)||Ve(e)&&(e.toString===Dl||!oe(e.toString))?Tl(e)?ce(e.value):JSON.stringify(e,Nl,2):String(e),Nl=(e,t)=>Tl(t)?Nl(e,t.value):_n(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],r)=>(n[xr(s,r)+" =>"]=o,n),{})}:$l(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xr(n))}:dn(t)?xr(t):Ve(t)&&!_(t)&&!Vl(t)?String(t):t,xr=(e,t="")=>{var n;return dn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _e;class tc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_e,!t&&_e&&(this.index=(_e.scopes||(_e.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=_e;try{return _e=this,t()}finally{_e=n}}}on(){++this._on===1&&(this.prevScope=_e,_e=this)}off(){this._on>0&&--this._on===0&&(_e=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Ol(){return _e}function nc(e,t=!1){_e&&_e.cleanups.push(e)}let Pe;const Cr=new WeakSet;class Fl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_e&&_e.active&&_e.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Cr.has(this)&&(Cr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ll(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xa(this),Hl(this);const t=Pe,n=$t;Pe=this,$t=!0;try{return this.fn()}finally{Ul(this),Pe=t,$t=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Di(t);this.deps=this.depsTail=void 0,xa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Cr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jr(this)&&this.run()}get dirty(){return jr(this)}}let Bl=0,Ps,Ds;function Ll(e,t=!1){if(e.flags|=8,t){e.next=Ds,Ds=e;return}e.next=Ps,Ps=e}function $i(){Bl++}function Pi(){if(--Bl>0)return;if(Ds){let t=Ds;for(Ds=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Ps;){let t=Ps;for(Ps=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Hl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ul(e){let t,n=e.depsTail,s=n;for(;s;){const o=s.prevDep;s.version===-1?(s===n&&(n=o),Di(s),sc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=o}e.deps=t,e.depsTail=n}function jr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(jl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function jl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Hs)||(e.globalVersion=Hs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!jr(e))))return;e.flags|=2;const t=e.dep,n=Pe,s=$t;Pe=e,$t=!0;try{Hl(e);const o=e.fn(e._value);(t.version===0||ht(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Pe=n,$t=s,Ul(e),e.flags&=-3}}function Di(e,t=!1){const{dep:n,prevSub:s,nextSub:o}=e;if(s&&(s.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Di(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function sc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let $t=!0;const ql=[];function rn(){ql.push($t),$t=!1}function an(){const e=ql.pop();$t=e===void 0?!0:e}function xa(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Pe;Pe=void 0;try{t()}finally{Pe=n}}}let Hs=0;class oc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ir{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Pe||!$t||Pe===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Pe)n=this.activeLink=new oc(Pe,this),Pe.deps?(n.prevDep=Pe.depsTail,Pe.depsTail.nextDep=n,Pe.depsTail=n):Pe.deps=Pe.depsTail=n,zl(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Pe.depsTail,n.nextDep=void 0,Pe.depsTail.nextDep=n,Pe.depsTail=n,Pe.deps===n&&(Pe.deps=s)}return n}trigger(t){this.version++,Hs++,this.notify(t)}notify(t){$i();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Pi()}}}function zl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)zl(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const So=new WeakMap,Nn=Symbol(""),qr=Symbol(""),Us=Symbol("");function et(e,t,n){if($t&&Pe){let s=So.get(e);s||So.set(e,s=new Map);let o=s.get(n);o||(s.set(n,o=new ir),o.map=s,o.key=n),o.track()}}function _t(e,t,n,s,o,r){const i=So.get(e);if(!i){Hs++;return}const l=d=>{d&&d.trigger()};if($i(),t==="clear")i.forEach(l);else{const d=_(e),a=d&&xi(n);if(d&&n==="length"){const u=Number(s);i.forEach((y,h)=>{(h==="length"||h===Us||!dn(h)&&h>=u)&&l(y)})}else switch((n!==void 0||i.has(void 0))&&l(i.get(n)),a&&l(i.get(Us)),t){case"add":d?a&&l(i.get("length")):(l(i.get(Nn)),_n(e)&&l(i.get(qr)));break;case"delete":d||(l(i.get(Nn)),_n(e)&&l(i.get(qr)));break;case"set":_n(e)&&l(i.get(Nn));break}}Pi()}function rc(e,t){const n=So.get(e);return n&&n.get(t)}function Wn(e){const t=ke(e);return t===e?t:(et(t,"iterate",Us),St(e)?t:t.map(Ye))}function ar(e){return et(e=ke(e),"iterate",Us),e}const ic={__proto__:null,[Symbol.iterator](){return $r(this,Symbol.iterator,Ye)},concat(...e){return Wn(this).concat(...e.map(t=>_(t)?Wn(t):t))},entries(){return $r(this,"entries",e=>(e[1]=Ye(e[1]),e))},every(e,t){return Jt(this,"every",e,t,void 0,arguments)},filter(e,t){return Jt(this,"filter",e,t,n=>n.map(Ye),arguments)},find(e,t){return Jt(this,"find",e,t,Ye,arguments)},findIndex(e,t){return Jt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Jt(this,"findLast",e,t,Ye,arguments)},findLastIndex(e,t){return Jt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Jt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Pr(this,"includes",e)},indexOf(...e){return Pr(this,"indexOf",e)},join(e){return Wn(this).join(e)},lastIndexOf(...e){return Pr(this,"lastIndexOf",e)},map(e,t){return Jt(this,"map",e,t,void 0,arguments)},pop(){return Ms(this,"pop")},push(...e){return Ms(this,"push",e)},reduce(e,...t){return Ca(this,"reduce",e,t)},reduceRight(e,...t){return Ca(this,"reduceRight",e,t)},shift(){return Ms(this,"shift")},some(e,t){return Jt(this,"some",e,t,void 0,arguments)},splice(...e){return Ms(this,"splice",e)},toReversed(){return Wn(this).toReversed()},toSorted(e){return Wn(this).toSorted(e)},toSpliced(...e){return Wn(this).toSpliced(...e)},unshift(...e){return Ms(this,"unshift",e)},values(){return $r(this,"values",Ye)}};function $r(e,t,n){const s=ar(e),o=s[t]();return s!==e&&!St(e)&&(o._next=o.next,o.next=()=>{const r=o._next();return r.done||(r.value=n(r.value)),r}),o}const ac=Array.prototype;function Jt(e,t,n,s,o,r){const i=ar(e),l=i!==e&&!St(e),d=i[t];if(d!==ac[t]){const y=d.apply(e,r);return l?Ye(y):y}let a=n;i!==e&&(l?a=function(y,h){return n.call(this,Ye(y),h,e)}:n.length>2&&(a=function(y,h){return n.call(this,y,h,e)}));const u=d.call(i,a,s);return l&&o?o(u):u}function Ca(e,t,n,s){const o=ar(e);let r=n;return o!==e&&(St(e)?n.length>3&&(r=function(i,l,d){return n.call(this,i,l,d,e)}):r=function(i,l,d){return n.call(this,i,Ye(l),d,e)}),o[t](r,...s)}function Pr(e,t,n){const s=ke(e);et(s,"iterate",Us);const o=s[t](...n);return(o===-1||o===!1)&&Ri(n[0])?(n[0]=ke(n[0]),s[t](...n)):o}function Ms(e,t,n=[]){rn(),$i();const s=ke(e)[t].apply(e,n);return Pi(),an(),s}const lc=Mi("__proto__,__v_isRef,__isVue"),Wl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(dn));function uc(e){dn(e)||(e=String(e));const t=ke(this);return et(t,"has",e),t.hasOwnProperty(e)}class Gl{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(o?r?bc:Zl:r?Yl:Jl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=_(t);if(!o){let d;if(i&&(d=ic[n]))return d;if(n==="hasOwnProperty")return uc}const l=Reflect.get(t,n,fe(t)?t:s);if((dn(n)?Wl.has(n):lc(n))||(o||et(t,"get",n),r))return l;if(fe(l)){const d=i&&xi(n)?l:l.value;return o&&Ve(d)?Eo(d):d}return Ve(l)?o?Eo(l):is(l):l}}class Kl extends Gl{constructor(t=!1){super(!1,t)}set(t,n,s,o){let r=t[n];if(!this._isShallow){const d=In(r);if(!St(s)&&!In(s)&&(r=ke(r),s=ke(s)),!_(t)&&fe(r)&&!fe(s))return d||(r.value=s),!0}const i=_(t)&&xi(n)?Number(n)<t.length:we(t,n),l=Reflect.set(t,n,s,fe(t)?t:o);return t===ke(o)&&(i?ht(s,r)&&_t(t,"set",n,s):_t(t,"add",n,s)),l}deleteProperty(t,n){const s=we(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&_t(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!dn(n)||!Wl.has(n))&&et(t,"has",n),s}ownKeys(t){return et(t,"iterate",_(t)?"length":Nn),Reflect.ownKeys(t)}}class dc extends Gl{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const cc=new Kl,fc=new dc,pc=new Kl(!0);const zr=e=>e,po=e=>Reflect.getPrototypeOf(e);function yc(e,t,n){return function(...s){const o=this.__v_raw,r=ke(o),i=_n(r),l=e==="entries"||e===Symbol.iterator&&i,d=e==="keys"&&i,a=o[e](...s),u=n?zr:t?xo:Ye;return!t&&et(r,"iterate",d?qr:Nn),{next(){const{value:y,done:h}=a.next();return h?{value:y,done:h}:{value:l?[u(y[0]),u(y[1])]:u(y),done:h}},[Symbol.iterator](){return this}}}}function yo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function mc(e,t){const n={get(o){const r=this.__v_raw,i=ke(r),l=ke(o);e||(ht(o,l)&&et(i,"get",o),et(i,"get",l));const{has:d}=po(i),a=t?zr:e?xo:Ye;if(d.call(i,o))return a(r.get(o));if(d.call(i,l))return a(r.get(l));r!==i&&r.get(o)},get size(){const o=this.__v_raw;return!e&&et(ke(o),"iterate",Nn),o.size},has(o){const r=this.__v_raw,i=ke(r),l=ke(o);return e||(ht(o,l)&&et(i,"has",o),et(i,"has",l)),o===l?r.has(o):r.has(o)||r.has(l)},forEach(o,r){const i=this,l=i.__v_raw,d=ke(l),a=t?zr:e?xo:Ye;return!e&&et(d,"iterate",Nn),l.forEach((u,y)=>o.call(r,a(u),a(y),i))}};return Qe(n,e?{add:yo("add"),set:yo("set"),delete:yo("delete"),clear:yo("clear")}:{add(o){!t&&!St(o)&&!In(o)&&(o=ke(o));const r=ke(this);return po(r).has.call(r,o)||(r.add(o),_t(r,"add",o,o)),this},set(o,r){!t&&!St(r)&&!In(r)&&(r=ke(r));const i=ke(this),{has:l,get:d}=po(i);let a=l.call(i,o);a||(o=ke(o),a=l.call(i,o));const u=d.call(i,o);return i.set(o,r),a?ht(r,u)&&_t(i,"set",o,r):_t(i,"add",o,r),this},delete(o){const r=ke(this),{has:i,get:l}=po(r);let d=i.call(r,o);d||(o=ke(o),d=i.call(r,o)),l&&l.call(r,o);const a=r.delete(o);return d&&_t(r,"delete",o,void 0),a},clear(){const o=ke(this),r=o.size!==0,i=o.clear();return r&&_t(o,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=yc(o,e,t)}),n}function Vi(e,t){const n=mc(e,t);return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(we(n,o)&&o in s?n:s,o,r)}const hc={get:Vi(!1,!1)},gc={get:Vi(!1,!0)},vc={get:Vi(!0,!1)};const Jl=new WeakMap,Yl=new WeakMap,Zl=new WeakMap,bc=new WeakMap;function kc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ic(e){return e.__v_skip||!Object.isExtensible(e)?0:kc(Gd(e))}function is(e){return In(e)?e:Ai(e,!1,cc,hc,Jl)}function Ql(e){return Ai(e,!1,pc,gc,Yl)}function Eo(e){return Ai(e,!0,fc,vc,Zl)}function Ai(e,t,n,s,o){if(!Ve(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Ic(e);if(r===0)return e;const i=o.get(e);if(i)return i;const l=new Proxy(e,r===2?s:n);return o.set(e,l),l}function ts(e){return In(e)?ts(e.__v_raw):!!(e&&e.__v_isReactive)}function In(e){return!!(e&&e.__v_isReadonly)}function St(e){return!!(e&&e.__v_isShallow)}function Ri(e){return e?!!e.__v_raw:!1}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function wc(e){return!we(e,"__v_skip")&&Object.isExtensible(e)&&Al(e,"__v_skip",!0),e}const Ye=e=>Ve(e)?is(e):e,xo=e=>Ve(e)?Eo(e):e;function fe(e){return e?e.__v_isRef===!0:!1}function ut(e){return Xl(e,!1)}function Co(e){return Xl(e,!0)}function Xl(e,t){return fe(e)?e:new Mc(e,t)}class Mc{constructor(t,n){this.dep=new ir,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ke(t),this._value=n?t:Ye(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||St(t)||In(t);t=s?t:ke(t),ht(t,n)&&(this._rawValue=t,this._value=s?t:Ye(t),this.dep.trigger())}}function T(e){return fe(e)?e.value:e}function ns(e){return oe(e)?e():T(e)}const Sc={get:(e,t,n)=>t==="__v_raw"?e:T(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return fe(o)&&!fe(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function _l(e){return ts(e)?e:new Proxy(e,Sc)}class Ec{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new ir,{get:s,set:o}=t(n.track.bind(n),n.trigger.bind(n));this._get=s,this._set=o}get value(){return this._value=this._get()}set value(t){this._set(t)}}function eu(e){return new Ec(e)}function xc(e){const t=_(e)?new Array(e.length):{};for(const n in e)t[n]=tu(e,n);return t}class Cc{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return rc(ke(this._object),this._key)}}class $c{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Pc(e,t,n){return fe(e)?e:oe(e)?new $c(e):Ve(e)&&arguments.length>1?tu(e,t,n):ut(e)}function tu(e,t,n){const s=e[t];return fe(s)?s:new Cc(e,t,n)}class Dc{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ir(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Hs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Pe!==this)return Ll(this,!0),!0}get value(){const t=this.dep.track();return jl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Vc(e,t,n=!1){let s,o;return oe(e)?s=e:(s=e.get,o=e.set),new Dc(s,o,n)}const mo={},$o=new WeakMap;let An;function Ac(e,t=!1,n=An){if(n){let s=$o.get(n);s||$o.set(n,s=[]),s.push(e)}}function Rc(e,t,n=be){const{immediate:s,deep:o,once:r,scheduler:i,augmentJob:l,call:d}=n,a=S=>o?S:St(S)||o===!1||o===0?en(S,1):en(S);let u,y,h,b,I=!1,w=!1;if(fe(e)?(y=()=>e.value,I=St(e)):ts(e)?(y=()=>a(e),I=!0):_(e)?(w=!0,I=e.some(S=>ts(S)||St(S)),y=()=>e.map(S=>{if(fe(S))return S.value;if(ts(S))return a(S);if(oe(S))return d?d(S,2):S()})):oe(e)?t?y=d?()=>d(e,2):e:y=()=>{if(h){rn();try{h()}finally{an()}}const S=An;An=u;try{return d?d(e,3,[b]):e(b)}finally{An=S}}:y=Ut,t&&o){const S=y,L=o===!0?1/0:o;y=()=>en(S(),L)}const $=Ol(),N=()=>{u.stop(),$&&$.active&&Ei($.effects,u)};if(r&&t){const S=t;t=(...L)=>{S(...L),N()}}let C=w?new Array(e.length).fill(mo):mo;const V=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(t){const L=u.run();if(o||I||(w?L.some((W,ee)=>ht(W,C[ee])):ht(L,C))){h&&h();const W=An;An=u;try{const ee=[L,C===mo?void 0:w&&C[0]===mo?[]:C,b];C=L,d?d(t,3,ee):t(...ee)}finally{An=W}}}else u.run()};return l&&l(V),u=new Fl(y),u.scheduler=i?()=>i(V,!1):V,b=S=>Ac(S,!1,u),h=u.onStop=()=>{const S=$o.get(u);if(S){if(d)d(S,4);else for(const L of S)L();$o.delete(u)}},t?s?V(!0):C=u.run():i?i(V.bind(null,!0),!0):u.run(),N.pause=u.pause.bind(u),N.resume=u.resume.bind(u),N.stop=N,N}function en(e,t=1/0,n){if(t<=0||!Ve(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,fe(e))en(e.value,t,n);else if(_(e))for(let s=0;s<e.length;s++)en(e[s],t,n);else if($l(e)||_n(e))e.forEach(s=>{en(s,t,n)});else if(Vl(e)){for(const s in e)en(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&en(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function no(e,t,n,s){try{return s?e(...s):e()}catch(o){lr(o,t,n)}}function jt(e,t,n,s){if(oe(e)){const o=no(e,t,n,s);return o&&Pl(o)&&o.catch(r=>{lr(r,t,n)}),o}if(_(e)){const o=[];for(let r=0;r<e.length;r++)o.push(jt(e[r],t,n,s));return o}}function lr(e,t,n,s=!0){const o=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||be;if(t){let l=t.parent;const d=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const u=l.ec;if(u){for(let y=0;y<u.length;y++)if(u[y](e,d,a)===!1)return}l=l.parent}if(r){rn(),no(r,null,10,[e,d,a]),an();return}}Tc(e,n,o,s,i)}function Tc(e,t,n,s=!0,o=!1){if(o)throw e;console.error(e)}const lt=[];let Ft=-1;const ss=[];let gn=null,Gn=0;const nu=Promise.resolve();let Po=null;function su(e){const t=Po||nu;return e?t.then(this?e.bind(this):e):t}function Nc(e){let t=Ft+1,n=lt.length;for(;t<n;){const s=t+n>>>1,o=lt[s],r=js(o);r<e||r===e&&o.flags&2?t=s+1:n=s}return t}function Ti(e){if(!(e.flags&1)){const t=js(e),n=lt[lt.length-1];!n||!(e.flags&2)&&t>=js(n)?lt.push(e):lt.splice(Nc(t),0,e),e.flags|=1,ou()}}function ou(){Po||(Po=nu.then(iu))}function Oc(e){_(e)?ss.push(...e):gn&&e.id===-1?gn.splice(Gn+1,0,e):e.flags&1||(ss.push(e),e.flags|=1),ou()}function $a(e,t,n=Ft+1){for(;n<lt.length;n++){const s=lt[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;lt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ru(e){if(ss.length){const t=[...new Set(ss)].sort((n,s)=>js(n)-js(s));if(ss.length=0,gn){gn.push(...t);return}for(gn=t,Gn=0;Gn<gn.length;Gn++){const n=gn[Gn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}gn=null,Gn=0}}const js=e=>e.id==null?e.flags&2?-1:1/0:e.id;function iu(e){try{for(Ft=0;Ft<lt.length;Ft++){const t=lt[Ft];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),no(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ft<lt.length;Ft++){const t=lt[Ft];t&&(t.flags&=-2)}Ft=-1,lt.length=0,ru(),Po=null,(lt.length||ss.length)&&iu()}}let Ze=null,au=null;function Do(e){const t=Ze;return Ze=e,au=e&&e.type.__scopeId||null,t}function ae(e,t=Ze,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&Ua(-1);const r=Do(t);let i;try{i=e(...o)}finally{Do(r),s._d&&Ua(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function lu(e,t){if(Ze===null)return e;const n=yr(Ze),s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,i,l,d=be]=t[o];r&&(oe(r)&&(r={mounted:r,updated:r}),r.deep&&en(i),s.push({dir:r,instance:n,value:i,oldValue:void 0,arg:l,modifiers:d}))}return e}function Dn(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const l=o[i];r&&(l.oldValue=r[i].value);let d=l.dir[s];d&&(rn(),jt(d,n,8,[e.el,l,e,t]),an())}}const uu=Symbol("_vte"),Fc=e=>e.__isTeleport,Vs=e=>e&&(e.disabled||e.disabled===""),Pa=e=>e&&(e.defer||e.defer===""),Da=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Va=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Wr=(e,t)=>{const n=e&&e.to;return Le(n)?t?t(n):null:n},du={name:"Teleport",__isTeleport:!0,process(e,t,n,s,o,r,i,l,d,a){const{mc:u,pc:y,pbc:h,o:{insert:b,querySelector:I,createText:w,createComment:$}}=a,N=Vs(t.props);let{shapeFlag:C,children:V,dynamicChildren:S}=t;if(e==null){const L=t.el=w(""),W=t.anchor=w("");b(L,n,s),b(W,n,s);const ee=(ne,Z)=>{C&16&&u(V,ne,Z,o,r,i,l,d)},ie=()=>{const ne=t.target=Wr(t.props,I),Z=cu(ne,t,w,b);ne&&(i!=="svg"&&Da(ne)?i="svg":i!=="mathml"&&Va(ne)&&(i="mathml"),o&&o.isCE&&(o.ce._teleportTargets||(o.ce._teleportTargets=new Set)).add(ne),N||(ee(ne,Z),vo(t,!1)))};N&&(ee(n,W),vo(t,!0)),Pa(t.props)?(t.el.__isMounted=!1,je(()=>{ie(),delete t.el.__isMounted},r)):ie()}else{if(Pa(t.props)&&e.el.__isMounted===!1){je(()=>{du.process(e,t,n,s,o,r,i,l,d,a)},r);return}t.el=e.el,t.targetStart=e.targetStart;const L=t.anchor=e.anchor,W=t.target=e.target,ee=t.targetAnchor=e.targetAnchor,ie=Vs(e.props),ne=ie?n:W,Z=ie?L:ee;if(i==="svg"||Da(W)?i="svg":(i==="mathml"||Va(W))&&(i="mathml"),S?(h(e.dynamicChildren,S,ne,o,r,i,l),Fi(e,t,!0)):d||y(e,t,ne,Z,o,r,i,l,!1),N)ie?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ho(t,n,L,a,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ue=t.target=Wr(t.props,I);ue&&ho(t,ue,null,a,0)}else ie&&ho(t,W,ee,a,1);vo(t,N)}},remove(e,t,n,{um:s,o:{remove:o}},r){const{shapeFlag:i,children:l,anchor:d,targetStart:a,targetAnchor:u,target:y,props:h}=e;if(y&&(o(a),o(u)),r&&o(d),i&16){const b=r||!Vs(h);for(let I=0;I<l.length;I++){const w=l[I];s(w,t,n,b,!!w.dynamicChildren)}}},move:ho,hydrate:Bc};function ho(e,t,n,{o:{insert:s},m:o},r=2){r===0&&s(e.targetAnchor,t,n);const{el:i,anchor:l,shapeFlag:d,children:a,props:u}=e,y=r===2;if(y&&s(i,t,n),(!y||Vs(u))&&d&16)for(let h=0;h<a.length;h++)o(a[h],t,n,2);y&&s(l,t,n)}function Bc(e,t,n,s,o,r,{o:{nextSibling:i,parentNode:l,querySelector:d,insert:a,createText:u}},y){function h(w,$,N,C){$.anchor=y(i(w),$,l(w),n,s,o,r),$.targetStart=N,$.targetAnchor=C}const b=t.target=Wr(t.props,d),I=Vs(t.props);if(b){const w=b._lpa||b.firstChild;if(t.shapeFlag&16)if(I)h(e,t,w,w&&i(w));else{t.anchor=i(e);let $=w;for(;$;){if($&&$.nodeType===8){if($.data==="teleport start anchor")t.targetStart=$;else if($.data==="teleport anchor"){t.targetAnchor=$,b._lpa=t.targetAnchor&&i(t.targetAnchor);break}}$=i($)}t.targetAnchor||cu(b,t,u,a),y(w&&i(w),t,b,n,s,o,r)}vo(t,I)}else I&&t.shapeFlag&16&&h(e,t,e,i(e));return t.anchor&&i(t.anchor)}const Aa=du;function vo(e,t){const n=e.ctx;if(n&&n.ut){let s,o;for(t?(s=e.el,o=e.anchor):(s=e.targetStart,o=e.targetAnchor);s&&s!==o;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function cu(e,t,n,s){const o=t.targetStart=n(""),r=t.targetAnchor=n("");return o[uu]=r,e&&(s(o,e),s(r,e)),r}const Lc=Symbol("_leaveCb");function ur(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ur(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function le(e,t){return oe(e)?Qe({name:e.name},t,{setup:e}):e}function fu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function os(e){const t=hs(),n=Co(null);if(t){const o=t.refs===be?t.refs={}:t.refs;Object.defineProperty(o,e,{enumerable:!0,get:()=>n.value,set:r=>n.value=r})}return n}const Vo=new WeakMap;function As(e,t,n,s,o=!1){if(_(e)){e.forEach((I,w)=>As(I,t&&(_(t)?t[w]:t),n,s,o));return}if(On(s)&&!o){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&As(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?yr(s.component):s.el,i=o?null:r,{i:l,r:d}=e,a=t&&t.r,u=l.refs===be?l.refs={}:l.refs,y=l.setupState,h=ke(y),b=y===be?Cl:I=>we(h,I);if(a!=null&&a!==d){if(Ra(t),Le(a))u[a]=null,b(a)&&(y[a]=null);else if(fe(a)){a.value=null;const I=t;I.k&&(u[I.k]=null)}}if(oe(d))no(d,l,12,[i,u]);else{const I=Le(d),w=fe(d);if(I||w){const $=()=>{if(e.f){const N=I?b(d)?y[d]:u[d]:d.value;if(o)_(N)&&Ei(N,r);else if(_(N))N.includes(r)||N.push(r);else if(I)u[d]=[r],b(d)&&(y[d]=u[d]);else{const C=[r];d.value=C,e.k&&(u[e.k]=C)}}else I?(u[d]=i,b(d)&&(y[d]=i)):w&&(d.value=i,e.k&&(u[e.k]=i))};if(i){const N=()=>{$(),Vo.delete(e)};N.id=-1,Vo.set(e,N),je(N,n)}else Ra(e),$()}}}function Ra(e){const t=Vo.get(e);t&&(t.flags|=8,Vo.delete(e))}rr().requestIdleCallback;rr().cancelIdleCallback;const On=e=>!!e.type.__asyncLoader,pu=e=>e.type.__isKeepAlive,Hc={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=hs(),s=n.ctx;if(!s.renderer)return()=>{const C=t.default&&t.default();return C&&C.length===1?C[0]:C};const o=new Map,r=new Set;let i=null;const l=n.suspense,{renderer:{p:d,m:a,um:u,o:{createElement:y}}}=s,h=y("div");s.activate=(C,V,S,L,W)=>{const ee=C.component;a(C,V,S,0,l),d(ee.vnode,C,V,S,ee,l,L,C.slotScopeIds,W),je(()=>{ee.isDeactivated=!1,ee.a&&es(ee.a);const ie=C.props&&C.props.onVnodeMounted;ie&&wt(ie,ee.parent,C)},l)},s.deactivate=C=>{const V=C.component;No(V.m),No(V.a),a(C,h,null,1,l),je(()=>{V.da&&es(V.da);const S=C.props&&C.props.onVnodeUnmounted;S&&wt(S,V.parent,C),V.isDeactivated=!0},l)};function b(C){Dr(C),u(C,n,l,!0)}function I(C){o.forEach((V,S)=>{const L=Qr(V.type);L&&!C(L)&&w(S)})}function w(C){const V=o.get(C);V&&(!i||!Kn(V,i))?b(V):i&&Dr(i),o.delete(C),r.delete(C)}Pt(()=>[e.include,e.exclude],([C,V])=>{C&&I(S=>Es(C,S)),V&&I(S=>!Es(V,S))},{flush:"post",deep:!0});let $=null;const N=()=>{$!=null&&(Oo(n.subTree.type)?je(()=>{o.set($,go(n.subTree))},n.subTree.suspense):o.set($,go(n.subTree)))};return as(N),mu(N),hu(()=>{o.forEach(C=>{const{subTree:V,suspense:S}=n,L=go(V);if(C.type===L.type&&C.key===L.key){Dr(L);const W=L.component.da;W&&je(W,S);return}b(C)})}),()=>{if($=null,!t.default)return i=null;const C=t.default(),V=C[0];if(C.length>1)return i=null,C;if(!pr(V)||!(V.shapeFlag&4)&&!(V.shapeFlag&128))return i=null,V;let S=go(V);if(S.type===qt)return i=null,S;const L=S.type,W=Qr(On(S)?S.type.__asyncResolved||{}:L),{include:ee,exclude:ie,max:ne}=e;if(ee&&(!W||!Es(ee,W))||ie&&W&&Es(ie,W))return S.shapeFlag&=-257,i=S,V;const Z=S.key==null?L:S.key,ue=o.get(Z);return S.el&&(S=Bn(S),V.shapeFlag&128&&(V.ssContent=S)),$=Z,ue?(S.el=ue.el,S.component=ue.component,S.transition&&ur(S,S.transition),S.shapeFlag|=512,r.delete(Z),r.add(Z)):(r.add(Z),ne&&r.size>parseInt(ne,10)&&w(r.values().next().value)),S.shapeFlag|=256,i=S,Oo(V.type)?V:S}}},Uc=Hc;function Es(e,t){return _(e)?e.some(n=>Es(n,t)):Le(e)?e.split(",").includes(t):Wd(e)?(e.lastIndex=0,e.test(t)):!1}function jc(e,t){yu(e,"a",t)}function qc(e,t){yu(e,"da",t)}function yu(e,t,n=tt){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(dr(t,s,n),n){let o=n.parent;for(;o&&o.parent;)pu(o.parent.vnode)&&zc(s,t,n,o),o=o.parent}}function zc(e,t,n,s){const o=dr(t,e,s,!0);gu(()=>{Ei(s[t],o)},n)}function Dr(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function go(e){return e.shapeFlag&128?e.ssContent:e}function dr(e,t,n=tt,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{rn();const l=oo(n),d=jt(t,n,e,i);return l(),an(),d});return s?o.unshift(r):o.push(r),r}}const cn=e=>(t,n=tt)=>{(!zs||e==="sp")&&dr(e,(...s)=>t(...s),n)},Wc=cn("bm"),as=cn("m"),Gc=cn("bu"),mu=cn("u"),hu=cn("bum"),gu=cn("um"),Kc=cn("sp"),Jc=cn("rtg"),Yc=cn("rtc");function Zc(e,t=tt){dr("ec",e,t)}const Qc="components";function so(e,t){return _c(Qc,e,!0,t)||e}const Xc=Symbol.for("v-ndc");function _c(e,t,n=!0,s=!1){const o=Ze||tt;if(o){const r=o.type;{const l=Qr(r,!1);if(l&&(l===t||l===kt(t)||l===or(kt(t))))return r}const i=Ta(o[e]||r[e],t)||Ta(o.appContext[e],t);return!i&&s?r:i}}function Ta(e,t){return e&&(e[t]||e[kt(t)]||e[or(kt(t))])}function q(e,t,n,s){let o;const r=n,i=_(e);if(i||Le(e)){const l=i&&ts(e);let d=!1,a=!1;l&&(d=!St(e),a=In(e),e=ar(e)),o=new Array(e.length);for(let u=0,y=e.length;u<y;u++)o[u]=t(d?a?xo(Ye(e[u])):Ye(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){o=new Array(e);for(let l=0;l<e;l++)o[l]=t(l+1,l,void 0,r)}else if(Ve(e))if(e[Symbol.iterator])o=Array.from(e,(l,d)=>t(l,d,void 0,r));else{const l=Object.keys(e);o=new Array(l.length);for(let d=0,a=l.length;d<a;d++){const u=l[d];o[d]=t(e[u],u,d,r)}}else o=[];return o}function Ao(e,t,n={},s,o){if(Ze.ce||Ze.parent&&On(Ze.parent)&&Ze.parent.ce){const a=Object.keys(n).length>0;return t!=="default"&&(n.name=t),c(),Y(g,null,[m("slot",n,s)],a?-2:64)}let r=e[t];r&&r._c&&(r._d=!1),c();const i=r&&vu(r(n)),l=n.key||i&&i.key,d=Y(g,{key:(l&&!dn(l)?l:`_${t}`)+(!i&&s?"_fb":"")},i||[],i&&e._===1?64:-2);return!o&&d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),r&&r._c&&(r._d=!0),d}function vu(e){return e.some(t=>pr(t)?!(t.type===qt||t.type===g&&!vu(t.children)):!0)?e:null}const Gr=e=>e?Ou(e)?yr(e):Gr(e.parent):null,Rs=Qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Gr(e.parent),$root:e=>Gr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ku(e),$forceUpdate:e=>e.f||(e.f=()=>{Ti(e.update)}),$nextTick:e=>e.n||(e.n=su.bind(e.proxy)),$watch:e=>Mf.bind(e)}),Vr=(e,t)=>e!==be&&!e.__isScriptSetup&&we(e,t),ef={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:l,appContext:d}=e;let a;if(t[0]!=="$"){const b=i[t];if(b!==void 0)switch(b){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(Vr(s,t))return i[t]=1,s[t];if(o!==be&&we(o,t))return i[t]=2,o[t];if((a=e.propsOptions[0])&&we(a,t))return i[t]=3,r[t];if(n!==be&&we(n,t))return i[t]=4,n[t];Kr&&(i[t]=0)}}const u=Rs[t];let y,h;if(u)return t==="$attrs"&&et(e.attrs,"get",""),u(e);if((y=l.__cssModules)&&(y=y[t]))return y;if(n!==be&&we(n,t))return i[t]=4,n[t];if(h=d.config.globalProperties,we(h,t))return h[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return Vr(o,t)?(o[t]=n,!0):s!==be&&we(s,t)?(s[t]=n,!0):we(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r,type:i}},l){let d,a;return!!(n[l]||e!==be&&l[0]!=="$"&&we(e,l)||Vr(t,l)||(d=r[0])&&we(d,l)||we(s,l)||we(Rs,l)||we(o.config.globalProperties,l)||(a=i.__cssModules)&&a[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:we(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ro(e){return _(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function tf(e,t){return!e||!t?e||t:_(e)&&_(t)?e.concat(t):Qe({},Ro(e),Ro(t))}let Kr=!0;function nf(e){const t=ku(e),n=e.proxy,s=e.ctx;Kr=!1,t.beforeCreate&&Na(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:l,provide:d,inject:a,created:u,beforeMount:y,mounted:h,beforeUpdate:b,updated:I,activated:w,deactivated:$,beforeDestroy:N,beforeUnmount:C,destroyed:V,unmounted:S,render:L,renderTracked:W,renderTriggered:ee,errorCaptured:ie,serverPrefetch:ne,expose:Z,inheritAttrs:ue,components:Ue,directives:Ke,filters:It}=t;if(a&&sf(a,s,null),i)for(const xe in i){const Ce=i[xe];oe(Ce)&&(s[xe]=Ce.bind(n))}if(o){const xe=o.call(n,n);Ve(xe)&&(e.data=is(xe))}if(Kr=!0,r)for(const xe in r){const Ce=r[xe],$n=oe(Ce)?Ce.bind(n,n):oe(Ce.get)?Ce.get.bind(n,n):Ut,co=!oe(Ce)&&oe(Ce.set)?Ce.set.bind(n):Ut,Pn=Ne({get:$n,set:co});Object.defineProperty(s,xe,{enumerable:!0,configurable:!0,get:()=>Pn.value,set:Dt=>Pn.value=Dt})}if(l)for(const xe in l)bu(l[xe],s,n,xe);if(d){const xe=oe(d)?d.call(n):d;Reflect.ownKeys(xe).forEach(Ce=>{kn(Ce,xe[Ce])})}u&&Na(u,e,"c");function Je(xe,Ce){_(Ce)?Ce.forEach($n=>xe($n.bind(n))):Ce&&xe(Ce.bind(n))}if(Je(Wc,y),Je(as,h),Je(Gc,b),Je(mu,I),Je(jc,w),Je(qc,$),Je(Zc,ie),Je(Yc,W),Je(Jc,ee),Je(hu,C),Je(gu,S),Je(Kc,ne),_(Z))if(Z.length){const xe=e.exposed||(e.exposed={});Z.forEach(Ce=>{Object.defineProperty(xe,Ce,{get:()=>n[Ce],set:$n=>n[Ce]=$n,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===Ut&&(e.render=L),ue!=null&&(e.inheritAttrs=ue),Ue&&(e.components=Ue),Ke&&(e.directives=Ke),ne&&fu(e)}function sf(e,t,n=Ut){_(e)&&(e=Jr(e));for(const s in e){const o=e[s];let r;Ve(o)?"default"in o?r=We(o.from||s,o.default,!0):r=We(o.from||s):r=We(o),fe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[s]=r}}function Na(e,t,n){jt(_(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function bu(e,t,n,s){let o=s.includes(".")?Vu(n,s):()=>n[s];if(Le(e)){const r=t[e];oe(r)&&Pt(o,r)}else if(oe(e))Pt(o,e.bind(n));else if(Ve(e))if(_(e))e.forEach(r=>bu(r,t,n,s));else{const r=oe(e.handler)?e.handler.bind(n):t[e.handler];oe(r)&&Pt(o,r,e)}}function ku(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,l=r.get(t);let d;return l?d=l:!o.length&&!n&&!s?d=t:(d={},o.length&&o.forEach(a=>To(d,a,i,!0)),To(d,t,i)),Ve(t)&&r.set(t,d),d}function To(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&To(e,r,n,!0),o&&o.forEach(i=>To(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const l=of[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const of={data:Oa,props:Fa,emits:Fa,methods:xs,computed:xs,beforeCreate:it,created:it,beforeMount:it,mounted:it,beforeUpdate:it,updated:it,beforeDestroy:it,beforeUnmount:it,destroyed:it,unmounted:it,activated:it,deactivated:it,errorCaptured:it,serverPrefetch:it,components:xs,directives:xs,watch:af,provide:Oa,inject:rf};function Oa(e,t){return t?e?function(){return Qe(oe(e)?e.call(this,this):e,oe(t)?t.call(this,this):t)}:t:e}function rf(e,t){return xs(Jr(e),Jr(t))}function Jr(e){if(_(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function it(e,t){return e?[...new Set([].concat(e,t))]:t}function xs(e,t){return e?Qe(Object.create(null),e,t):t}function Fa(e,t){return e?_(e)&&_(t)?[...new Set([...e,...t])]:Qe(Object.create(null),Ro(e),Ro(t??{})):t}function af(e,t){if(!e)return t;if(!t)return e;const n=Qe(Object.create(null),e);for(const s in t)n[s]=it(e[s],t[s]);return n}function Iu(){return{app:null,config:{isNativeTag:Cl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lf=0;function uf(e,t){return function(s,o=null){oe(s)||(s=Qe({},s)),o!=null&&!Ve(o)&&(o=null);const r=Iu(),i=new WeakSet,l=[];let d=!1;const a=r.app={_uid:lf++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:zf,get config(){return r.config},set config(u){},use(u,...y){return i.has(u)||(u&&oe(u.install)?(i.add(u),u.install(a,...y)):oe(u)&&(i.add(u),u(a,...y))),a},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),a},component(u,y){return y?(r.components[u]=y,a):r.components[u]},directive(u,y){return y?(r.directives[u]=y,a):r.directives[u]},mount(u,y,h){if(!d){const b=a._ceVNode||m(s,o);return b.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),e(b,u,h),d=!0,a._container=u,u.__vue_app__=a,yr(b.component)}},onUnmount(u){l.push(u)},unmount(){d&&(jt(l,a._instance,16),e(null,a._container),delete a._container.__vue_app__)},provide(u,y){return r.provides[u]=y,a},runWithContext(u){const y=rs;rs=a;try{return u()}finally{rs=y}}};return a}}let rs=null;function kn(e,t){if(tt){let n=tt.provides;const s=tt.parent&&tt.parent.provides;s===n&&(n=tt.provides=Object.create(s)),n[e]=t}}function We(e,t,n=!1){const s=hs();if(s||rs){let o=rs?rs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&oe(t)?t.call(s&&s.proxy):t}}const wu={},Mu=()=>Object.create(wu),Su=e=>Object.getPrototypeOf(e)===wu;function df(e,t,n,s=!1){const o={},r=Mu();e.propsDefaults=Object.create(null),Eu(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);n?e.props=s?o:Ql(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function cf(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,l=ke(o),[d]=e.propsOptions;let a=!1;if((s||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let y=0;y<u.length;y++){let h=u[y];if(cr(e.emitsOptions,h))continue;const b=t[h];if(d)if(we(r,h))b!==r[h]&&(r[h]=b,a=!0);else{const I=kt(h);o[I]=Yr(d,l,I,b,e,!1)}else b!==r[h]&&(r[h]=b,a=!0)}}}else{Eu(e,t,o,r)&&(a=!0);let u;for(const y in l)(!t||!we(t,y)&&((u=Sn(y))===y||!we(t,u)))&&(d?n&&(n[y]!==void 0||n[u]!==void 0)&&(o[y]=Yr(d,l,y,void 0,e,!0)):delete o[y]);if(r!==l)for(const y in r)(!t||!we(t,y))&&(delete r[y],a=!0)}a&&_t(e.attrs,"set","")}function Eu(e,t,n,s){const[o,r]=e.propsOptions;let i=!1,l;if(t)for(let d in t){if($s(d))continue;const a=t[d];let u;o&&we(o,u=kt(d))?!r||!r.includes(u)?n[u]=a:(l||(l={}))[u]=a:cr(e.emitsOptions,d)||(!(d in s)||a!==s[d])&&(s[d]=a,i=!0)}if(r){const d=ke(n),a=l||be;for(let u=0;u<r.length;u++){const y=r[u];n[y]=Yr(o,d,y,a[y],e,!we(a,y))}}return i}function Yr(e,t,n,s,o,r){const i=e[n];if(i!=null){const l=we(i,"default");if(l&&s===void 0){const d=i.default;if(i.type!==Function&&!i.skipFactory&&oe(d)){const{propsDefaults:a}=o;if(n in a)s=a[n];else{const u=oo(o);s=a[n]=d.call(null,t),u()}}else s=d;o.ce&&o.ce._setProp(n,s)}i[0]&&(r&&!l?s=!1:i[1]&&(s===""||s===Sn(n))&&(s=!0))}return s}const ff=new WeakMap;function xu(e,t,n=!1){const s=n?ff:t.propsCache,o=s.get(e);if(o)return o;const r=e.props,i={},l=[];let d=!1;if(!oe(e)){const u=y=>{d=!0;const[h,b]=xu(y,t,!0);Qe(i,h),b&&l.push(...b)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!d)return Ve(e)&&s.set(e,Xn),Xn;if(_(r))for(let u=0;u<r.length;u++){const y=kt(r[u]);Ba(y)&&(i[y]=be)}else if(r)for(const u in r){const y=kt(u);if(Ba(y)){const h=r[u],b=i[y]=_(h)||oe(h)?{type:h}:Qe({},h),I=b.type;let w=!1,$=!0;if(_(I))for(let N=0;N<I.length;++N){const C=I[N],V=oe(C)&&C.name;if(V==="Boolean"){w=!0;break}else V==="String"&&($=!1)}else w=oe(I)&&I.name==="Boolean";b[0]=w,b[1]=$,(w||we(b,"default"))&&l.push(y)}}const a=[i,l];return Ve(e)&&s.set(e,a),a}function Ba(e){return e[0]!=="$"&&!$s(e)}const Ni=e=>e==="_"||e==="_ctx"||e==="$stable",Oi=e=>_(e)?e.map(Bt):[Bt(e)],pf=(e,t,n)=>{if(t._n)return t;const s=ae((...o)=>Oi(t(...o)),n);return s._c=!1,s},Cu=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Ni(o))continue;const r=e[o];if(oe(r))t[o]=pf(o,r,s);else if(r!=null){const i=Oi(r);t[o]=()=>i}}},$u=(e,t)=>{const n=Oi(t);e.slots.default=()=>n},Pu=(e,t,n)=>{for(const s in t)(n||!Ni(s))&&(e[s]=t[s])},yf=(e,t,n)=>{const s=e.slots=Mu();if(e.vnode.shapeFlag&32){const o=t._;o?(Pu(s,t,n),n&&Al(s,"_",o,!0)):Cu(t,s)}else t&&$u(e,t)},mf=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,i=be;if(s.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:Pu(o,t,n):(r=!t.$stable,Cu(t,o)),i=t}else t&&($u(e,t),i={default:1});if(r)for(const l in o)!Ni(l)&&i[l]==null&&delete o[l]},je=Vf;function hf(e){return gf(e)}function gf(e,t){const n=rr();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:l,createComment:d,setText:a,setElementText:u,parentNode:y,nextSibling:h,setScopeId:b=Ut,insertStaticContent:I}=e,w=(v,k,E,A=null,P=null,D=null,H=void 0,B=null,O=!!k.dynamicChildren)=>{if(v===k)return;v&&!Kn(v,k)&&(A=fo(v),Dt(v,P,D,!0),v=null),k.patchFlag===-2&&(O=!1,k.dynamicChildren=null);const{type:R,ref:Q,shapeFlag:j}=k;switch(R){case fr:$(v,k,E,A);break;case qt:N(v,k,E,A);break;case Rr:v==null&&C(k,E,A,H);break;case g:Ue(v,k,E,A,P,D,H,B,O);break;default:j&1?L(v,k,E,A,P,D,H,B,O):j&6?Ke(v,k,E,A,P,D,H,B,O):(j&64||j&128)&&R.process(v,k,E,A,P,D,H,B,O,Is)}Q!=null&&P?As(Q,v&&v.ref,D,k||v,!k):Q==null&&v&&v.ref!=null&&As(v.ref,null,D,v,!0)},$=(v,k,E,A)=>{if(v==null)s(k.el=l(k.children),E,A);else{const P=k.el=v.el;k.children!==v.children&&a(P,k.children)}},N=(v,k,E,A)=>{v==null?s(k.el=d(k.children||""),E,A):k.el=v.el},C=(v,k,E,A)=>{[v.el,v.anchor]=I(v.children,k,E,A,v.el,v.anchor)},V=({el:v,anchor:k},E,A)=>{let P;for(;v&&v!==k;)P=h(v),s(v,E,A),v=P;s(k,E,A)},S=({el:v,anchor:k})=>{let E;for(;v&&v!==k;)E=h(v),o(v),v=E;o(k)},L=(v,k,E,A,P,D,H,B,O)=>{k.type==="svg"?H="svg":k.type==="math"&&(H="mathml"),v==null?W(k,E,A,P,D,H,B,O):ne(v,k,P,D,H,B,O)},W=(v,k,E,A,P,D,H,B)=>{let O,R;const{props:Q,shapeFlag:j,transition:K,dirs:se}=v;if(O=v.el=i(v.type,D,Q&&Q.is,Q),j&8?u(O,v.children):j&16&&ie(v.children,O,null,A,P,Ar(v,D),H,B),se&&Dn(v,null,A,"created"),ee(O,v,v.scopeId,H,A),Q){for(const $e in Q)$e!=="value"&&!$s($e)&&r(O,$e,null,Q[$e],D,A);"value"in Q&&r(O,"value",null,Q.value,D),(R=Q.onVnodeBeforeMount)&&wt(R,A,v)}se&&Dn(v,null,A,"beforeMount");const pe=vf(P,K);pe&&K.beforeEnter(O),s(O,k,E),((R=Q&&Q.onVnodeMounted)||pe||se)&&je(()=>{R&&wt(R,A,v),pe&&K.enter(O),se&&Dn(v,null,A,"mounted")},P)},ee=(v,k,E,A,P)=>{if(E&&b(v,E),A)for(let D=0;D<A.length;D++)b(v,A[D]);if(P){let D=P.subTree;if(k===D||Oo(D.type)&&(D.ssContent===k||D.ssFallback===k)){const H=P.vnode;ee(v,H,H.scopeId,H.slotScopeIds,P.parent)}}},ie=(v,k,E,A,P,D,H,B,O=0)=>{for(let R=O;R<v.length;R++){const Q=v[R]=B?vn(v[R]):Bt(v[R]);w(null,Q,k,E,A,P,D,H,B)}},ne=(v,k,E,A,P,D,H)=>{const B=k.el=v.el;let{patchFlag:O,dynamicChildren:R,dirs:Q}=k;O|=v.patchFlag&16;const j=v.props||be,K=k.props||be;let se;if(E&&Vn(E,!1),(se=K.onVnodeBeforeUpdate)&&wt(se,E,k,v),Q&&Dn(k,v,E,"beforeUpdate"),E&&Vn(E,!0),(j.innerHTML&&K.innerHTML==null||j.textContent&&K.textContent==null)&&u(B,""),R?Z(v.dynamicChildren,R,B,E,A,Ar(k,P),D):H||Ce(v,k,B,null,E,A,Ar(k,P),D,!1),O>0){if(O&16)ue(B,j,K,E,P);else if(O&2&&j.class!==K.class&&r(B,"class",null,K.class,P),O&4&&r(B,"style",j.style,K.style,P),O&8){const pe=k.dynamicProps;for(let $e=0;$e<pe.length;$e++){const Se=pe[$e],pt=j[Se],yt=K[Se];(yt!==pt||Se==="value")&&r(B,Se,pt,yt,P,E)}}O&1&&v.children!==k.children&&u(B,k.children)}else!H&&R==null&&ue(B,j,K,E,P);((se=K.onVnodeUpdated)||Q)&&je(()=>{se&&wt(se,E,k,v),Q&&Dn(k,v,E,"updated")},A)},Z=(v,k,E,A,P,D,H)=>{for(let B=0;B<k.length;B++){const O=v[B],R=k[B],Q=O.el&&(O.type===g||!Kn(O,R)||O.shapeFlag&198)?y(O.el):E;w(O,R,Q,null,A,P,D,H,!0)}},ue=(v,k,E,A,P)=>{if(k!==E){if(k!==be)for(const D in k)!$s(D)&&!(D in E)&&r(v,D,k[D],null,P,A);for(const D in E){if($s(D))continue;const H=E[D],B=k[D];H!==B&&D!=="value"&&r(v,D,B,H,P,A)}"value"in E&&r(v,"value",k.value,E.value,P)}},Ue=(v,k,E,A,P,D,H,B,O)=>{const R=k.el=v?v.el:l(""),Q=k.anchor=v?v.anchor:l("");let{patchFlag:j,dynamicChildren:K,slotScopeIds:se}=k;se&&(B=B?B.concat(se):se),v==null?(s(R,E,A),s(Q,E,A),ie(k.children||[],E,Q,P,D,H,B,O)):j>0&&j&64&&K&&v.dynamicChildren?(Z(v.dynamicChildren,K,E,P,D,H,B),(k.key!=null||P&&k===P.subTree)&&Fi(v,k,!0)):Ce(v,k,E,Q,P,D,H,B,O)},Ke=(v,k,E,A,P,D,H,B,O)=>{k.slotScopeIds=B,v==null?k.shapeFlag&512?P.ctx.activate(k,E,A,H,O):It(k,E,A,P,D,H,O):zn(v,k,O)},It=(v,k,E,A,P,D,H)=>{const B=v.component=Bf(v,A,P);if(pu(v)&&(B.ctx.renderer=Is),Lf(B,!1,H),B.asyncDep){if(P&&P.registerDep(B,Je,H),!v.el){const O=B.subTree=m(qt);N(null,O,k,E),v.placeholder=O.el}}else Je(B,v,k,E,P,D,H)},zn=(v,k,E)=>{const A=k.component=v.component;if(Pf(v,k,E))if(A.asyncDep&&!A.asyncResolved){xe(A,k,E);return}else A.next=k,A.update();else k.el=v.el,A.vnode=k},Je=(v,k,E,A,P,D,H)=>{const B=()=>{if(v.isMounted){let{next:j,bu:K,u:se,parent:pe,vnode:$e}=v;{const At=Du(v);if(At){j&&(j.el=$e.el,xe(v,j,H)),At.asyncDep.then(()=>{v.isUnmounted||B()});return}}let Se=j,pt;Vn(v,!1),j?(j.el=$e.el,xe(v,j,H)):j=$e,K&&es(K),(pt=j.props&&j.props.onVnodeBeforeUpdate)&&wt(pt,pe,j,$e),Vn(v,!0);const yt=La(v),Vt=v.subTree;v.subTree=yt,w(Vt,yt,y(Vt.el),fo(Vt),v,P,D),j.el=yt.el,Se===null&&Df(v,yt.el),se&&je(se,P),(pt=j.props&&j.props.onVnodeUpdated)&&je(()=>wt(pt,pe,j,$e),P)}else{let j;const{el:K,props:se}=k,{bm:pe,m:$e,parent:Se,root:pt,type:yt}=v,Vt=On(k);Vn(v,!1),pe&&es(pe),!Vt&&(j=se&&se.onVnodeBeforeMount)&&wt(j,Se,k),Vn(v,!0);{pt.ce&&pt.ce._def.shadowRoot!==!1&&pt.ce._injectChildStyle(yt);const At=v.subTree=La(v);w(null,At,E,A,v,P,D),k.el=At.el}if($e&&je($e,P),!Vt&&(j=se&&se.onVnodeMounted)){const At=k;je(()=>wt(j,Se,At),P)}(k.shapeFlag&256||Se&&On(Se.vnode)&&Se.vnode.shapeFlag&256)&&v.a&&je(v.a,P),v.isMounted=!0,k=E=A=null}};v.scope.on();const O=v.effect=new Fl(B);v.scope.off();const R=v.update=O.run.bind(O),Q=v.job=O.runIfDirty.bind(O);Q.i=v,Q.id=v.uid,O.scheduler=()=>Ti(Q),Vn(v,!0),R()},xe=(v,k,E)=>{k.component=v;const A=v.vnode.props;v.vnode=k,v.next=null,cf(v,k.props,A,E),mf(v,k.children,E),rn(),$a(v),an()},Ce=(v,k,E,A,P,D,H,B,O=!1)=>{const R=v&&v.children,Q=v?v.shapeFlag:0,j=k.children,{patchFlag:K,shapeFlag:se}=k;if(K>0){if(K&128){co(R,j,E,A,P,D,H,B,O);return}else if(K&256){$n(R,j,E,A,P,D,H,B,O);return}}se&8?(Q&16&&ks(R,P,D),j!==R&&u(E,j)):Q&16?se&16?co(R,j,E,A,P,D,H,B,O):ks(R,P,D,!0):(Q&8&&u(E,""),se&16&&ie(j,E,A,P,D,H,B,O))},$n=(v,k,E,A,P,D,H,B,O)=>{v=v||Xn,k=k||Xn;const R=v.length,Q=k.length,j=Math.min(R,Q);let K;for(K=0;K<j;K++){const se=k[K]=O?vn(k[K]):Bt(k[K]);w(v[K],se,E,null,P,D,H,B,O)}R>Q?ks(v,P,D,!0,!1,j):ie(k,E,A,P,D,H,B,O,j)},co=(v,k,E,A,P,D,H,B,O)=>{let R=0;const Q=k.length;let j=v.length-1,K=Q-1;for(;R<=j&&R<=K;){const se=v[R],pe=k[R]=O?vn(k[R]):Bt(k[R]);if(Kn(se,pe))w(se,pe,E,null,P,D,H,B,O);else break;R++}for(;R<=j&&R<=K;){const se=v[j],pe=k[K]=O?vn(k[K]):Bt(k[K]);if(Kn(se,pe))w(se,pe,E,null,P,D,H,B,O);else break;j--,K--}if(R>j){if(R<=K){const se=K+1,pe=se<Q?k[se].el:A;for(;R<=K;)w(null,k[R]=O?vn(k[R]):Bt(k[R]),E,pe,P,D,H,B,O),R++}}else if(R>K)for(;R<=j;)Dt(v[R],P,D,!0),R++;else{const se=R,pe=R,$e=new Map;for(R=pe;R<=K;R++){const vt=k[R]=O?vn(k[R]):Bt(k[R]);vt.key!=null&&$e.set(vt.key,R)}let Se,pt=0;const yt=K-pe+1;let Vt=!1,At=0;const ws=new Array(yt);for(R=0;R<yt;R++)ws[R]=0;for(R=se;R<=j;R++){const vt=v[R];if(pt>=yt){Dt(vt,P,D,!0);continue}let Rt;if(vt.key!=null)Rt=$e.get(vt.key);else for(Se=pe;Se<=K;Se++)if(ws[Se-pe]===0&&Kn(vt,k[Se])){Rt=Se;break}Rt===void 0?Dt(vt,P,D,!0):(ws[Rt-pe]=R+1,Rt>=At?At=Rt:Vt=!0,w(vt,k[Rt],E,null,P,D,H,B,O),pt++)}const Ia=Vt?bf(ws):Xn;for(Se=Ia.length-1,R=yt-1;R>=0;R--){const vt=pe+R,Rt=k[vt],wa=k[vt+1],Ma=vt+1<Q?wa.el||wa.placeholder:A;ws[R]===0?w(null,Rt,E,Ma,P,D,H,B,O):Vt&&(Se<0||R!==Ia[Se]?Pn(Rt,E,Ma,2):Se--)}}},Pn=(v,k,E,A,P=null)=>{const{el:D,type:H,transition:B,children:O,shapeFlag:R}=v;if(R&6){Pn(v.component.subTree,k,E,A);return}if(R&128){v.suspense.move(k,E,A);return}if(R&64){H.move(v,k,E,Is);return}if(H===g){s(D,k,E);for(let j=0;j<O.length;j++)Pn(O[j],k,E,A);s(v.anchor,k,E);return}if(H===Rr){V(v,k,E);return}if(A!==2&&R&1&&B)if(A===0)B.beforeEnter(D),s(D,k,E),je(()=>B.enter(D),P);else{const{leave:j,delayLeave:K,afterLeave:se}=B,pe=()=>{v.ctx.isUnmounted?o(D):s(D,k,E)},$e=()=>{D._isLeaving&&D[Lc](!0),j(D,()=>{pe(),se&&se()})};K?K(D,pe,$e):$e()}else s(D,k,E)},Dt=(v,k,E,A=!1,P=!1)=>{const{type:D,props:H,ref:B,children:O,dynamicChildren:R,shapeFlag:Q,patchFlag:j,dirs:K,cacheIndex:se}=v;if(j===-2&&(P=!1),B!=null&&(rn(),As(B,null,E,v,!0),an()),se!=null&&(k.renderCache[se]=void 0),Q&256){k.ctx.deactivate(v);return}const pe=Q&1&&K,$e=!On(v);let Se;if($e&&(Se=H&&H.onVnodeBeforeUnmount)&&wt(Se,k,v),Q&6)Ud(v.component,E,A);else{if(Q&128){v.suspense.unmount(E,A);return}pe&&Dn(v,null,k,"beforeUnmount"),Q&64?v.type.remove(v,k,E,Is,A):R&&!R.hasOnce&&(D!==g||j>0&&j&64)?ks(R,k,E,!1,!0):(D===g&&j&384||!P&&Q&16)&&ks(O,k,E),A&&ba(v)}($e&&(Se=H&&H.onVnodeUnmounted)||pe)&&je(()=>{Se&&wt(Se,k,v),pe&&Dn(v,null,k,"unmounted")},E)},ba=v=>{const{type:k,el:E,anchor:A,transition:P}=v;if(k===g){Hd(E,A);return}if(k===Rr){S(v);return}const D=()=>{o(E),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(v.shapeFlag&1&&P&&!P.persisted){const{leave:H,delayLeave:B}=P,O=()=>H(E,D);B?B(v.el,D,O):O()}else D()},Hd=(v,k)=>{let E;for(;v!==k;)E=h(v),o(v),v=E;o(k)},Ud=(v,k,E)=>{const{bum:A,scope:P,job:D,subTree:H,um:B,m:O,a:R}=v;No(O),No(R),A&&es(A),P.stop(),D&&(D.flags|=8,Dt(H,v,k,E)),B&&je(B,k),je(()=>{v.isUnmounted=!0},k)},ks=(v,k,E,A=!1,P=!1,D=0)=>{for(let H=D;H<v.length;H++)Dt(v[H],k,E,A,P)},fo=v=>{if(v.shapeFlag&6)return fo(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const k=h(v.anchor||v.el),E=k&&k[uu];return E?h(E):k};let Sr=!1;const ka=(v,k,E)=>{v==null?k._vnode&&Dt(k._vnode,null,null,!0):w(k._vnode||null,v,k,null,null,null,E),k._vnode=v,Sr||(Sr=!0,$a(),ru(),Sr=!1)},Is={p:w,um:Dt,m:Pn,r:ba,mt:It,mc:ie,pc:Ce,pbc:Z,n:fo,o:e};return{render:ka,hydrate:void 0,createApp:uf(ka)}}function Ar({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Vn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function vf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Fi(e,t,n=!1){const s=e.children,o=t.children;if(_(s)&&_(o))for(let r=0;r<s.length;r++){const i=s[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=vn(o[r]),l.el=i.el),!n&&l.patchFlag!==-2&&Fi(i,l)),l.type===fr&&l.patchFlag!==-1&&(l.el=i.el),l.type===qt&&!l.el&&(l.el=i.el)}}function bf(e){const t=e.slice(),n=[0];let s,o,r,i,l;const d=e.length;for(s=0;s<d;s++){const a=e[s];if(a!==0){if(o=n[n.length-1],e[o]<a){t[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)l=r+i>>1,e[n[l]]<a?r=l+1:i=l;a<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function Du(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Du(t)}function No(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const kf=Symbol.for("v-scx"),If=()=>We(kf);function wf(e,t){return Bi(e,null,{flush:"sync"})}function Pt(e,t,n){return Bi(e,t,n)}function Bi(e,t,n=be){const{immediate:s,deep:o,flush:r,once:i}=n,l=Qe({},n),d=t&&s||!t&&r!=="post";let a;if(zs){if(r==="sync"){const b=If();a=b.__watcherHandles||(b.__watcherHandles=[])}else if(!d){const b=()=>{};return b.stop=Ut,b.resume=Ut,b.pause=Ut,b}}const u=tt;l.call=(b,I,w)=>jt(b,u,I,w);let y=!1;r==="post"?l.scheduler=b=>{je(b,u&&u.suspense)}:r!=="sync"&&(y=!0,l.scheduler=(b,I)=>{I?b():Ti(b)}),l.augmentJob=b=>{t&&(b.flags|=4),y&&(b.flags|=2,u&&(b.id=u.uid,b.i=u))};const h=Rc(e,t,l);return zs&&(a?a.push(h):d&&h()),h}function Mf(e,t,n){const s=this.proxy,o=Le(e)?e.includes(".")?Vu(s,e):()=>s[e]:e.bind(s,s);let r;oe(t)?r=t:(r=t.handler,n=t);const i=oo(this),l=Bi(o,r.bind(s),n);return i(),l}function Vu(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function Sf(e,t,n=be){const s=hs(),o=kt(t),r=Sn(t),i=Au(e,o),l=eu((d,a)=>{let u,y=be,h;return wf(()=>{const b=e[o];ht(u,b)&&(u=b,a())}),{get(){return d(),n.get?n.get(u):u},set(b){const I=n.set?n.set(b):b;if(!ht(I,u)&&!(y!==be&&ht(b,y)))return;const w=s.vnode.props;w&&(t in w||o in w||r in w)&&(`onUpdate:${t}`in w||`onUpdate:${o}`in w||`onUpdate:${r}`in w)||(u=b,a()),s.emit(`update:${t}`,I),ht(b,I)&&ht(b,y)&&!ht(I,h)&&a(),y=b,h=I}}});return l[Symbol.iterator]=()=>{let d=0;return{next(){return d<2?{value:d++?i||be:l,done:!1}:{done:!0}}}},l}const Au=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${kt(t)}Modifiers`]||e[`${Sn(t)}Modifiers`];function Ef(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||be;let o=n;const r=t.startsWith("update:"),i=r&&Au(s,t.slice(7));i&&(i.trim&&(o=n.map(u=>Le(u)?u.trim():u)),i.number&&(o=n.map(Ur)));let l,d=s[l=Er(t)]||s[l=Er(kt(t))];!d&&r&&(d=s[l=Er(Sn(t))]),d&&jt(d,e,6,o);const a=s[l+"Once"];if(a){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,jt(a,e,6,o)}}const xf=new WeakMap;function Ru(e,t,n=!1){const s=n?xf:t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let i={},l=!1;if(!oe(e)){const d=a=>{const u=Ru(a,t,!0);u&&(l=!0,Qe(i,u))};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!r&&!l?(Ve(e)&&s.set(e,null),null):(_(r)?r.forEach(d=>i[d]=null):Qe(i,r),Ve(e)&&s.set(e,i),i)}function cr(e,t){return!e||!nr(t)?!1:(t=t.slice(2).replace(/Once$/,""),we(e,t[0].toLowerCase()+t.slice(1))||we(e,Sn(t))||we(e,t))}function La(e){const{type:t,vnode:n,proxy:s,withProxy:o,propsOptions:[r],slots:i,attrs:l,emit:d,render:a,renderCache:u,props:y,data:h,setupState:b,ctx:I,inheritAttrs:w}=e,$=Do(e);let N,C;try{if(n.shapeFlag&4){const S=o||s,L=S;N=Bt(a.call(L,S,u,y,b,h,I)),C=l}else{const S=t;N=Bt(S.length>1?S(y,{attrs:l,slots:i,emit:d}):S(y,null)),C=t.props?l:Cf(l)}}catch(S){Ts.length=0,lr(S,e,1),N=m(qt)}let V=N;if(C&&w!==!1){const S=Object.keys(C),{shapeFlag:L}=V;S.length&&L&7&&(r&&S.some(Si)&&(C=$f(C,r)),V=Bn(V,C,!1,!0))}return n.dirs&&(V=Bn(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&ur(V,n.transition),N=V,Do($),N}const Cf=e=>{let t;for(const n in e)(n==="class"||n==="style"||nr(n))&&((t||(t={}))[n]=e[n]);return t},$f=(e,t)=>{const n={};for(const s in e)(!Si(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function Pf(e,t,n){const{props:s,children:o,component:r}=e,{props:i,children:l,patchFlag:d}=t,a=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return s?Ha(s,i,a):!!i;if(d&8){const u=t.dynamicProps;for(let y=0;y<u.length;y++){const h=u[y];if(i[h]!==s[h]&&!cr(a,h))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:s===i?!1:s?i?Ha(s,i,a):!0:!!i;return!1}function Ha(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!cr(n,r))return!0}return!1}function Df({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Oo=e=>e.__isSuspense;function Vf(e,t){t&&t.pendingBranch?_(e)?t.effects.push(...e):t.effects.push(e):Oc(e)}const g=Symbol.for("v-fgt"),fr=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),Rr=Symbol.for("v-stc"),Ts=[];let bt=null;function c(e=!1){Ts.push(bt=e?null:[])}function Af(){Ts.pop(),bt=Ts[Ts.length-1]||null}let qs=1;function Ua(e,t=!1){qs+=e,e<0&&bt&&t&&(bt.hasOnce=!0)}function Tu(e){return e.dynamicChildren=qs>0?bt||Xn:null,Af(),qs>0&&bt&&bt.push(e),e}function p(e,t,n,s,o,r){return Tu(x(e,t,n,s,o,r,!0))}function Y(e,t,n,s,o){return Tu(m(e,t,n,s,o,!0))}function pr(e){return e?e.__v_isVNode===!0:!1}function Kn(e,t){return e.type===t.type&&e.key===t.key}const Nu=({key:e})=>e??null,bo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Le(e)||fe(e)||oe(e)?{i:Ze,r:e,k:t,f:!!n}:e:null);function x(e,t=null,n=null,s=0,o=null,r=e===g?0:1,i=!1,l=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Nu(t),ref:t&&bo(t),scopeId:au,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ze};return l?(Li(d,n),r&128&&e.normalize(d)):n&&(d.shapeFlag|=Le(n)?8:16),qs>0&&!i&&bt&&(d.patchFlag>0||r&6)&&d.patchFlag!==32&&bt.push(d),d}const m=Rf;function Rf(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===Xc)&&(e=qt),pr(e)){const l=Bn(e,t,!0);return n&&Li(l,n),qs>0&&!r&&bt&&(l.shapeFlag&6?bt[bt.indexOf(e)]=l:bt.push(l)),l.patchFlag=-2,l}if(qf(e)&&(e=e.__vccOpts),t){t=Tf(t);let{class:l,style:d}=t;l&&!Le(l)&&(t.class=ot(l)),Ve(d)&&(Ri(d)&&!_(d)&&(d=Qe({},d)),t.style=Ci(d))}const i=Le(e)?1:Oo(e)?128:Fc(e)?64:Ve(e)?4:oe(e)?2:0;return x(e,t,n,s,o,i,r,!0)}function Tf(e){return e?Ri(e)||Su(e)?Qe({},e):e:null}function Bn(e,t,n=!1,s=!1){const{props:o,ref:r,patchFlag:i,children:l,transition:d}=e,a=t?Nf(o||{},t):o,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Nu(a),ref:t&&t.ref?n&&r?_(r)?r.concat(bo(t)):[r,bo(t)]:bo(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==g?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Bn(e.ssContent),ssFallback:e.ssFallback&&Bn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&s&&ur(u,d.clone(u)),u}function M(e=" ",t=0){return m(fr,null,e,t)}function F(e="",t=!1){return t?(c(),Y(qt,null,e)):m(qt,null,e)}function Bt(e){return e==null||typeof e=="boolean"?m(qt):_(e)?m(g,null,e.slice()):pr(e)?vn(e):m(fr,null,String(e))}function vn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Bn(e)}function Li(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(_(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Li(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Su(t)?t._ctx=Ze:o===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else oe(t)?(t={default:t,_ctx:Ze},n=32):(t=String(t),s&64?(n=16,t=[M(t)]):n=8);e.children=t,e.shapeFlag|=n}function Nf(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=ot([t.class,s.class]));else if(o==="style")t.style=Ci([t.style,s.style]);else if(nr(o)){const r=t[o],i=s[o];i&&r!==i&&!(_(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=s[o])}return t}function wt(e,t,n,s=null){jt(e,t,7,[n,s])}const Of=Iu();let Ff=0;function Bf(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||Of,r={uid:Ff++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new tc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xu(s,o),emitsOptions:Ru(s,o),emit:null,emitted:null,propsDefaults:be,inheritAttrs:s.inheritAttrs,ctx:be,data:be,props:be,attrs:be,slots:be,refs:be,setupState:be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Ef.bind(null,r),e.ce&&e.ce(r),r}let tt=null;const hs=()=>tt||Ze;let Fo,Zr;{const e=rr(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),r=>{o.length>1?o.forEach(i=>i(r)):o[0](r)}};Fo=t("__VUE_INSTANCE_SETTERS__",n=>tt=n),Zr=t("__VUE_SSR_SETTERS__",n=>zs=n)}const oo=e=>{const t=tt;return Fo(e),e.scope.on(),()=>{e.scope.off(),Fo(t)}},ja=()=>{tt&&tt.scope.off(),Fo(null)};function Ou(e){return e.vnode.shapeFlag&4}let zs=!1;function Lf(e,t=!1,n=!1){t&&Zr(t);const{props:s,children:o}=e.vnode,r=Ou(e);df(e,s,r,t),yf(e,o,n||t);const i=r?Hf(e,t):void 0;return t&&Zr(!1),i}function Hf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ef);const{setup:s}=n;if(s){rn();const o=e.setupContext=s.length>1?jf(e):null,r=oo(e),i=no(s,e,0,[e.props,o]),l=Pl(i);if(an(),r(),(l||e.sp)&&!On(e)&&fu(e),l){if(i.then(ja,ja),t)return i.then(d=>{qa(e,d)}).catch(d=>{lr(d,e,0)});e.asyncDep=i}else qa(e,i)}else Fu(e)}function qa(e,t,n){oe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ve(t)&&(e.setupState=_l(t)),Fu(e)}function Fu(e,t,n){const s=e.type;e.render||(e.render=s.render||Ut);{const o=oo(e);rn();try{nf(e)}finally{an(),o()}}}const Uf={get(e,t){return et(e,"get",""),e[t]}};function jf(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Uf),slots:e.slots,emit:e.emit,expose:t}}function yr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(_l(wc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rs)return Rs[n](e)},has(t,n){return n in t||n in Rs}})):e.proxy}function Qr(e,t=!0){return oe(e)?e.displayName||e.name:e.name||t&&e.__name}function qf(e){return oe(e)&&"__vccOpts"in e}const Ne=(e,t)=>Vc(e,t,zs),zf="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xr;const za=typeof window<"u"&&window.trustedTypes;if(za)try{Xr=za.createPolicy("vue",{createHTML:e=>e})}catch{}const Bu=Xr?e=>Xr.createHTML(e):e=>e,Wf="http://www.w3.org/2000/svg",Gf="http://www.w3.org/1998/Math/MathML",Xt=typeof document<"u"?document:null,Wa=Xt&&Xt.createElement("template"),Kf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?Xt.createElementNS(Wf,e):t==="mathml"?Xt.createElementNS(Gf,e):n?Xt.createElement(e,{is:n}):Xt.createElement(e);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>Xt.createTextNode(e),createComment:e=>Xt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Xt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,r){const i=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{Wa.innerHTML=Bu(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=Wa.content;if(s==="svg"||s==="mathml"){const d=l.firstChild;for(;d.firstChild;)l.appendChild(d.firstChild);l.removeChild(d)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Jf=Symbol("_vtc");function Yf(e,t,n){const s=e[Jf];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Bo=Symbol("_vod"),Lu=Symbol("_vsh"),Zf={name:"show",beforeMount(e,{value:t},{transition:n}){e[Bo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ss(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Ss(e,!0),s.enter(e)):s.leave(e,()=>{Ss(e,!1)}):Ss(e,t))},beforeUnmount(e,{value:t}){Ss(e,t)}};function Ss(e,t){e.style.display=t?e[Bo]:"none",e[Lu]=!t}const Qf=Symbol(""),Xf=/(?:^|;)\s*display\s*:/;function _f(e,t,n){const s=e.style,o=Le(n);let r=!1;if(n&&!o){if(t)if(Le(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&ko(s,l,"")}else for(const i in t)n[i]==null&&ko(s,i,"");for(const i in n)i==="display"&&(r=!0),ko(s,i,n[i])}else if(o){if(t!==n){const i=s[Qf];i&&(n+=";"+i),s.cssText=n,r=Xf.test(n)}}else t&&e.removeAttribute("style");Bo in e&&(e[Bo]=r?s.display:"",e[Lu]&&(s.display="none"))}const Ga=/\s*!important$/;function ko(e,t,n){if(_(n))n.forEach(s=>ko(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=ep(e,t);Ga.test(n)?e.setProperty(Sn(s),n.replace(Ga,""),"important"):e[s]=n}}const Ka=["Webkit","Moz","ms"],Tr={};function ep(e,t){const n=Tr[t];if(n)return n;let s=kt(t);if(s!=="filter"&&s in e)return Tr[t]=s;s=or(s);for(let o=0;o<Ka.length;o++){const r=Ka[o]+s;if(r in e)return Tr[t]=r}return t}const Ja="http://www.w3.org/1999/xlink";function Ya(e,t,n,s,o,r=ec(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ja,t.slice(6,t.length)):e.setAttributeNS(Ja,t,n):n==null||r&&!Rl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":dn(n)?String(n):n)}function Za(e,t,n,s,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Bu(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?e.type==="checkbox"?"on":"":String(n);(l!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Rl(n):n==null&&l==="string"?(n="",i=!0):l==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(o||t)}function Jn(e,t,n,s){e.addEventListener(t,n,s)}function tp(e,t,n,s){e.removeEventListener(t,n,s)}const Qa=Symbol("_vei");function np(e,t,n,s,o=null){const r=e[Qa]||(e[Qa]={}),i=r[t];if(s&&i)i.value=s;else{const[l,d]=sp(t);if(s){const a=r[t]=ip(s,o);Jn(e,l,a,d)}else i&&(tp(e,l,i,d),r[t]=void 0)}}const Xa=/(?:Once|Passive|Capture)$/;function sp(e){let t;if(Xa.test(e)){t={};let s;for(;s=e.match(Xa);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Sn(e.slice(2)),t]}let Nr=0;const op=Promise.resolve(),rp=()=>Nr||(op.then(()=>Nr=0),Nr=Date.now());function ip(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;jt(ap(s,n.value),t,5,[s])};return n.value=e,n.attached=rp(),n}function ap(e,t){if(_(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const _a=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,lp=(e,t,n,s,o,r)=>{const i=o==="svg";t==="class"?Yf(e,s,i):t==="style"?_f(e,n,s):nr(t)?Si(t)||np(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):up(e,t,s,i))?(Za(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ya(e,t,s,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Le(s))?Za(e,kt(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Ya(e,t,s,i))};function up(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&_a(t)&&oe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return _a(t)&&Le(n)?!1:t in e}const el=e=>{const t=e.props["onUpdate:modelValue"]||!1;return _(t)?n=>es(t,n):t};function dp(e){e.target.composing=!0}function tl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Or=Symbol("_assign"),cp={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Or]=el(o);const r=s||o.props&&o.props.type==="number";Jn(e,t?"change":"input",i=>{if(i.target.composing)return;let l=e.value;n&&(l=l.trim()),r&&(l=Ur(l)),e[Or](l)}),n&&Jn(e,"change",()=>{e.value=e.value.trim()}),t||(Jn(e,"compositionstart",dp),Jn(e,"compositionend",tl),Jn(e,"change",tl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:o,number:r}},i){if(e[Or]=el(i),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?Ur(e.value):e.value,d=t??"";l!==d&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||o&&e.value.trim()===d)||(e.value=d))}},fp=Qe({patchProp:lp},Kf);let nl;function pp(){return nl||(nl=hf(fp))}const yp=((...e)=>{const t=pp().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=hp(s);if(!o)return;const r=t._component;!oe(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const i=n(o,!1,mp(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t});function mp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function hp(e){return Le(e)?document.querySelector(e):e}class gp{val;constructor(t){this.val=t}isOk=!0;isErr=!1;isOkAnd(t){return t(this.val)}isErrAnd(){return!1}unwrap(){return this.val}unwrapBy(){return this.val}expect(){return this.val}unwrapOr(){return this.val}match(t,n){return t(this.val)}union(){return this.val}map(t){return me.ok(t(this.val))}mapErr(){return this}bind(t){return t(this.val)}bindErr(){return this}tap(t){return t(this.val),this}tapErr(){return this}}class vp{err;constructor(t){this.err=t}isOk=!1;isErr=!0;isOkAnd(){return!1}isErrAnd(t){return t(this.err)}unwrap(){throw this.err}unwrapBy(t){t(this.err)}expect(t){throw new Error(t)}unwrapOr(t){return t}match(t,n){return n(this.err)}union(){return this.err}map(){return this}mapErr(t){return me.err(t(this.err))}bind(){return this}bindErr(t){return t(this.err)}tap(){return this}tapErr(t){return t(this.err),this}}const X=e=>new gp(e),ve=e=>new vp(e);(function(e){e.ok=X,e.err=ve,e.all=t=>{const n=[];for(const s of t){if(s.isErr)return s;n.push(s.val)}return e.ok(n)},e.any=t=>{const n=[];for(const s of t){if(s.isOk)return s;n.push(s.err)}return e.err(n)},e.wrap=t=>{try{return e.ok(t())}catch(n){return e.err(n)}},e.fold=(t,n,s)=>t.reduce((o,r,i)=>o.bind(l=>s(l,r,i)),e.ok(n)),e.isOk=t=>t.isOk,e.isErr=t=>t.isErr,e.isOkAnd=t=>n=>n.isOkAnd(t),e.isErrAnd=t=>n=>n.isErrAnd(t),e.unwrap=t=>t.unwrap(),e.unwrapBy=t=>n=>n.unwrapBy(t),e.expect=t=>n=>n.expect(t),e.unwrapOr=t=>n=>n.unwrapOr(t),e.map=t=>n=>n.map(t),e.mapErr=t=>n=>n.mapErr(t),e.bind=t=>n=>n.bind(t),e.bindErr=t=>n=>n.bindErr(t),e.match=(t,n)=>s=>s.match(t,n),e.union=t=>t.union(),e.tap=t=>n=>n.tap(t),e.tapErr=t=>n=>n.tapErr(t)})(me||(me={}));var me;const bp=Symbol("ParseErr"),gs=(e,t)=>({type:e,[bp]:!0,...t}),Hi=(e,t)=>({...e,index:e.index+t,rest:e.rest.slice(t)}),vs=e=>t=>{const[n]=t.rest;return n&&e(n)?X({val:n,state:Hi(t,1)}):ve(null)},kp=vs(()=>!0),Ip=e=>vs(t=>e.test(t)),zt=e=>vs(t=>t===e),mr=e=>vs(t=>e.includes(t)),wp=e=>vs(t=>!e.includes(t)),sl=e=>t=>t.rest.startsWith(e)?X({val:e,state:Hi(t,e.length)}):ve(null),ol=e=>t=>{const n=t.rest.match(e);if(n&&n.index===0){const[s]=n;return X({val:s,state:Hi(t,s.length)})}return ve(null)},ls=e=>t=>X({val:e,state:t}),Ui=e=>()=>ve(e),Hu=e=>t=>e.map(n=>({val:n,state:t})),Mp=(e,t)=>En(e,n=>Hu(t(n)?X(n):ve(null))),ft=(e,t)=>n=>e(n).map(({val:s,state:o})=>({val:t(s),state:o})),Sp=(e,t)=>n=>e(n).mapErr(t),Ep=(e,t)=>n=>e(n).map(({val:s,state:o})=>({val:s,state:t(o)})),Uu=e=>ft(e,t=>t.join("")),Cs=(e,t)=>ft(Wt([e,Ws(ft(Wt([t,e]),([,n])=>n))]),([n,s])=>[n,...s]),rl=(e,t)=>Lo([Cs(e,t),ls([])]),il=(e,t)=>ft(Wt([e,hr(ft(Wt([t,e]),([,n])=>n))]),([n,s])=>[n,...s]),Lo=e=>t=>{for(const n of e){const s=n(t);if(s.isOk)return s}return ve(null)},En=(e,t)=>n=>e(n).bind(({val:s,state:o})=>t(s)(o)),ju=(e,t)=>n=>e(n).bindErr(s=>t(s)(n)),xp=(e,t)=>n=>e(n).bind(({val:s,state:o})=>t({val:s,state:o})(o)),Cp=(e,t,n)=>s=>e(s).match(({val:o,state:r})=>t(o)(r),o=>n(o)(s)),Ho=e=>t=>e(t).bindErr(()=>X({val:null,state:t})),hr=e=>En(e,t=>ft(Ws(e),n=>[t,...n])),Ws=e=>ju(hr(e),()=>ls([])),Wt=e=>t=>{const n=[];for(const s of e){const o=s(t);if(!o.isOk)return o;{const{val:r,state:i}=o.val;n.push(r),t=i}}return X({val:n,state:t})},al=e=>ft(e,()=>null),$p=e=>t=>En(t,n=>ft(e,()=>n)),Pp=e=>t=>En(e,()=>t),qu=e=>ft(e,([t])=>t),Dp=e=>t=>e()(t),_r=e=>e.rest?ve(gs("ExpectEnd",{rest:e.rest})):X({val:null,state:e}),Vp=e=>qu(Wt([e,_r])),Ap=` 	\r
`,ei=mr(Ap),bs=(e,t)=>n=>ft(Wt([e,n,t]),([,s])=>s),Rp=bs(Ws(ei),Ws(ei)),Tp=bs(zt("("),zt(")")),Np=bs(zt("["),zt("]")),Op=bs(zt("{"),zt("}")),Fp=bs(zt("<"),zt(">")),Bp="0123456789",zu=mr(Bp),Uo=Uu(hr(zu)),ji=ft(Uo,Number),qi=e=>ft(Wt([Ho(mr("+-")),e]),([t,n])=>t==="-"?-n:n),Lp=qi(ji),Hp=qi(Lo([ft(Wt([Ho(Uo),zt("."),Uo]),([e,,t])=>+`${e??0}.${t}`),ji])),Up=(e,t)=>En(e,n=>ft(t,()=>n)),jp=(e,t)=>En(e,n=>Cp(t,()=>Ui(null),()=>ls(n))),qp=e=>En(e,t=>t?ls(t):Ui(null));(function(e){e.startOf=t=>({start:t.start,end:t.start}),e.endOf=t=>({start:t.end,end:t.end}),e.outer=(t,n)=>({start:t.start,end:n.end}),e.inner=(t,n)=>({start:t.end,end:n.start}),e.empty=()=>({start:1,end:0})})(Gs||(Gs={}));const zp=e=>t=>e(t).map(({val:n,state:s})=>({val:{val:n,range:{start:t.index,end:s.index}},state:s})),f={satisfiy:vs,anyChar:kp,char:zt,charMatch:Ip,oneOf:mr,noneOf:wp,string:sl,str:sl,stringMatch:ol,regex:ol,pure:ls,return:ls,fail:Ui,result:Hu,guard:Mp,map:ft,mapErr:Sp,mapState:Ep,join:Uu,separatedBy:Cs,sep:Cs,separatedBy0:rl,sep0:rl,separatedBy1:Cs,sep1:Cs,separatedBy2:il,sep2:il,alternative:Lo,alt:Lo,bind:En,bindErr:ju,bindValState:xp,optional:Ho,opt:Ho,some:hr,many:Ws,sequence:Wt,seq:Wt,skip:al,ignore:al,left:$p,right:Pp,head:qu,lazy:Dp,endOfInput:_r,eoi:_r,ended:Vp,white:ei,delimitedBy:bs,spaced:Rp,parens:Tp,brackets:Np,braces:Op,angles:Fp,digit:zu,digits:Uo,posint:ji,integer:Lp,signed:qi,decimal:Hp,followedBy:Up,notFollowedBy:jp,notEmpty:qp,ranged:zp};var Gs;const ln=Symbol.for("@ts-pattern/matcher"),Wp=Symbol.for("@ts-pattern/isVariadic"),jo="@ts-pattern/anonymous-select-key",ti=e=>!!(e&&typeof e=="object"),Io=e=>e&&!!e[ln],Lt=(e,t,n)=>{if(Io(e)){const s=e[ln](),{matched:o,selections:r}=s.match(t);return o&&r&&Object.keys(r).forEach(i=>n(i,r[i])),o}if(ti(e)){if(!ti(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let s=[],o=[],r=[];for(const i of e.keys()){const l=e[i];Io(l)&&l[Wp]?r.push(l):r.length?o.push(l):s.push(l)}if(r.length){if(r.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(t.length<s.length+o.length)return!1;const i=t.slice(0,s.length),l=o.length===0?[]:t.slice(-o.length),d=t.slice(s.length,o.length===0?1/0:-o.length);return s.every((a,u)=>Lt(a,i[u],n))&&o.every((a,u)=>Lt(a,l[u],n))&&(r.length===0||Lt(r[0],d,n))}return e.length===t.length&&e.every((i,l)=>Lt(i,t[l],n))}return Reflect.ownKeys(e).every(s=>{const o=e[s];return(s in t||Io(r=o)&&r[ln]().matcherType==="optional")&&Lt(o,t[s],n);var r})}return Object.is(t,e)},wn=e=>{var t,n,s;return ti(e)?Io(e)?(t=(n=(s=e[ln]()).getSelectionKeys)==null?void 0:n.call(s))!=null?t:[]:Array.isArray(e)?Ks(e,wn):Ks(Object.values(e),wn):[]},Ks=(e,t)=>e.reduce((n,s)=>n.concat(t(s)),[]);function xt(e){return Object.assign(e,{optional:()=>Gp(e),and:t=>Te(e,t),or:t=>Kp(e,t),select:t=>t===void 0?ll(e):ll(t,e)})}function Gp(e){return xt({[ln]:()=>({match:t=>{let n={};const s=(o,r)=>{n[o]=r};return t===void 0?(wn(e).forEach(o=>s(o,void 0)),{matched:!0,selections:n}):{matched:Lt(e,t,s),selections:n}},getSelectionKeys:()=>wn(e),matcherType:"optional"})})}function Te(...e){return xt({[ln]:()=>({match:t=>{let n={};const s=(o,r)=>{n[o]=r};return{matched:e.every(o=>Lt(o,t,s)),selections:n}},getSelectionKeys:()=>Ks(e,wn),matcherType:"and"})})}function Kp(...e){return xt({[ln]:()=>({match:t=>{let n={};const s=(o,r)=>{n[o]=r};return Ks(e,wn).forEach(o=>s(o,void 0)),{matched:e.some(o=>Lt(o,t,s)),selections:n}},getSelectionKeys:()=>Ks(e,wn),matcherType:"or"})})}function Ie(e){return{[ln]:()=>({match:t=>({matched:!!e(t)})})}}function ll(...e){const t=typeof e[0]=="string"?e[0]:void 0,n=e.length===2?e[1]:typeof e[0]=="string"?void 0:e[0];return xt({[ln]:()=>({match:s=>{let o={[t??jo]:s};return{matched:n===void 0||Lt(n,s,(r,i)=>{o[r]=i}),selections:o}},getSelectionKeys:()=>[t??jo].concat(n===void 0?[]:wn(n))})})}function Tt(e){return typeof e=="number"}function pn(e){return typeof e=="string"}function yn(e){return typeof e=="bigint"}xt(Ie(function(e){return!0}));const mn=e=>Object.assign(xt(e),{startsWith:t=>{return mn(Te(e,(n=t,Ie(s=>pn(s)&&s.startsWith(n)))));var n},endsWith:t=>{return mn(Te(e,(n=t,Ie(s=>pn(s)&&s.endsWith(n)))));var n},minLength:t=>mn(Te(e,(n=>Ie(s=>pn(s)&&s.length>=n))(t))),length:t=>mn(Te(e,(n=>Ie(s=>pn(s)&&s.length===n))(t))),maxLength:t=>mn(Te(e,(n=>Ie(s=>pn(s)&&s.length<=n))(t))),includes:t=>{return mn(Te(e,(n=t,Ie(s=>pn(s)&&s.includes(n)))));var n},regex:t=>{return mn(Te(e,(n=t,Ie(s=>pn(s)&&!!s.match(n)))));var n}});mn(Ie(pn));const Nt=e=>Object.assign(xt(e),{between:(t,n)=>Nt(Te(e,((s,o)=>Ie(r=>Tt(r)&&s<=r&&o>=r))(t,n))),lt:t=>Nt(Te(e,(n=>Ie(s=>Tt(s)&&s<n))(t))),gt:t=>Nt(Te(e,(n=>Ie(s=>Tt(s)&&s>n))(t))),lte:t=>Nt(Te(e,(n=>Ie(s=>Tt(s)&&s<=n))(t))),gte:t=>Nt(Te(e,(n=>Ie(s=>Tt(s)&&s>=n))(t))),int:()=>Nt(Te(e,Ie(t=>Tt(t)&&Number.isInteger(t)))),finite:()=>Nt(Te(e,Ie(t=>Tt(t)&&Number.isFinite(t)))),positive:()=>Nt(Te(e,Ie(t=>Tt(t)&&t>0))),negative:()=>Nt(Te(e,Ie(t=>Tt(t)&&t<0)))});Nt(Ie(Tt));const hn=e=>Object.assign(xt(e),{between:(t,n)=>hn(Te(e,((s,o)=>Ie(r=>yn(r)&&s<=r&&o>=r))(t,n))),lt:t=>hn(Te(e,(n=>Ie(s=>yn(s)&&s<n))(t))),gt:t=>hn(Te(e,(n=>Ie(s=>yn(s)&&s>n))(t))),lte:t=>hn(Te(e,(n=>Ie(s=>yn(s)&&s<=n))(t))),gte:t=>hn(Te(e,(n=>Ie(s=>yn(s)&&s>=n))(t))),positive:()=>hn(Te(e,Ie(t=>yn(t)&&t>0))),negative:()=>hn(Te(e,Ie(t=>yn(t)&&t<0)))});hn(Ie(yn));xt(Ie(function(e){return typeof e=="boolean"}));xt(Ie(function(e){return typeof e=="symbol"}));xt(Ie(function(e){return e==null}));xt(Ie(function(e){return e!=null}));class Jp extends Error{constructor(t){let n;try{n=JSON.stringify(t)}catch{n=t}super(`Pattern matching error: no pattern matches value ${n}`),this.input=void 0,this.input=t}}const ni={matched:!1,value:void 0};function Be(e){return new qo(e,ni)}class qo{constructor(t,n){this.input=void 0,this.state=void 0,this.input=t,this.state=n}with(...t){if(this.state.matched)return this;const n=t[t.length-1],s=[t[0]];let o;t.length===3&&typeof t[1]=="function"?o=t[1]:t.length>2&&s.push(...t.slice(1,t.length-1));let r=!1,i={};const l=(a,u)=>{r=!0,i[a]=u},d=!s.some(a=>Lt(a,this.input,l))||o&&!o(this.input)?ni:{matched:!0,value:n(r?jo in i?i[jo]:i:this.input,this.input)};return new qo(this.input,d)}when(t,n){if(this.state.matched)return this;const s=!!t(this.input);return new qo(this.input,s?{matched:!0,value:n(this.input,this.input)}:ni)}otherwise(t){return this.state.matched?this.state.value:t(this.input)}exhaustive(t=Yp){return this.state.matched?this.state.value:t(this.input)}run(){return this.exhaustive()}returnType(){return this}narrow(){return this}}function Yp(e){throw new Jp(e)}function Zp(e,t,n){let s=o=>e(o,...t);return n===void 0?s:Object.assign(s,{lazy:n,lazyArgs:t})}function Xe(e,t,n){let s=e.length-t.length;if(s===0)return e(...t);if(s===1)return Zp(e,t,n);throw Error("Wrong number of arguments")}function Wu(...e){return Xe(Qp,e)}const Qp=(e,t)=>[...e,...t],gr={done:!1,hasNext:!1};function U(e,...t){let n=e,s=t.map(r=>"lazy"in r?Xp(r):void 0),o=0;for(;o<t.length;){if(s[o]===void 0||!_p(n)){let d=t[o];n=d(n),o+=1;continue}let r=[];for(let d=o;d<t.length;d++){let a=s[d];if(a===void 0||(r.push(a),a.isSingle))break}let i=[];for(let d of n)if(Gu(d,i,r))break;let{isSingle:l}=r.at(-1);n=l?i[0]:i,o+=r.length}return n}function Gu(e,t,n){if(n.length===0)return t.push(e),!1;let s=e,o=gr,r=!1;for(let[i,l]of n.entries()){let{index:d,items:a}=l;if(a.push(s),o=l(s,d,a),l.index+=1,o.hasNext){if(o.hasMany??!1){for(let u of o.next)if(Gu(u,t,n.slice(i+1)))return!0;return r}s=o.next}if(!o.hasNext)break;o.done&&(r=!0)}return o.hasNext&&t.push(s),r}function Xp(e){let{lazy:t,lazyArgs:n}=e,s=t(...n);return Object.assign(s,{isSingle:t.single??!1,index:0,items:[]})}function _p(e){return typeof e=="string"||typeof e=="object"&&!!e&&Symbol.iterator in e}function Ku(e,t){let n=t.length-e.length;if(n===1){let[s,...o]=t;return U(s,{lazy:e,lazyArgs:o})}if(n===0){let s={lazy:e,lazyArgs:t};return Object.assign(o=>U(o,s),s)}throw Error("Wrong number of arguments")}function ul(...e){return Xe(ey,e)}const ey=(e,t)=>e.length>=t;function Ju(...e){return Xe(Object.entries,e)}function ty(...e){return Xe(ny,e,sy)}const ny=(e,t)=>e.filter(t),sy=e=>(t,n,s)=>e(t,n,s)?{done:!1,hasNext:!0,next:t}:gr;function zo(...e){return Xe(oy,e,ry)}const oy=(e,t)=>e.flatMap(t),ry=e=>(t,n,s)=>{let o=e(t,n,s);return Array.isArray(o)?{done:!1,hasNext:!0,hasMany:!0,next:o}:{done:!1,hasNext:!0,next:o}};function iy(...e){return Xe(ay,e)}function ay(e,t){for(let[n,s]of Object.entries(e))t(s,n,e);return e}function ly(...e){return Xe(uy,e)}const uy=(e,t)=>{let n=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],r=t(o,s,e);if(r!==void 0){let i=n[r];i===void 0?n[r]=[o]:i.push(o)}}return Object.setPrototypeOf(n,Object.prototype),n};function zi(...e){return Xe(dy,e)}function dy(e,t){let n=Object.create(null);for(let s of e){let o=s?.[t];if(o!==void 0){let r=n[o];r===void 0?n[o]=[s]:r.push(s)}}return Object.setPrototypeOf(n,Object.prototype),n}function vr(...e){return Xe(Object.keys,e)}function Me(...e){return Xe(cy,e,fy)}const cy=(e,t)=>e.map(t),fy=e=>(t,n,s)=>({done:!1,hasNext:!0,next:e(t,n,s)});function Js(...e){return Xe(py,e)}function py(e,t){let n={};for(let[s,o]of Object.entries(e))n[s]=t(o,s,e);return n}function yy(...e){return Xe(my,e)}function my(e){let t=typeof e[0]=="bigint"?0n:0;for(let n of e)t+=n;return t}function hy(e){let t={};for(let n of e)t={...t,...n};return t}function Yu(...e){return Xe(gy,e)}function gy(e,t){if(!ul(t,1))return{...e};if(!ul(t,2)){let{[t[0]]:s,...o}=e;return o}let n={...e};for(let s of t)delete n[s];return n}function Zu(...e){return Xe(vy,e)}function vy(e,t){let n={};for(let s of t)s in e&&(n[s]=e[s]);return n}function gt(e,...t){return typeof e=="string"||typeof e=="number"||typeof e=="symbol"?n=>dl(n,e,...t):dl(e,...t)}function dl(e,...t){let n=e;for(let s of t){if(n==null)return;n=n[s]}return n}function si(...e){return Xe(by,e)}function by(e,t){let n=[];for(let s=e;s<t;s++)n.push(s);return n}function ky(...e){return Ku(Iy,e)}function Iy(){let e=new Set;return t=>e.has(t)?gr:(e.add(t),{done:!1,hasNext:!0,next:t})}function wy(...e){return Ku(My,e)}function My(e){let t=e,n=new Set;return(s,o,r)=>{let i=t(s,o,r);return n.has(i)?gr:(n.add(i),{done:!1,hasNext:!0,next:s})}}function Ns(...e){return Xe(Object.values,e)}function Ys(...e){return Xe(Sy,e,Ey)}const Sy=(e,t)=>e.length<t.length?e.map((n,s)=>[n,t[s]]):t.map((n,s)=>[e[s],n]),Ey=e=>(t,n)=>({hasNext:!0,next:[t,e[n]],done:n>=e.length-1}),xy=["let","in","if","then","else","case","of","data","record","class","instance","where","infix","infixl","infixr","import"],Cy=["::","=","->","|",".","=>"],Qu="+-*/^%<>=!~&|.$#?:",$y=e=>[...e].every(t=>Qu.includes(t)),Xu=e=>[...e].every(t=>t===","),_u=e=>$y(e)||Xu(e),ed=e=>e>="A"&&e<="Z",Wi=e=>e>="a"&&e<="z",Py=e=>[e.slice(0,-1),e[e.length-1]],Dy=e=>{const t=[],n=[];for(const[s,o]of e)t.push(s),n.push(o);return[t,n]},td=e=>e,Vy=e=>e,cl=e=>t=>t.reduce((n,s)=>e(n,s)<=0?n:s),Gi=(e,t)=>{const n=[];for(let s=0;s<e;s++)n.push(t());return n},Ay=e=>t=>{if(e(t))return t;throw new Error(`Coercion failed, got ${String(t)}`)},Ry=(e,t)=>{const n=e.indexOf(t);return n===-1?[e,""]:[e.slice(0,n),e.slice(n+t.length)]};let Oe=class Ot extends globalThis.Set{static empty=()=>new Ot;static of=t=>new Ot(t);static ofMap=t=>Ot.of(t.keys());static solo=t=>new Ot([t]);static strictOf=t=>{const n=Ot.empty();for(const s of t){if(n.has(s))return me.err(s);n.add(s)}return me.ok(n)};static union=t=>t.reduce((n,s)=>n.union(s),Ot.empty());static intersection=t=>t.reduce((n,s)=>n.intersection(s));static difference=t=>n=>n.difference(t);static disjointUnion=t=>{const n=Ot.empty();for(const s of t)for(const o of s){if(n.has(o))return ve(o);n.add(o)}return X(n)};static addToStrict=t=>n=>t.has(n)?ve(n):(t.add(n),X(t));static toArray=t=>Array.from(t);static map=(t,n)=>{const s=Ot.empty();for(const o of t)s.add(n(o));return s};static filter=t=>n=>{const s=Ot.empty();for(const o of n)t(o)&&s.add(o);return s}},te=class Qt extends globalThis.Map{static empty=()=>new Qt;static of=t=>new Qt(t);static ofDict=t=>Qt.of(Ju(t));static solo=(t,n)=>Qt.of([[t,n]]);static strictOf=t=>{const n=Qt.empty();for(const[s,o]of t){if(n.has(s))return ve([s,n.get(s),o]);n.set(s,o)}return X(n)};static disjointUnion=t=>{const n=Qt.empty();for(const s of t)for(const[o,r]of s){if(n.has(o))return ve([o,n.get(o),r]);n.set(o,r)}return X(n)};static map=t=>n=>Qt.of([...n].map(([s,o])=>[s,t(o,s)]));static forEach=t=>n=>(n.entries().forEach(([s,o])=>t(o,s)),n);static addToStrict=t=>([n,s])=>t.has(n)?ve([n,t.get(n),s]):(t.set(n,s),X(t));static union=t=>U(t,dt.of,dt.join,Qt.of);static keySet=t=>Oe.of(t.keys());static values=t=>t.values();static keyOf=t=>n=>t.has(n)};class sn extends globalThis.Map{create;constructor(t,n){super(n),this.create=t}static empty=t=>new sn(t);static of=(t,n)=>new sn(t,n);static count=t=>{const n=sn.empty(()=>0);for(const s of t)n.set(s,n.get(s)+1);return n};get(t){if(this.has(t))return super.get(t);const n=this.create();return this.set(t,n),n}update(t,n){const s=n(this.get(t));return this.set(t,s),s}}const Ty=e=>{const t={hash:e,of:n=>{const s=te.of(dt.of(n).map(r=>[e(r),r])),o={get size(){return s.size},has(r){return s.has(e(r))},add(r){return s.set(e(r),r),o},delete(r){return s.delete(e(r)),o},toArray(){return Array.from(s.values())},keys(){return s.values()},[Symbol.iterator](){return o.keys()},clone(){return t.of(o)},union(r){const i=o.clone();for(const l of r)i.add(l);return i},intersection(r){const i=t.empty();for(const l of o)r.has(l)&&i.add(l);return i},difference(r){const i=t.empty();for(const l of o)r.has(l)||i.add(l);return i}};return o},empty:()=>t.of([]),solo:n=>t.of([n]),union:n=>n.reduce((s,o)=>s.union(o),t.empty()),intersection:n=>n.reduce((s,o)=>s.intersection(o)),difference:n=>s=>s.difference(n)};return t};(function(e){e.of=t=>globalThis.Iterator.from(t),e.map=t=>n=>n.map(t),e.forEach=t=>n=>(n.forEach(t),n),e.toArray=t=>t.toArray(),e.join=t=>t.flatMap(td),e.groupToMap=t=>n=>te.groupBy(n,t)})(dt||(dt={}));(function(e){e.empty=()=>({}),e.of=t=>Object.fromEntries(t),e.strictOf=t=>{const n={};for(const[s,o]of t){if(s in n)return me.err(s);n[s]=o}return me.ok(n)},e.keys=t=>Object.keys(t),e.map=t=>n=>{const s={};for(const o in n)s[o]=t(n[o],o);return s},e.pickBySet=t=>n=>{const s={};for(const o in n)t.has(o)&&(s[o]=n[o]);return s},e.omitBySet=t=>n=>{const s={};for(const o in n)t.has(o)||(s[o]=n[o]);return s}})(He||(He={}));(function(e){e.empty=()=>{},e.sequence=t=>()=>t.map(n=>n()),e.sequenceV=t=>()=>t.forEach(n=>n())})(Yn||(Yn={}));var dt,He,Yn;(function(e){e.of=(t,n)=>({prec:t,assoc:n}),e.def=()=>e.of(9,"left"),e.show=({assoc:t,prec:n})=>`infix${t==="none"?"":t[0]} ${n}`})(De||(De={}));const Ny=te.ofDict({"<<":De.of(9,"right"),">>":De.of(9,"right"),"^":De.of(8,"right"),"*":De.of(7,"left"),"/":De.of(7,"left"),"%":De.of(7,"left"),"+":De.of(6,"left"),"-":De.of(6,"left"),"++":De.of(5,"right"),":":De.of(5,"right"),"==":De.of(4,"none"),"!=":De.of(4,"none"),"<":De.of(4,"none"),"<=":De.of(4,"none"),">":De.of(4,"none"),">=":De.of(4,"none"),"&&":De.of(3,"right"),"||":De.of(2,"right"),"|>":De.of(1,"left"),$:De.of(0,"right")});var De;const us=(e,t)=>{const n=[...e].map(s=>{if(s===t||s==="\\")return"\\"+s;if(s===`
`)return"\\n";if(s==="\r")return"\\r";if(s==="	")return"\\t";const o=s.codePointAt(0);return o<32||o>126?`\\u${o.toString(16).padStart(4,"0")}`:s}).join("");return t+n+t},nd=(e,t,n)=>{const s=o=>r=>{const i=t(r,s(r));return n(r,o)?`(${i})`:i};return o=>s(null)(e(o))},Hn=e=>{for(const t of Reflect.ownKeys(e.prototype)){if(t==="constructor")continue;const n=Reflect.getOwnPropertyDescriptor(e.prototype,t);if(n&&typeof n.value=="function"){let s=n?.value;Object.defineProperty(e.prototype,t,{configurable:!0,get(){const o=s.bind(this);return Object.defineProperty(this,t,{configurable:!0,get(){return o},set(r){s=r,delete this[t]}}),o},set(o){s=o}})}}};var sd;const pa=class pa{modId;constructor(t){this.modId=t}nextId=1;next(){return`${this.modId}:${this.nextId++}`}};Hn(pa);let oi=pa;(function(e){e.node=t=>({type:"nodes",astIds:[t]}),e.nodes=t=>({type:"nodes",astIds:t}),e.asNodes=t=>U(t,Ay(n=>n.type==="nodes"),gt("astIds"))})(qe||(qe={}));sd=Symbol.iterator;const ya=class ya{sis;symInfoMap;constructor(t,n){this.sis=t,this.symInfoMap=n}byId=te.empty();byType=sn.empty(te.empty);register(t){const{id:n,type:s}=t,o=this.byId.get(n)??{};if(o[s])return ve({type:"ConflictingSym",id:n,existing:o[s]});const r=t.symId??this.sis.next(),i={...t,symId:r};return o[s]=i,this.symInfoMap.set(r,t),this.byId.set(n,o),this.byType.get(s).set(n,i),X(r)}get(t){return this.byId.get(t)??null}entries(){return this.byId.entries()}[sd](){return this.entries()}values(){return this.byId.values()}};Hn(ya);let Wo=ya;(function(e){e.ofIdNodeMap=te.map(t=>qe.node(t.astId))})(ri||(ri={}));var qe,ri;const od=e=>{const t=n=>{const s={...n};return s.fork=o=>t({...s,...o}),Object.assign(s,e(s)),s};return t},rd={num:{},unit:{},char:{},str:{},var:{id:"node"},applyMulti:{func:"node",args:"node[]"},apply:{func:"node",arg:"node"},infix:{args:"node[]",ops:"node[]"},sectionL:{arg:"node",op:"node"},sectionR:{arg:"node",op:"node"},roll:{times:"node?",sides:"node"},paren:{expr:"node"},tuple:{elems:"node[]"},list:{elems:"node[]"},recordBindingField:{key:"node",val:"node"},recordPunningField:{key:"node"},record:{con:"node",fields:"node[]"},recordUpdatePunningMatchingField:{key:"node",body:"node"},recordUpdatePipeField:{key:"node",func:"node"},recordUpdateMatchingField:{key:"node",pat:"node",body:"node"},recordUpdate:{con:"node",fields:"node[]"},varRef:{id:"node"},wildcardPat:{},numPat:{},unitPat:{},dataPat:{con:"node",args:"node[]"},infixPat:{ops:"node[]",args:"node[]"},varPat:{id:"node"},tuplePat:{elems:"node[]"},listPat:{elems:"node[]"},recordPatRebindingField:{key:"node",pat:"node"},recordPatPunningField:{key:"node"},recordPat:{con:"node",fields:"node[]"},let:{bindingHost:"node",body:"node"},cond:{cond:"node",yes:"node",no:"node"},caseBranch:{pat:"node",body:"node"},case:{scrutinee:"node",branches:"node[]"},ann:{expr:"node",ann:"node"},lambdaMulti:{params:"node[]",body:"node"},lambdaCase:{branches:"node[]"},lambda:{param:"node",body:"node"},id:{},type:{},typeScheme:{},binding:{pat:"node",body:"node"},equationApplyFlattenHead:{func:"node",params:"node[]"},equationApplyHead:{func:"node",params:"node[]"},equationInfixHead:{lhs:"node",op:"node",rhs:"node"},equation:{head:"node",body:"node"},sigDecl:{sig:"node",ids:"node[]"},fixityDecl:{ids:"node[]"},bindingHost:{sigDecls:"node[]",fixityDecls:"node[]",bindings:"node[]"},dataApplyCon:{func:"node",params:"node[]"},dataInfixCon:{lhs:"node",op:"node",rhs:"node"},dataDef:{id:"node",params:"node[]",cons:"node[]"},recordDefField:{key:"node",type:"node"},recordDef:{id:"node",params:"node[]",fields:"node[]"},classDef:{id:"node",param:"node",bindingHost:"node"},instanceDef:{classId:"node",arg:"node",bindingHost:"node"},importItem:{id:"node",qid:"node?"},import:{modId:"node",items:"node[]?",qid:"node?"},mod:{imports:"node[]",dataDefs:"node[]",recordDefs:"node[]",classDefs:"node[]",instanceDefs:"node[]",bindingHost:"node"}};(function(e){e.is=(t,n)=>n.includes(t.ty),e.show=()=>{throw new Error("showNode not implemented yet")},e.checkParen=(t,n)=>!!n&&(n.ty==="apply"&&(e.is(t,["lambda","lambdaMulti","lambdaCase"])||e.is(t,["apply","applyMulti"])&&t===n.arg)||n.ty==="applyMulti"&&e.is(t,["lambda","lambdaMulti","lambdaCase","applyMulti"])||t.ty==="equationInfixHead"&&n.ty==="equationApplyHead"||t.ty==="dataPat"&&t.args.length>0||t.ty==="infixPat")||t.ty==="var"&&t.id.style==="sym"&&(!n||!e.is(n,["infix","sectionL","sectionR"]))||t.ty==="varPat"&&t.id.style==="sym"||t.ty==="varRef"&&t.id.style==="sym"&&(!n||!e.is(n,["infixPat","equationInfixHead"]))||t.ty==="id"&&t.style==="sym"&&(!n||!e.is(n,["var","varPat","varRef","fixityDecl","dataInfixCon"]))||t.ty==="sectionL"||t.ty==="sectionR"})(Go||(Go={}));var Go;function Ki(e,t,n){return od(s=>({...e(s),walk:o=>fl(o,s,t,n,!1),walkDefault:o=>fl(o,s,t,n,!0)}))}function fl(e,t,n,s,o){const{ty:r}=e;if(s?.(e),!o){const l=r in n?n[r]:null;if(l)return l(e,t)}const i=rd[r];for(const[l,d]of Object.entries(i)){const a=e[l];d==="node"?t.walk(a):d==="node?"?a&&t.walk(a):(d==="node[]"||d==="node[]?"&&a)&&a.forEach(t.walk)}}class Oy{nextId=1;next(){return this.nextId++}}const Fy=e=>{const t=new Oy,n=te.empty();return Ki(()=>({}),{},o=>{o.astId=t.next(),n.set(o.astId,o)})({}).walk(e),{node:e,ais:t,nodeMap:n}};function Ji(e,t){return od(n=>({...e(n),transform:s=>pl(s,n,t,!1),transformDefault:s=>pl(s,n,t,!0)}))}function pl(e,t,n,s){const{ty:o}=e;if(!s){const l=o in n?n[o]:null;if(l)return l(e,t)}const r=rd[o],i={...e};for(const[l,d]of Object.entries(r)){const a=e[l];d==="node"?i[l]=t.transform(a):d==="node?"?i[l]=a?t.transform(a):null:d==="node[]"?i[l]=a.map(t.transform):d==="node[]?"&&(i[l]=a?a.map(t.transform):null)}return i}(function(e){e.of=(t,n)=>s=>{const o=t.next(),r={...s,astId:o,range:Gs.empty()};return n.set(o,r),r},e.fake=()=>t=>({...t,astId:0,range:Gs.empty()})})(cs||(cs={}));const ma=class ma{make;constructor(t){this.make=t}makeId(t){return this.make({ty:"id",id:t,style:U(t[0]==="!"?t.slice(1):t,n=>ed(n[0])?"big":Wi(n[0])||n[0]==="_"?"small":_u(n)?"sym":"other")})}makeTupleIdN(t){return this.make({ty:"id",id:",".repeat(t-1),style:"sym"})}makeApplyMulti(t){return t.reduce((n,s)=>this.make({ty:"apply",func:n,arg:s}))}makeAutoTuple(t,n){const{length:s}=t;if(s===0)return this.make({ty:"unit"});if(s===1)return t[0];const o=this.makeTupleIdN(s);return this.makeApplyMulti([n?this.makeVar(o,`Builtin:${o.id}`):this.makeVar(o),...t])}makeLambdaMulti(t,n){return t.reduceRight((s,o)=>this.make({ty:"lambda",param:o,body:s}),n)}makeAutoTuplePat(t,n){const{length:s}=t;if(s===0)return this.make({ty:"unitPat"});if(s===1)return t[0];const o=this.makeTupleIdN(s);return this.make({ty:"dataPat",con:n?this.makeVarRef(o,`Builtin:${o.id}`):this.makeVarRef(o),args:t})}liftId(t){return typeof t=="string"?this.makeId(t):t}makeVar(t,n){return this.make({ty:"var",id:this.liftId(t),symId:n})}makeVarPat(t,n){return this.make({ty:"varPat",id:this.liftId(t),symId:n})}makeVarRef(t,n){return this.make({ty:"varRef",id:this.liftId(t),symId:n})}};Hn(ma);let ds=ma;const Ae=new ds(cs.fake());var cs;(function(e){e.actual=(t,n)=>({...t,source:{type:"actual",expr:n}}),e.actualFunc=(t,n)=>({...t,source:{type:"actual.func",funcNode:n}}),e.actualPat=(t,n)=>({...t,source:{type:"actual.pat",pat:n}}),e.actualRecord=(t,n)=>({...t,source:{type:"actual.record",recordExpr:n}}),e.inferFuncRet=(t,n)=>({...t,source:{type:"infer.func.ret",funcNode:n}}),e.inferBindingVar=(t,n,s)=>({...t,source:{type:"infer.binding.var",varPat:n,bindingNode:s}}),e.inferBindingVal=(t,n,s)=>({...t,source:{type:"infer.binding.val",valExpr:n,bindingNode:s}}),e.inferCase=(t,n)=>({...t,source:{type:"infer.case",caseExpr:n}}),e.inferLambdaParam=(t,n)=>({...t,source:{type:"infer.lambda.param",lambdaExpr:n}}),e.expectCond=(t,n)=>({...t,source:{type:"expect.cond",condExpr:n}}),e.expectRecordField=(t,n,s)=>({...t,source:{type:"expect.record.field",fieldKey:n,recordDef:s}}),e.expectClassMember=(t,n)=>({...t,source:{type:"expect.class.member",sigDecl:n}}),e.constr=(t,n)=>({...t,source:{type:"constr",constr:n}}),e.instance=(t,n)=>({...t,source:{type:"instance",instance:n}}),e.annAnn=(t,n)=>({...t,source:{type:"ann.ann",annExpr:n}}),e.annDecl=(t,n,s)=>({...t,source:{type:"ann.decl",sigDecl:n,varId:s}}),e.elimFuncParam=t=>({...t.param,source:{type:"elim.func.param",from:t}}),e.elimFuncRet=t=>({...t.ret,source:{type:"elim.func.ret",from:t}}),e.elimApplyFunc=t=>({...t.func,source:{type:"elim.apply.func",from:t}}),e.elimApplyArg=t=>({...t.arg,source:{type:"elim.apply.arg",from:t}}),e.mapType=t=>n=>({...t(n),source:n.source}),e.isSourced=t=>"source"in t})(de||(de={}));var de;(function(e){e.compare=([t,n],s)=>t.ty===s&&n.ty===s?{type:"both",pair:[t,n]}:t.ty===s?{type:"one",pair:[t,n]}:n.ty===s?{type:"one",pair:[n,t]}:{type:"none",pair:[t,n]},e.diff=([t,n])=>t.ty===n.ty?{type:"same",ty:t.ty,pair:[t,n]}:{type:"diff"}})(Fn||(Fn={}));var Fn;const G=e=>({ty:"con",id:e}),xn=(e,t)=>({ty:"apply",func:e,arg:t}),Ln=(...[e,...t])=>t.length?U(Py(t),([n,s])=>xn(Ln(e,...n),s)):e,Fe=e=>({ty:"var",id:e,rigid:!1}),Yi=(e,t=e)=>({ty:"var",id:e,rigid:!0,customId:t}),nn=Ty(e=>e.id),fs=(e,t)=>({ty:"func",param:e,ret:t}),mt=(...e)=>{const[t,...n]=e;return n.length?fs(t,mt(...n)):t},id=(e,t,n)=>({ty:"forall",boundVarSet:e,constrs:t,type:n});(function(e){e.show=({boundVarSet:t,constrs:n,type:s})=>(t.size?`${[...t].map(gt("id")).join(" ")}. `:"")+(n.length?`${Ko.show(n)} => `:"")+ge.show(s)})(ii||(ii={}));const Zi=e=>e.ty==="apply"?[...Zi(e.func),e.arg]:[e],ad=e=>e.ret.ty==="func"?[e.param,...ad(e.ret)]:[e.param,e.ret];(function(e){e.is=(s,o)=>o.includes(s.ty);function t(s,o){return n(s,o),s}e.coerce=t;function n(s,o){if(!o.includes(s.ty))throw new TypeError(`Expected type of ty ${o.join(" | ")}, got ${e.show(s)}.`)}e.assert=n,e.rigidify=s=>Be(s).with({ty:"var"},o=>Yi(o.id)).with({ty:"con"},td).with({ty:"func"},o=>fs(e.rigidify(o.param),e.rigidify(o.ret))).with({ty:"apply"},o=>xn(e.rigidify(o.func),e.rigidify(o.arg))).with({ty:"forall"},o=>id(o.boundVarSet,o.constrs,e.rigidify(o.type))).exhaustive(),e.collectTypeVars=s=>Be(s).with({ty:"var"},nn.solo).with({ty:"con"},nn.empty).with({ty:"func"},({param:o,ret:r})=>nn.union([e.collectTypeVars(o),e.collectTypeVars(r)])).with({ty:"apply"},({func:o,arg:r})=>nn.union([e.collectTypeVars(o),e.collectTypeVars(r)])).with({ty:"forall"},({boundVarSet:o,type:r})=>e.collectTypeVars(r).difference(o)).exhaustive(),e.generalize=(s,o=[],r=Oe.empty())=>{const i=e.collectTypeVars(s).difference(r);return{boundVarSet:i,constrs:o.filter(l=>l.arg.ty==="var"&&i.has(l.arg)),type:s}},e.describe=s=>Be(s).with({ty:"var"},o=>o).with({ty:"con"},o=>o.id===""?{ty:"tuple",args:[]}:o).with({ty:"func"},o=>({ty:"func",args:ad(o).map(e.describe)})).with({ty:"apply"},o=>{const r=Zi(o),[i,...l]=r;return i.ty==="con"&&i.id.includes(",")?{ty:"tuple",args:l.map(e.describe)}:i.ty==="con"&&i.id==="[]"?{ty:"list",arg:e.describe(l[0])}:{ty:"apply",args:r.map(e.describe)}}).with({ty:"forall"},o=>({ty:"forall",boundVarSet:o.boundVarSet,constrs:o.constrs,type:e.describe(o.type)})).exhaustive(),e.checkParen=(s,o)=>o!==null&&(s.ty==="func"&&o.ty==="func"||s.ty==="func"&&o.ty==="apply"||s.ty==="apply"&&o.ty!=="func"||s.ty==="con"&&_u(s.id)),e.show=nd(e.describe,(s,o)=>Be(s).with({ty:"dummy"},({inner:r})=>o(r)).with({ty:"con"},r=>r.id).with({ty:"var"},r=>`${r.rigid?"^":""}${r.id}`).with({ty:"func"},({args:r})=>r.map(o).join(" -> ")).with({ty:"apply"},({args:r})=>`${r.map(o).join(" ")}`).with({ty:"tuple"},({args:r})=>`(${r.map(o).join(", ")})`).with({ty:"list"},({arg:r})=>`[${o(r)}]`).with({ty:"forall"},({boundVarSet:r,type:i})=>`${[...r].map(gt("id")).join(" ")}. ${o(i)}`).exhaustive(),e.checkParen),e.occurs=(s,o)=>Be(o).with({ty:"con"},()=>!1).with({ty:"func"},({param:r,ret:i})=>e.occurs(s,r)||e.occurs(s,i)).with({ty:"var"},({id:r})=>r===s).with({ty:"apply"},({func:r,arg:i})=>e.occurs(s,r)||e.occurs(s,i)).with({ty:"forall"},({boundVarSet:r,type:i})=>r.has(Fe(s))?!1:e.occurs(s,i)).exhaustive(),e.equal=(s,o)=>Be(Fn.diff([s,o])).with({type:"diff"},()=>!1).with({ty:"con"},{ty:"var"},({pair:[r,i]})=>r.id===i.id).with({ty:"func"},({pair:[r,i]})=>e.equal(r.param,i.param)&&e.equal(r.ret,i.ret)).with({ty:"apply"},({pair:[r,i]})=>e.equal(r.func,i.func)&&e.equal(r.arg,i.arg)).with({ty:"forall"},({pair:[r,i]})=>r.boundVarSet.size===i.boundVarSet.size&&e.equal(r.type,i.type)).exhaustive(),e.unify=(s,o)=>Be(Fn.compare([s,o],"var")).with({type:"both"},({pair:[r,i]})=>r.id===i.id?X({}):r.rigid&&i.rigid?ve({type:"RigidVar",lhs:r,rhs:i,var:r.customId}):X(r.rigid?{[i.id]:r}:{[r.id]:i})).with({type:"one"},({pair:[r,i]})=>e.occurs(r.id,i)?ve({type:"Recursion",lhs:r,rhs:i}):r.rigid?ve({type:"RigidVar",lhs:r,rhs:i,var:r.customId}):X({[r.id]:i})).with({type:"none"},({pair:r})=>Be(Fn.diff(r)).with({type:"diff"},()=>ve({type:"DiffShape",lhs:s,rhs:o})).with({ty:"con"},({pair:[i,l]})=>i.id===l.id?X({}):ve({type:"DiffCon",lhs:i,rhs:l})).with({ty:"func"},({pair:[i,l]})=>e.unify(de.elimFuncParam(i),de.elimFuncParam(l)).bind(d=>e.unify(J.applySourced(d)(de.elimFuncRet(i)),J.applySourced(d)(de.elimFuncRet(l))).map(a=>J.compose([a,d])))).with({ty:"apply"},({pair:[i,l]})=>e.unify(de.elimApplyFunc(i),de.elimApplyFunc(l)).bind(d=>e.unify(J.applySourced(d)(de.elimApplyArg(i)),J.applySourced(d)(de.elimApplyArg(l))).map(a=>J.compose([a,d])))).with({ty:"forall"},()=>{throw Error("Cannot unify forall types.")}).exhaustive()).exhaustive(),e.isGround=s=>e.collectTypeVars(s).size===0})(ge||(ge={}));(function(e){e.show=({classId:t,arg:n})=>ge.show(xn(G(t),n)),e.entail1=(t,n)=>t.classId!==n.classId?!1:ge.equal(t.arg,n.arg),e.entail=(t,n)=>t.some(s=>e.entail1(s,n))})(Zs||(Zs={}));(function(e){e.empty=()=>[],e.show=t=>{const n=t.map(Zs.show).join(", ");return t.length===1?n:`(${n})`}})(Ko||(Ko={}));(function(e){e.show=({type:t,constrs:n})=>`${ge.show(t)} | ${Ko.show(n)}`})(yl||(yl={}));(function(e){e.of=t=>n=>({...n,sources:t}),e.unionSources=(t,n)=>ky([...t,...n]),e.union1=(t,n)=>{const s=t.find(o=>Zs.entail1(o,n));return s?(s.sources=e.unionSources(s.sources,n.sources),t):t.concat([n])},e.union=(t,n)=>n.reduce(e.union1,t)})(Qs||(Qs={}));(function(e){e.instance=(t,n)=>({type:"instance",instanceId:t,symId:n}),e.param=(t,n)=>({type:"param",ix:t,argType:n})})(Jo||(Jo={}));(function(e){e.pure=t=>({boundVarSet:nn.empty(),constrs:[],type:t}),e.free=t=>n=>({...n,boundVarSet:n.boundVarSet.clone().delete(t)}),e.mapType=t=>n=>({...n,type:t(n)}),e.unionConstrs=t=>n=>({...n,constrs:[...n.constrs,...t]}),e.show=ii.show,e.prettify=t=>{const n=t.boundVarSet.size,s=[...t.boundVarSet],o=n<=3?[..."abc"]:si(0,n).map(d=>`t${d+1}`);if(s.every(d=>d.rigid))return t;const i=J.empty(),l=nn.empty();return s.forEach((d,a)=>{const u=Yi(d.id,o[a]);i[d.id]=u,l.add(u)}),{boundVarSet:l,constrs:t.constrs.map(J.applyConstr(i)),type:J.apply(i)(t.type)}},e.collectTypeVars=t=>ge.collectTypeVars(t.type).difference(t.boundVarSet)})(on||(on={}));(function(e){e.empty=()=>({})})(ml||(ml={}));(function(e){e.empty=()=>({})})(Yo||(Yo={}));(function(e){e.empty=()=>({})})(Zo||(Zo={}));(function(e){e.empty=()=>({}),e.applyBound=(t,n)=>{const s=o=>Be(o).with({ty:"con"},()=>o).with({ty:"var"},r=>n.has(r)?o:t[r.id]??o).with({ty:"func"},r=>fs(s(r.param),s(r.ret))).with({ty:"apply"},r=>xn(s(r.func),s(r.arg))).with({ty:"forall"},r=>id(r.boundVarSet,r.constrs,e.applyBound(t,nn.union([n,r.boundVarSet]))(r.type))).exhaustive();return s},e.apply=t=>e.applyBound(t,nn.empty()),e.applySourced=t=>de.mapType(e.apply(t)),e.applyScheme=t=>({boundVarSet:n,type:s,constrs:o})=>({type:e.applyBound(t,n)(s),boundVarSet:n,constrs:e.applyConstrs(t)(o)}),e.applyDict=t=>Js(e.apply(t)),e.applyEnv=t=>Js(e.applyScheme(t)),e.applyConstr=t=>({classId:n,arg:s})=>({classId:n,arg:e.apply(t)(s)}),e.applyConstrs=t=>n=>n.map(e.applyConstr(t)),e.applyConstrSourced=t=>({classId:n,arg:s,sources:o})=>({classId:n,arg:e.apply(t)(s),sources:o}),e.applyInferState=t=>n=>({subst:e.compose2(t,n.subst),constrs:n.constrs.map(e.applyConstrSourced(t))}),e.applyInfer=t=>n=>({type:e.applySourced(t)(n.type),...e.applyInferState(t)(n)}),e.compose2=(t,n)=>({...t,...e.applyDict(t)(n)}),e.compose=t=>t.reduceRight((n,s)=>e.compose2(s,n),e.empty())})(J||(J={}));var ii,ge,Zs,Ko,yl,Qs,Jo,on,ml,Yo,Zo,J;const bn=()=>({ty:"type"}),By=()=>({ty:"constr"}),Qo=(e,t)=>({ty:"func",param:e,ret:t}),Qi=(...e)=>{const[t,...n]=e;return n.length?Qo(t,Qi(...n)):t},Yt=e=>Qi(...Gi(e,bn)),Ly=e=>({ty:"var",id:e});(function(e){e.show=t=>Be(t).with({ty:"type"},()=>"*").with({ty:"constr"},()=>"constr").with({ty:"func"},({param:n,ret:s})=>`${n.ty==="func"?`(${e.show(n)})`:e.show(n)} -> ${e.show(s)}`).with({ty:"var"},({id:n})=>n).exhaustive(),e.checkParen=(t,n)=>n!==null&&t.ty==="func"&&n.ty==="func"&&n.param===t,e.collectKindVars=t=>Be(t).with({ty:"var"},({id:n})=>Oe.of([n])).with({ty:"type"},{ty:"constr"},()=>Oe.empty()).with({ty:"func"},({param:n,ret:s})=>Oe.union([e.collectKindVars(n),e.collectKindVars(s)])).exhaustive(),e.occurs=(t,n)=>Be(n).with({ty:"type"},{ty:"constr"},()=>!1).with({ty:"var"},({id:s})=>s===t).with({ty:"func"},({param:s,ret:o})=>e.occurs(t,s)||e.occurs(t,o)).exhaustive(),e.monomorphize=t=>{const n=U(t,e.collectKindVars,Oe.toArray,Me(s=>({[s]:bn()})),hy);return{kind:Re.apply(n)(t),subst:n}},(function(t){t.wrapErr=n=>({type:"UnifyKindErr",err:n})})(e.Unify||(e.Unify={})),e.unify=(t,n)=>{const s=[t,n];return Be(Fn.compare(s,"var")).with({type:"both"},({pair:[o,r]})=>o.id===r.id?X({}):X({[r.id]:o})).with({type:"one"},({pair:[o,r]})=>e.occurs(o.id,r)?ve({type:"Recursion",lhs:o,rhs:r}):X({[o.id]:r})).with({type:"none"},({pair:o})=>Be(Fn.diff(o)).with({type:"diff"},()=>ve({type:"DiffShape",lhs:t,rhs:n})).with({ty:"type"},{ty:"constr"},()=>X({})).with({ty:"func"},({pair:[r,i]})=>e.unify(r.param,i.param).bind(l=>e.unify(Re.apply(l)(r.ret),Re.apply(l)(i.ret)).map(d=>Re.compose([d,l])))).exhaustive()).exhaustive()}})(at||(at={}));(function(e){e.empty=()=>({})})(ai||(ai={}));(function(e){e.empty=()=>({}),e.apply=t=>n=>Be(n).with({ty:"type"},()=>n).with({ty:"constr"},()=>n).with({ty:"var"},({id:s})=>t[s]??n).with({ty:"func"},s=>Qo(e.apply(t)(s.param),e.apply(t)(s.ret))).exhaustive(),e.applyDict=t=>Js(e.apply(t)),e.compose2=(t,n)=>({...t,...e.applyDict(t)(n)}),e.compose=t=>t.reduceRight((n,s)=>e.compose2(s,n),e.empty())})(Re||(Re={}));var at,ai,Re;const ld=e=>({ty:"num",val:e}),hl=e=>({ty:"char",val:e}),Xo=(e,t)=>({ty:"data",con:e,args:t}),Hy=(e,t)=>({ty:"record",con:e,fields:t}),Xi=e=>({ty:"func",func:e}),Uy=(e,t)=>{const n=(s,o)=>s===e?t(...o):Xi(r=>n(s+1,[...o,r]));return n(0,[])},jy=e=>e.reduceRight((t,n)=>Xo("Builtin::",[n,t]),Xo("Builtin:[]",[])),ud=()=>Xo("Builtin:",[]);(function(e){e.is=(n,s)=>s.includes(n.ty);function t(n,s){if(!s.includes(n.ty))throw new Error(`Expected value of type ${s.join(" | ")}, but got ${n.ty}`)}e.assert=t,e.coerce=(n,s)=>(e.assert(n,s),n)})(tn||(tn={}));const dd=e=>e.con==="Builtin:[]"?[]:U(e.args,([t,n])=>[t,...dd(tn.coerce(n,["data"]))]);var tn;(function(e){e.describe=({type:t,value:n})=>Be(n).with({ty:"num"},{ty:"char"},{ty:"func"},{ty:"record"},s=>s).with({ty:"data"},s=>{const[o,r]=Ry(s.con,":");if(o!=="Builtin")return s;if(r==="[]"||r===":"){const{arg:i}=ge.coerce(t,["apply"]),l=dd(s);return ge.is(i,["con"])&&i.id==="Builtin:Char"?{ty:"str",val:l.map(d=>tn.coerce(d,["char"]).val).join("")}:{ty:"list",elems:l.map(d=>e.describe({type:i,value:d}))}}if(Xu(r)){const i=Zi(t);return{ty:"tuple",elems:Ys(s.args,i).map(([l,d])=>e.describe({type:d,value:l}))}}return s}).exhaustive(),e.show=nd(e.describe,(t,n)=>Be(t).with({ty:"num"},({val:s})=>String(s)).with({ty:"char"},({val:s})=>us(s,"'")).with({ty:"func"},()=>"Func").with({ty:"data"},({con:s,args:o})=>[s,...o.map(n)].join(" ")).with({ty:"record"},({con:s,fields:o})=>`${s} { ${o.map(n).join(", ")} }`).with({ty:"str"},({val:s})=>us(s,'"')).with({ty:"list"},({elems:s})=>`[${s.map(n).join(", ")}]`).with({ty:"tuple"},({elems:s})=>`(${s.map(n).join(", ")})`).exhaustive(),()=>!1)})(li||(li={}));var li;const _i=e=>{let{index:t}=e;for(;t>=0&&e.input[t]!==`
`;)t--;return e.index-t-1},br=f.join(f.many(f.notEmpty(f.join(f.seq([f.join(f.many(f.char(" "))),f.alt([f.join(f.seq([f.str("--"),f.join(f.many(f.noneOf(`
`)))])),f.pure("")]),f.join(f.many(f.char(`
`)))]))))),qy=(e,t=br)=>f.bind(t,()=>n=>e({...n,layout:[_i(n),...n.layout]})),ui=(e,t=br)=>f.bindValState(t,({state:n,val:s})=>s.length&&n.rest&&_i(n)<=n.layout[0]?f.fail(null):e),zy=(e,t=br)=>f.bindValState(t,({state:n,val:s})=>s.length&&_i(n)<n.layout[0]?f.fail(null):e),Wy=e=>f.mapState(e,t=>({...t,layout:t.layout.slice(1)})),kr=(e,t=br)=>ui(f.map(f.seq([ui(qy(e),t),Wy(f.many(zy(e)))]),([n,s])=>[n,...s])),di=ui(f.pure(null)),he=f.right(di),re=f.delimitedBy(di,di),Cn=e=>f.parens(re(e)),cd=e=>f.brackets(re(e)),ro=e=>f.braces(re(e)),rt=e=>f.notFollowedBy(f.str(e),f.regex(/[A-Za-z0-9_]/)),z=e=>t=>e(t).map(({val:n,state:s})=>({val:{...n,astId:0,range:{start:t.index,end:s.index}},state:s})),fd=z(f.map(f.decimal,e=>({ty:"num",val:e}))),pd=e=>f.alt([f.map(f.str("\\n"),()=>`
`),f.map(f.str("\\r"),()=>"\r"),f.map(f.str("\\t"),()=>"	"),f.map(f.str("\\"+e),()=>e),f.map(f.str("\\\\"),()=>"\\"),f.map(f.right(f.str("\\u"))(f.regex(/[0-9a-fA-F]{4}/)),t=>String.fromCodePoint(parseInt(t,16))),f.noneOf(`
\\`+e)]),Gy=z(f.map(f.delimitedBy(f.char("'"),f.char("'"))(pd("'")),e=>({ty:"char",val:e}))),Ky=z(f.map(f.delimitedBy(f.char('"'),f.char('"'))(f.join(f.many(pd('"')))),e=>({ty:"str",val:e}))),yd=f.bind(f.regex(/[A-Za-z][A-Za-z\d']*|_[A-Za-z\d']+/),e=>f.result(xy.includes(e)?ve(gs("IsReservedWord",{word:e})):X(e))),md=f.guard(yd,e=>ed(e[0])),hd=f.guard(yd,e=>Wi(e[0])||e[0]==="_"),ea=f.bind(f.join(f.some(f.oneOf(Qu))),e=>f.result(Cy.includes(e)?ve(gs("IsReservedWord",{word:e})):X(e))),Jy=f.alt([ea,f.join(f.some(f.char(",")))]),io=(e,t)=>z(f.map(e,n=>({ty:"id",id:n,style:t}))),Gt=io(md,"big"),Xs=io(hd,"small"),ao=io(ea,"sym"),ta=io(f.guard(ea,e=>e.startsWith(":")&&e.endsWith(":")),"sym"),Yy=io(Jy,"sym"),Un=f.alt([Xs,Cn(f.alt([ao,Xs]))]),na=f.alt([Gt,Cn(f.alt([ta,Gt]))]),gl=f.alt([Un,na]),Ir=e=>z(f.map(e,t=>({ty:"var",id:t}))),Zy=Ir(ao),sa=Ir(Yy),Qy=Ir(Xs),Xy=Ir(Gt),gd=f.alt([Qy,Xy]),_y=e=>z(f.map(e,t=>({ty:"varPat",id:t}))),em=_y(ao),wr=e=>z(f.map(e,t=>({ty:"varRef",id:t}))),vl=wr(Xs),ps=wr(Gt),vd=wr(ao),bd=wr(ta),tm=f.alt([vl,Cn(f.alt([vd,vl]))]),nm=f.alt([ps,Cn(f.alt([bd,ps]))]),sm=f.lazy(()=>z(f.bind(f.sep2(ct,re(f.char(","))),e=>f.result(e.length>4?ve(gs("TooLargeTuple",{size:e.length})):X({ty:"tuple",elems:e}))))),om=z(f.pure({ty:"unit"})),rm=f.lazy(()=>z(f.map(ct,e=>({ty:"paren",expr:e})))),kd=f.lazy(()=>z(Cn(f.alt([sm,hm,gm,sa,rm,om])))),im=f.lazy(()=>z(f.map(cd(f.sep0(ct,re(f.char(",")))),e=>({ty:"list",elems:e})))),am=f.lazy(()=>z(f.map(f.seq([Un,f.right(re(f.char("=")))(ct)]),([e,t])=>({ty:"recordBindingField",key:e,val:t})))),lm=f.lazy(()=>z(f.map(Un,e=>({ty:"recordPunningField",key:e})))),um=f.alt([am,lm]),dm=f.lazy(()=>z(f.map(f.seq([ps,he(ro(f.sep0(um,re(f.char(",")))))]),([e,t])=>({ty:"record",con:e,fields:t})))),cm=f.lazy(()=>z(f.map(f.seq([Un,f.alt([f.map(f.seq([f.opt(f.right(re(f.char("@")))(un)),f.right(re(f.str("->")))(ct)]),([e,t])=>e?{ty:"recordUpdateMatchingField",pat:e,body:t}:{ty:"recordUpdatePunningMatchingField",body:t}),f.map(f.right(re(f.str("|>")))(ct),e=>({ty:"recordUpdatePipeField",func:e}))])]),([e,t])=>({...t,key:e})))),fm=f.lazy(()=>z(f.map(f.seq([ps,he(ro(f.sep0(cm,re(f.char(",")))))]),([e,t])=>({ty:"recordUpdate",con:e,fields:t})))),ci=f.lazy(()=>f.alt([vm,Mm,Nm,Fm,Om,kd,im,dm,fm,fd,gd,Gy,Ky])),pm=z(f.map(f.seq([f.opt(ci),f.char("@"),ci]),([e,,t])=>({ty:"roll",times:e,sides:t}))),Id=f.alt([pm,ci]),ym=z(f.lazy(()=>f.map(f.seq([f.alt([gd,kd]),f.some(he(Id))]),([e,t])=>({ty:"applyMulti",func:e,args:t})))),fi=f.lazy(()=>f.alt([ym,Id])),mm=z(f.map(f.seq([fi,f.some(f.seq([re(Zy),fi]))]),([e,t])=>U(t.reduce(({ops:n,args:s},[o,r])=>({ops:[...n,o],args:[...s,r]}),{ops:[],args:[e]}),({ops:n,args:s})=>({ty:"infix",ops:n,args:s})))),oa=f.lazy(()=>f.alt([mm,fi])),hm=z(f.map(f.seq([oa,he(sa)]),([e,t])=>({ty:"sectionL",op:t,arg:e}))),gm=z(f.map(f.seq([sa,he(oa)]),([e,t])=>({ty:"sectionR",op:e,arg:t}))),vm=f.lazy(()=>z(f.map(f.seq([rt("if"),he(ct),he(rt("then")),he(ct),he(rt("else")),he(ct)]),([,e,,t,,n])=>({ty:"cond",cond:e,yes:t,no:n})))),wd=f.lazy(()=>z(f.map(f.seq([un,re(f.char("=")),ct]),([e,,t])=>({ty:"binding",pat:e,body:t})))),bm=f.lazy(()=>z(f.map(f.seq([f.alt([tm,Cn(Md)]),f.some(he(Mr))]),([e,t])=>({ty:"equationApplyHead",func:e,params:t})))),km=f.lazy(()=>z(f.map(f.seq([un,re(vd),un]),([e,t,n])=>({ty:"equationInfixHead",lhs:e,op:t,rhs:n})))),Md=f.alt([bm,km]),Sd=z(f.lazy(()=>f.map(f.seq([Md,re(f.char("=")),ct]),([e,,t])=>({ty:"equation",head:e,body:t})))),ra=e=>f.lazy(()=>z(f.map(kr(f.alt([Vd,Ad,wd,Sd])),t=>U(t,zi("ty"),({sigDecl:n=[],fixityDecl:s=[],equation:o=[],binding:r=[]})=>({ty:"bindingHost",role:e,sigDecls:n,fixityDecls:s,bindings:[...o,...r]}))))),Im=f.lazy(()=>z(f.map(f.seq([rt("class"),he(Gt),he(Mn(lo)),he(rt("where")),ra("class")]),([,e,t,,n])=>({ty:"classDef",id:e,param:t,bindingHost:n})))),wm=z(f.lazy(()=>f.map(f.seq([rt("instance"),he(Gt),he(Mn(Et)),he(rt("where")),ra("instance")]),([,e,t,,n])=>({ty:"instanceDef",classId:e,arg:t,bindingHost:n})))),Mm=f.lazy(()=>z(f.map(f.seq([rt("let"),ra("normal"),re(rt("in")),ct]),([,e,,t])=>({ty:"let",bindingHost:e,body:t})))),Sm=z(f.map(f.char("_"),()=>({ty:"wildcardPat"}))),Em=z(f.map(fd,({val:e})=>({ty:"numPat",val:e}))),xm=z(f.map(Cn(f.pure(null)),()=>({ty:"unitPat"}))),Cm=f.lazy(()=>z(f.map(ps,e=>({ty:"dataPat",con:e,args:[]})))),$m=f.lazy(()=>z(f.map(cd(f.sep0(un,re(f.char(",")))),e=>({ty:"listPat",elems:e})))),Pm=f.lazy(()=>z(f.bind(f.sep2(f.alt([Ed,Mr]),re(f.char(","))),e=>f.result(e.length>4?ve(gs("TooLargeTuple",{size:e.length})):X({ty:"tuplePat",elems:e}))))),Dm=f.lazy(()=>f.parens(re(f.alt([Pm,em,un])))),Vm=f.lazy(()=>z(f.map(f.seq([Un,f.opt(f.right(re(f.char("@")))(un))]),([e,t])=>t?{ty:"recordPatRebindingField",key:e,pat:t}:{ty:"recordPatPunningField",key:e}))),Am=z(f.map(f.seq([ps,he(ro(f.sep0(Vm,re(f.char(",")))))]),([e,t])=>({ty:"recordPat",con:e,fields:t}))),Rm=z(f.map(Xs,e=>({ty:"varPat",id:e}))),Mr=f.alt([Dm,$m,Rm,Sm,Am,Cm,Em,xm]),Tm=f.lazy(()=>z(f.map(f.seq([nm,f.some(he(un))]),([e,t])=>({ty:"dataPat",con:e,args:t})))),bl=f.alt([Tm,Mr]),Ed=z(f.map(f.seq([bl,f.many(f.seq([re(bd),bl]))]),([e,t])=>{if(!t.length)return e;const{ops:n,args:s}=t.reduce(({ops:o,args:r},[i,l])=>({ops:[...o,i],args:[...r,l]}),{ops:Array.of(),args:[e]});return{ty:"infixPat",ops:n,args:s}})),un=Ed,xd=f.lazy(()=>z(f.map(f.seq([un,re(f.str("->")),ct]),([e,,t])=>({ty:"caseBranch",pat:e,body:t})))),Nm=f.lazy(()=>z(f.map(f.seq([rt("case"),he(ct),re(f.str("of")),kr(xd)]),([,e,,t])=>({ty:"case",scrutinee:e,branches:t})))),Om=f.lazy(()=>z(f.map(f.seq([f.char("\\"),f.some(he(Mr)),re(f.str("->")),ct]),([,e,,t])=>({ty:"lambdaMulti",params:e,body:t})))),Fm=f.lazy(()=>z(f.map(f.seq([f.char("\\"),he(rt("case")),kr(xd)]),([,,e])=>({ty:"lambdaCase",branches:e})))),Cd=f.map(na,({id:e})=>G(e)),Bm=f.lazy(()=>f.map(f.brackets(re(f.opt(Et))),e=>e===null?G("[]"):xn(G("[]"),e))),Lm=f.lazy(()=>f.map(f.sep2(Et,re(f.char(","))),e=>Ln(G(`${",".repeat(e.length-1)}`),...e))),Hm=f.pure(G("")),Um=f.lazy(()=>f.parens(f.alt([Lm,Et,Hm]))),ia=f.lazy(()=>f.alt([Bm,Um,Cd,lo])),$d=f.lazy(()=>f.map(f.seq([f.alt([Cd,lo]),f.some(he(ia))]),([e,t])=>Ln(e,...t))),jm=f.lazy(()=>f.map(f.seq([f.alt([$d,ia]),re(f.str("->")),Et]),([e,,t])=>fs(e,t))),lo=f.map(hd,Fe),Et=f.alt([jm,$d,ia]),Mn=e=>z(f.map(e,t=>({ty:"type",type:t}))),qm=md,kl=f.map(f.seq([qm,he(f.map(Et,ge.rigidify))]),([e,t])=>({classId:e,arg:t})),zm=f.alt([f.map(kl,Array.of),Cn(f.sep0(kl,re(f.char(","))))]),Wm=f.left(re(f.str("=>")))(zm),Gm=f.alt([Wm,f.map(f.pure(null),()=>[])]),Pd=e=>z(f.map(f.seq([Gm,e]),([t,n])=>({ty:"typeScheme",isImplicit:!0,typeScheme:U(n,ge.rigidify,ge.generalize,on.unionConstrs(t))}))),Dd=z(f.alt([oa])),Km=z(f.map(f.seq([Dd,re(f.str("::")),Pd(Et)]),([e,,t])=>({ty:"ann",expr:e,ann:t}))),ct=f.alt([Km,Dd]),Vd=z(f.map(f.seq([f.sep1(Un,re(f.char(","))),re(f.str("::")),Pd(Et)]),([e,,t])=>({ty:"sigDecl",ids:e,sig:t}))),Ad=z(f.map(f.seq([f.str("infix"),f.opt(f.oneOf("lr")),he(f.posint),he(f.sep1(ao,re(f.char(","))))]),([,e,t,n])=>({ty:"fixityDecl",ids:n,fixity:{assoc:e==="l"?"left":e==="r"?"right":"none",prec:t}}))),Jm=z(f.map(f.seq([na,f.many(he(Mn(Et)))]),([e,t])=>({ty:"dataApplyCon",func:e,params:t}))),Ym=z(f.map(f.seq([Mn(Et),re(ta),Mn(Et)]),([e,t,n])=>({ty:"dataInfixCon",lhs:e,op:t,rhs:n}))),Zm=f.alt([Jm,Ym]),Qm=f.lazy(()=>z(f.map(f.seq([rt("data"),he(Gt),f.many(he(Mn(lo))),re(f.char("=")),f.opt(re(f.char("|"))),f.sep1(Zm,re(f.char("|")))]),([,e,t,,,n])=>({ty:"dataDef",id:e,params:t,cons:n})))),Xm=f.lazy(()=>z(f.map(f.seq([Un,re(f.str("::")),Mn(Et)]),([e,,t])=>({ty:"recordDefField",key:e,type:t})))),_m=f.lazy(()=>z(f.map(f.seq([rt("record"),he(Gt),f.many(he(Mn(lo))),re(f.char("=")),ro(f.sep0(Xm,re(f.char(","))))]),([,e,t,,n])=>({ty:"recordDef",id:e,params:t,fields:n})))),eh=z(f.map(f.seq([gl,f.opt(f.right(re(f.str("as")))(gl))]),([e,t])=>({ty:"importItem",id:e,qid:t}))),th=z(f.bind(f.seq([rt("import"),he(Gt),f.opt(he(rt("open"))),f.opt(he(ro(f.sep0(eh,re(f.char(",")))))),f.opt(f.right(re(rt("as")))(Gt))]),([,e,t,n,s])=>f.result(t===null||s===null?X({ty:"import",modId:e,items:n,isOpen:t!==null,qid:s}):ve(gs("MalformedImport",{}))))),nh=f.map(f.ranged(kr(f.alt([th,Qm,_m,Im,wm,Vd,Ad,wd,Sd]))),({val:e,range:t})=>U(e,zi("ty"),({import:n=[],dataDef:s=[],recordDef:o=[],classDef:r=[],instanceDef:i=[],sigDecl:l=[],fixityDecl:d=[],equation:a=[],binding:u=[]})=>({ty:"mod",imports:n,dataDefs:s,recordDefs:o,classDefs:r,instanceDefs:i,bindingHost:{ty:"bindingHost",role:"normal",sigDecls:l,fixityDecls:d,bindings:[...a,...u],astId:0,range:t},astId:0,range:t}))),sh=e=>t=>f.ended(re(e))({input:t,index:0,rest:t,layout:[-1]}).map(({val:n})=>n),oh=sh(f.map(nh,e=>U(e,Fy,({node:t,ais:n,nodeMap:s})=>({mod:t,ais:n,nodeMap:s})))),rh=(e,t)=>{const{source:n}=t.get(e);return oh(n)},ih={applyMulti:(e,t)=>t.nf.makeApplyMulti([e.func,...e.args].map(t.transform)),roll:(e,t)=>t.nf.makeApplyMulti([t.nf.makeVar("roll"),e.times?t.transform(e.times):t.nf.make({ty:"num",val:1}),t.transform(e.sides)]),paren:(e,t)=>t.transform(e.expr),tuple:(e,t)=>t.nf.makeAutoTuple(e.elems.map(t.transform)),list:(e,t)=>e.elems.map(t.transform).reduceRight((n,s)=>t.nf.makeApplyMulti([t.nf.makeVar(":"),s,n]),t.nf.makeVar("[]")),unitPat:(e,t)=>t.nf.make({ty:"dataPat",con:t.nf.makeVarRef(""),args:[]}),tuplePat:(e,t)=>t.nf.make({ty:"dataPat",con:t.nf.makeVarRef(t.nf.makeTupleIdN(e.elems.length)),args:e.elems.map(t.transform)}),listPat:(e,t)=>e.elems.map(t.transform).reduceRight((n,s)=>t.nf.make({ty:"dataPat",con:t.nf.makeVarRef(":"),args:[s,n]}),t.nf.make({ty:"dataPat",con:t.nf.makeVarRef("[]"),args:[]})),recordPatPunningField:(e,t)=>t.nf.make({ty:"recordPatRebindingField",key:t.transform(e.key),pat:t.nf.makeVarPat(e.key.id)}),lambdaCase:(e,t)=>t.nf.make({ty:"lambda",param:t.nf.makeVarPat("!scrutinee"),body:t.nf.make({ty:"case",scrutinee:t.nf.makeVar("!scrutinee"),branches:e.branches.map(t.transform)})}),equationApplyHead:(e,t)=>{const n=t.transform(e.func),s=e.params.map(t.transform);return n.ty==="varRef"?t.nf.make({ty:"equationApplyFlattenHead",func:n,params:s}):t.nf.make({ty:"equationApplyFlattenHead",func:n.func,params:[...n.params,...s]})},equationInfixHead:(e,t)=>t.nf.make({ty:"equationApplyFlattenHead",func:t.transform(e.op),params:[e.lhs,e.rhs].map(t.transform)}),dataInfixCon:(e,t)=>t.nf.make({ty:"dataApplyCon",func:t.transform(e.op),params:[e.lhs,e.rhs].map(t.transform)}),recordPunningField:(e,t)=>t.nf.make({ty:"recordBindingField",key:t.transform(e.key),val:t.nf.makeVar(e.key.id)}),recordUpdatePunningMatchingField:(e,t)=>t.nf.make({ty:"recordUpdateMatchingField",key:t.transform(e.key),pat:t.nf.makeVarPat(e.key.id),body:t.transform(e.body)}),recordUpdatePipeField:(e,t)=>t.nf.make({ty:"recordUpdateMatchingField",key:t.transform(e.key),pat:t.nf.makeVarPat(e.key.id),body:t.nf.makeApplyMulti([t.transform(e.func),t.nf.makeVar(e.key.id)])})},ah=(e,t)=>{const{parse:{mod:n,ais:s,nodeMap:o}}=t.use(e,["parse"]),i=Ji(()=>({}),ih)({nf:new ds(cs.of(s,o))});return X({mod:i.transform(n)})},lh=(e,t,n)=>{const{syntaxDesugar:{mod:s}}=t.use(e,["syntaxDesugar"]),o=U(s.imports,Me(r=>r.modId.id),Oe.of);for(const r of o){if(!t.has(r))try{t.load(r)}catch{return ve({type:"UnknownDepMod",modId:r})}n.addDep(e,r)}return X({depModIdSet:o})};(function(e){e.ofNode=t=>({id:t.id.id,params:t.params.map(gt("type")),cons:t.cons.map(n=>({id:n.func.id,params:n.params.map(gt("type"))}))}),e.getTypeId=t=>n=>({id:n.id,symId:n.symId,type:ge.generalize(mt(...n.params,Ln(G(t.id),...t.params)))}),e.getTypeValue=t=>{const n=e.getTypeId(t);return s=>({...n(s),value:Uy(s.params.length,(...o)=>({ty:"data",con:s.symId,args:o}))})},e.getTypedIds=t=>t.cons.map(e.getTypeId(t)),e.getTypedValues=t=>t.cons.map(e.getTypeValue(t))})(_o||(_o={}));var _o;const Zt=(...e)=>e.map(Fe),Rd=[{data:{id:"Num",params:Zt(),cons:[]},kind:Yt(1)},{data:{id:"Char",params:Zt(),cons:[]},kind:Yt(1)},{data:{id:"",params:Zt(),cons:[{id:"",params:[]}]},kind:Yt(1)},{data:{id:"Bool",params:Zt(),cons:[{id:"True",params:[]},{id:"False",params:[]}]},kind:Yt(1)},{data:{id:"[]",params:Zt("a"),cons:[{id:"[]",params:[]},{id:":",params:[Fe("a"),Ln(G("[]"),Fe("a"))]}]},kind:Yt(2)},{data:{id:",",params:Zt("a","b"),cons:[{id:",",params:[Fe("a"),Fe("b")]}]},kind:Yt(3)},{data:{id:",,",params:Zt("a","b","c"),cons:[{id:",,",params:[Fe("a"),Fe("b"),Fe("c")]}]},kind:Yt(4)},{data:{id:",,,",params:Zt("a","b","c","d"),cons:[{id:",,,",params:[Fe("a"),Fe("b"),Fe("c"),Fe("d")]}]},kind:Yt(5)},{data:{id:",,,,",params:Zt("a","b","c","d","e"),cons:[{id:",,,,",params:[Fe("a"),Fe("b"),Fe("c"),Fe("d"),Fe("e")]}]},kind:Yt(6)}].map(({data:e,kind:t})=>({data:{...e,cons:e.cons.map(n=>({...n,symId:`Builtin:${n.id}`})),symId:`Builtin:${e.id}`},kind:t})),uh=U(Rd,Me(({data:e,kind:t})=>[e.id,t]),He.of);(function(e){e.wrappers={num:ld,bool:t=>Xo(t?"Builtin:True":"Builtin:False",[]),unit:ud},e.unwrappers={num:t=>t.val,bool:t=>t.con==="Builtin:True",unit:()=>null}})(er||(er={}));const Ct=(e,t,n)=>{const s=(o,r)=>{if(o===e.length){const l=er.wrappers[t];return l(n(...r))}const i=er.unwrappers[e[o]];return Xi(l=>s(o+1,[...r,i(l)]))};return s(0,[])},aa=[{id:"addNum",type:mt(G("Num"),G("Num"),G("Num")),value:Ct(["num","num"],"num",(e,t)=>e+t)},{id:"subNum",type:mt(G("Num"),G("Num"),G("Num")),value:Ct(["num","num"],"num",(e,t)=>e-t)},{id:"mulNum",type:mt(G("Num"),G("Num"),G("Num")),value:Ct(["num","num"],"num",(e,t)=>e*t)},{id:"divNum",type:mt(G("Num"),G("Num"),G("Num")),value:Ct(["num","num"],"num",(e,t)=>e/t)},{id:"modNum",type:mt(G("Num"),G("Num"),G("Num")),value:Ct(["num","num"],"num",(e,t)=>e%t)},{id:"eqNum",type:mt(G("Num"),G("Num"),G("Bool")),value:Ct(["num","num"],"bool",(e,t)=>e===t)},{id:"ltNum",type:mt(G("Num"),G("Num"),G("Bool")),value:Ct(["num","num"],"bool",(e,t)=>e<t)},{id:"leNum",type:mt(G("Num"),G("Num"),G("Bool")),value:Ct(["num","num"],"bool",(e,t)=>e<=t)},{id:"gtNum",type:mt(G("Num"),G("Num"),G("Bool")),value:Ct(["num","num"],"bool",(e,t)=>e>t)},{id:"geNum",type:mt(G("Num"),G("Num"),G("Bool")),value:Ct(["num","num"],"bool",(e,t)=>e>=t)},{id:"roll",type:mt(G("Num"),G("Num"),G("Num")),value:Ct(["num","num"],"num",(e,t)=>yy(Gi(e,()=>Math.floor(Math.random()*t)+1)))}].map(({id:e,type:t,value:n})=>({id:e,type:ge.generalize(t),value:n})),la=Rd.flatMap(({data:e})=>_o.getTypedValues(e)),dh=[...aa,...la].map(gt("id")),ch=[...aa,...la],fh=U([...aa,...la],Me(({id:e,type:t})=>[`Builtin:${e}`,t]),He.of);var er;class Zn{astId;parent;symMap=te.empty();constructor(t,n){this.astId=t,this.parent=n}static builtin(t){const n=new Zn(0,null);return dh.forEach(s=>{const o=`Builtin:${s}`,r={type:"builtin",id:s};n.symMap.set(s,{symId:o,source:r,unscopable:!1}),t.set(o,{type:"binding",id:s,source:r})}),n}static global(t,n){return new Zn(t,Zn.builtin(n))}derive(t){return new Zn(t,this)}register(t,n,s){if(this.symMap.has(t))return ve(this.symMap.get(t));const o=s.next();return this.symMap.set(t,{...n,symId:o}),X(o)}keys(){return this.symMap.keys()}values(){return this.symMap.values()}entries(){return this.symMap.entries()}get size(){return this.symMap.size}get(t){return this.symMap.get(t)??null}has(t){return this.symMap.has(t)}lookup(t){const n=this.symMap.get(t);return n&&!n.unscopable?n:this.parent?this.parent.lookup(t):null}}(function(e){e.ofNode=([t,n,s])=>[t,qe.node(n.astId),qe.node(s.astId)]})(_s||(_s={}));(function(e){(function(t){t.ofIdNodeMap=ri.ofIdNodeMap})(e.Ok||(e.Ok={})),(function(t){t.ofIdNodeMap=_s.ofNode})(e.Err||(e.Err={})),e.ofIdNodeMap=t=>t.map(e.Ok.ofIdNodeMap).mapErr(e.Err.ofIdNodeMap)})(yi||(yi={}));const Os=e=>me.all(e.map(pi)).bind(t=>te.disjointUnion(t)),pi=e=>Be(e).with({ty:"wildcardPat"},{ty:"numPat"},()=>X(te.empty())).with({ty:"varPat"},t=>X(te.solo(t.id.id,t))).with({ty:"dataPat"},{ty:"infixPat"},({args:t})=>Os(t)).with({ty:"recordPat"},({fields:t})=>Os(t.map(gt("pat")))).exhaustive(),ph={var:(e,t)=>{e.symId=t.resolve(e)},varRef:(e,t)=>{e.symId=t.resolve(e)},recordPat:(e,t)=>{t.resolveRecordLike(e),e.fields.forEach(t.walk)},record:(e,t)=>{t.resolveRecordLike(e),e.fields.forEach(t.walk)},lambda:(e,t)=>{t=t.withSubScope(e),U(pi(e.param),t.registerIdSymNodeMapCollectRes("binding/param")),t.walkDefault(e)},lambdaMulti:(e,t)=>{t=t.withSubScope(e),U(Os(e.params),t.registerIdSymNodeMapCollectRes("binding/param")),t.walkDefault(e)},equation:(e,t)=>{t.mode!=="collect"&&(t=t.withSubScope(e),U(Os(e.head.params),t.registerIdSymNodeMapCollectRes("binding/param")),t.walkDefault(e))},binding:(e,t)=>{if(t.mode==="collect"){const s=U(pi(e.pat),t.registerIdSymNodeMapCollectRes("binding/param")),o=U(s,te.values,dt.of,dt.map(r=>r.symId),Oe.of);t.bindingMap.set(e.astId,{symIdSet:o,refSymIdSet:Oe.empty()});return}const n=t.bindingMap.get(e.astId);t.fork({bindingInfo:n}).walkDefault(e)},instanceDef:(e,t)=>{if(t.mode==="lift")return;t=t.withMode("resolve");const n=e.classId.id,s=t.classMap.get(n);if(!s)throw t.throw({type:"UndefinedClass",classId:n,astId:e.classId.astId});t.fork({unscopable:!0}).walkDefault(e);const o=t.scopeMap.get(e.bindingHost.astId);for(const[r,{astId:i}]of s.members)if(!o.get(r))throw t.throw({type:"InstanceMissingDef",id:r,sigDeclAstId:i,instanceAstId:e.astId});for(const[r,{source:i}]of o.entries())if(!s.members.has(r))throw t.throw({type:"InstanceExtraDef",id:r,source:i,instanceAstId:e.astId})},bindingHost:(e,t)=>{t.mode==="resolve"&&(t=t.withSubScope(e));const{equation:n=Array.of(),binding:s=Array.of()}=U(e.bindings,zi("ty"));if(t.mode!=="resolve-only"){t.withMode("collect").walkDefault(e);const o=U(n,ly(a=>a.head.func.id.id),Js((a,u)=>{const y=Oe.of(a.map(b=>b.head.params.length));y.size>1&&t.throw({type:"DiffEquationArity",id:u});const[h]=y;return{id:u,arity:h,equations:a,bindingInfo:{symIdSet:Oe.empty(),refSymIdSet:Oe.empty()}}})),r=U(Ns(o),Me(a=>[a.id,qe.nodes(a.equations.map(u=>u.head.func.astId))]),te.of,t.registerMap,dt.of,dt.map(([a,u])=>[a,{...o[a],symId:u}]),He.of),i=U(e.fixityDecls,zo(a=>a.ids.map(({id:u})=>[u,a])),te.strictOf,me.mapErr(_s.ofNode),t.unwrapConflictId("fixityDecl"),te.map(gt("fixity"))),l=U(e.sigDecls,zo(a=>a.ids.map(u=>[u.id,{...a,id:u}])),te.strictOf,me.mapErr(_s.ofNode),t.unwrapConflictId("sigDecl")),d=te.empty();if(e.role==="normal")for(const[a,u]of l){const y=t.scope.get(a);if(!y)throw t.throw({type:"MissingDef",id:a,sigDeclAstId:u.astId});d.set(y.symId,u)}else if(e.role==="class")for(const[a,u]of l)t.register(a,qe.node(u.id.astId));t.bindingHostMap.set(e.astId,{scope:t.scope,idSigDeclMap:l,symSigDeclMap:d,fixityMap:i,equationGroupDict:r})}t.mode!=="lift"&&(t=t.fork({unscopable:!1}).withMode("resolve"),U(t.bindingHostMap.get(e.astId).equationGroupDict,iy(({bindingInfo:o,symId:r,equations:i})=>{o.symIdSet.add(r),i.forEach(l=>{t.bindingMap.set(l.astId,o),t.fork({bindingInfo:o}).walk(l)})})),s.forEach(t.walk))},let:(e,t)=>{t.walk(e.bindingHost);const n=t.scopeMap.get(e.bindingHost.astId);t.withScope(n).walk(e.body)},recordUpdate:(e,t)=>{t=t.withSubScope(e),U(Os(e.fields.map(gt("pat"))),t.registerIdSymNodeMapCollectRes("binding/param")),e.fields.forEach(n=>t.walk(n.body))}},yh=(e,t)=>{const n=t.use(e,["syntaxDesugar"]).syntaxDesugar.mod,s=Ki(w=>({throw:$=>{throw $},unwrap:me.unwrapBy($=>w.throw($)),unwrapConflictId:$=>me.unwrapBy(([N,C,V])=>w.throw({type:"ConflictingId",ty:$,id:N,source1:C,source2:V})),withScope:$=>w.fork({scope:$}),withSubScope:$=>{const N=w.withScope(w.scope.derive($.astId));return w.scopeMap.set($.astId,N.scope),N},withMode:$=>w.fork({mode:$}),register:($,N)=>U(w.scope.register($,{source:N,unscopable:w.unscopable},w.sis),me.tap(C=>{u.set(C,{type:"binding",id:$,source:N}),N.type==="nodes"&&N.astIds.forEach(V=>y.set(V,C))}),me.mapErr(C=>[$,C.source,N]),w.unwrapConflictId("binding/across")),registerMap:$=>U($,te.map((N,C)=>w.register(C,N))),registerIdSymNodeMapCollectRes:$=>N=>U(N,me.mapErr(yi.Err.ofIdNodeMap),w.unwrapConflictId($),te.forEach((C,V)=>{C.symId=w.register(V,qe.node(C.astId))})),resolve:$=>{const{id:{id:N},astId:C}=$,V=w.scope.lookup(N);if(!V)throw w.throw({type:"UndefinedId",id:N,astId:C});const{symId:S}=V;return w.bindingInfo.refSymIdSet.add(S),y.set(C,S),S},resolveRecordLike:$=>{const{con:N,fields:C,astId:V,ty:S}=$,L=N.id.id,W=w.recordMap.get(L);if(!W)throw w.throw({type:"UndefinedId",id:L,astId:V});$.con.symId=W.symId;const ee=Oe.of(vr(W.fieldDict)),ie=U(C,Me(Z=>Z.key.id),Oe.strictOf,me.unwrapBy(Z=>w.throw({type:"RecordDuplicateField",recordId:L,field:Z,astId:V}))),ne=ie.difference(ee);if(ne.size)throw w.throw({type:"RecordExtraField",recordId:L,fields:[...ne],astId:V});if(S==="record"){const Z=ee.difference(ie);if(Z.size)throw w.throw({type:"RecordMissingField",recordId:L,fields:[...Z],astId:V})}}}),ph),o=new oi(e),r=te.empty(),i=te.empty(),l=te.empty(),d=te.empty(),a=sn.empty(()=>[]),u=te.empty(),y=te.empty(),h=new Wo(o,u),b=Zn.global(n.astId,u),I=s({mode:"resolve",unscopable:!1,sis:o,store:t,scope:b,bindingHostMap:te.empty(),scopeMap:te.empty(),bindingInfo:null,bindingMap:te.empty(),instanceMap:d,symInfoMap:u,astSymMap:y,classMap:l,recordMap:i});return me.wrap(()=>{const w=te.empty(),$=te.empty(),N=te.empty();for(const S of n.imports){const{id:L,astId:W}=S.modId,{nameResolve:{exportInfo:ee}}=I.store.use(L,["nameResolve"]);if(S.isOpen)U([L,qe.node(W)],te.addToStrict(w),I.unwrapConflictId("moduleOpen"));else{const{id:Z,astId:ue}=S.qid??S.modId;U([Z,qe.node(ue)],te.addToStrict($),I.unwrapConflictId("moduleQualified"))}const ie=new Wo(o,u);N.set(L,ie);const ne=(Z,ue,Ue)=>{for(const[Ke,It]of Ju(Z)){if(!It)continue;const zn=Ke==="binding"?I.register(ue,Ue):o.next();ie.register({...It,symId:zn,originSymId:It.symId})}};if(S.items)for(const Z of S.items){const{id:ue}=Z.id,Ue=ee.symTable.get(ue);if(!Ue)throw I.throw({type:"UnknownImport",modId:L,id:ue});S.isOpen&&ne(Ue,ue,qe.node(Z.astId))}else if(S.isOpen)for(const[Z,ue]of ee.symTable)ne(ue,Z,qe.node(W))}for(const S of n.dataDefs){const L=S.id.id,W=U(S.cons,Me(ne=>[ne.func.id,qe.node(ne.astId)]),te.strictOf,I.unwrapConflictId("binding/dataCon"),I.registerMap,ne=>S.cons.map(Z=>{const ue=Z.func.id;return{id:ue,symId:ne.get(ue),params:Z.params.map(gt("type"))}})),ee=U(h.register({type:"type",ty:"data",id:L,source:qe.node(S.astId)}),I.unwrap),ie={id:L,symId:ee,params:S.params.map(gt("type")),cons:W};r.set(L,ie)}for(const S of n.recordDefs){const L=S.id.id,W=U(h.register({type:"type",ty:"record",id:L,source:qe.node(S.astId)}),I.unwrap),ee={id:L,symId:W,astId:S.astId,params:S.params.map(gt("type")),fieldDict:U(S.fields,Me(({key:{id:ie},type:{type:ne}})=>[ie,{id:ie,type:ne}]),He.of)};i.set(L,ee)}I.withMode("lift").walkDefault(n);for(const S of n.classDefs){const L=I.bindingHostMap.get(S.bindingHost.astId),W=U(L.idSigDeclMap,te.map((Ue,Ke)=>({id:Ke,astId:Ue.astId,sigType:Ue.sig.typeScheme,symId:b.get(Ke).symId}))),{id:{id:ee},astId:ie,param:{type:ne}}=S,Z=U(h.register({type:"type",ty:"class",id:ee,source:qe.node(S.astId)}),I.unwrap),ue={id:ee,astId:ie,constrs:[],symId:Z,param:ne,members:W};l.set(ue.id,ue)}for(const S of n.instanceDefs){const{classId:{id:L},arg:{type:W},astId:ee}=S,ie=`!dict.${L}.${ge.show(W)}`,ne=U(h.register({type:"instance",id:ie,source:qe.node(ee)}),I.unwrap),Z={instanceId:ie,classId:L,arg:W,symId:ne};d.set(ee,Z),a.get(L).push(Z)}I.withMode("resolve-only").walkDefault(n),I.scopeMap.set(n.astId,I.scope);const{fixityMap:C}=I.bindingHostMap.get(n.bindingHost.astId);return e==="Main"&&!b.has("main")&&I.throw({type:"MissingMain"}),U(b.entries(),dt.forEach(([S,{source:L,symId:W}])=>h.register({type:"binding",id:S,source:L,symId:W}))),{sis:o,exportInfo:{symTable:h,fixityMap:C,dataMap:r,classMap:l,classInstanceMap:a,recordMap:i},importMap:N,globalScope:b,mod:n,...Zu(I,["bindingMap","bindingHostMap","scopeMap","symInfoMap","astSymMap","instanceMap"])}})};var _s,yi;const Il=(e,t,n)=>{const s=e.ops.slice(),o=e.args.slice(),r=[],i=[];r.push(t.transform(o.shift()));const l=()=>{const d=i.pop(),a=r.pop(),u=r.pop();r.push(n(u,d,a))};for(;s.length;){const d=s.shift();for(;i.length;){const u=i.at(-1),y=t.getFixity(u.id.id),h=t.getFixity(d.id.id);let b=!1;if(y.prec>h.prec?b=!0:y.prec===h.prec&&((y.assoc!==h.assoc||y.assoc==="none")&&t.throw({type:"Fixity",lOp:u.astId,rOp:d.astId,lFixity:y,rFixity:h}),y.assoc==="left"&&(b=!0)),b)l();else break}i.push(d);const a=t.transform(o.shift());r.push(a)}for(;i.length;)l();return r[0]},mh={infix:(e,t)=>Il(e,t,(n,s,o)=>t.nf.makeApplyMulti([s,n,o])),sectionL:(e,t)=>{if(e.arg.ty==="infix"){const n=U(e.arg.ops,Me(o=>t.getFixity(o.id.id)),cl(o=>o.prec)),s=t.getFixity(e.op.id.id);(s.prec>n.prec||s.prec===n.prec&&s.assoc!=="left")&&t.throw({type:"Section",section:e.astId})}return t.nf.makeApplyMulti([e.op,e.arg].map(t.transform))},sectionR:(e,t)=>{if(e.arg.ty==="infix"){const o=U(e.arg.ops,Me(i=>t.getFixity(i.id.id)),cl(i=>i.prec)),r=t.getFixity(e.op.id.id);(r.prec>o.prec||r.prec===o.prec&&r.assoc!=="right")&&t.throw({type:"Section",section:e.astId})}const n=t.sis.next();return t.nf.make({ty:"lambda",param:t.nf.makeVarPat("!lhs",n),body:t.nf.makeApplyMulti([t.transform(e.op),t.nf.makeVar("!lhs",n),t.transform(e.arg)])})},infixPat:(e,t)=>Il(e,t,(n,s,o)=>t.nf.make({ty:"dataPat",con:s,args:[n,o]})),lambdaMulti:(e,t)=>{t=t.enterNodeScope(e);const n=e.params.map(t.transform),s=t.transform(e.body);return n.reduceRight((o,r)=>t.nf.make({ty:"lambda",param:r,body:o}),s)},equation:(e,t)=>{throw t.throw({type:"Unreachable",ty:"equation"})},equationApplyFlattenHead:(e,t)=>{throw t.throw({type:"Unreachable",ty:"equationApplyFlattenHead"})},recordUpdate:(e,t)=>{const{fieldDict:n}=t.recordMap.get(e.con.id.id),s=U(e.fields,Me(i=>[i.key.id,t.transform(i)]),He.of),o=[],r=[];for(const i in n)if(i in s){const l=s[i];o.push(t.nf.make({ty:"recordPatRebindingField",key:l.key,pat:l.pat})),r.push(t.nf.make({ty:"recordBindingField",key:l.key,val:l.body}))}else{const l=t.nf.makeId(i),d=t.sis.next();o.push(t.nf.make({ty:"recordPatRebindingField",key:l,pat:t.nf.makeVarPat(i,d)})),r.push(t.nf.make({ty:"recordBindingField",key:l,val:t.nf.makeVar(i,d)}))}return t.nf.make({ty:"lambda",param:t.nf.make({ty:"recordPat",con:e.con,fields:o}),body:t.nf.make({ty:"record",con:e.con,fields:r})})},bindingHost:(e,t)=>{t=t.enterNodeScope(e);const{fixityMap:n,equationGroupDict:s}=t.bindingHostMap.get(e.astId);t=t.fork({fixityMap:te.union([t.fixityMap,n])});const o=U(Ns(s),Me(i=>{const l=si(0,i.arity).map(w=>`!arg${w}`),d=si(0,i.arity).map(t.sis.next),a=Ys(l,d).map(([w,$])=>t.nf.makeVar(w,$)),u=Ys(l,d).map(([w,$])=>t.nf.makeVarPat(w,$)),y=t.nf.make({ty:"case",scrutinee:t.nf.makeAutoTuple(a,!0),branches:i.equations.map(w=>U(t.enterNodeScope(w),$=>$.nf.make({ty:"caseBranch",pat:$.nf.makeAutoTuplePat(w.head.params.map($.transform),!0),body:$.transform(w.body)})))}),h=t.nf.makeLambdaMulti(u,y),[b]=i.equations,I={ty:"binding",astId:b.astId,range:Gs.empty(),pat:t.nf.makeVarPat(i.id,i.symId),body:h};return t.bindingMap.set(I.astId,{symIdSet:Oe.solo(i.symId),refSymIdSet:U(i.equations,Me(({astId:w})=>t.bindingMap.get(w).refSymIdSet),Oe.union)}),I})),r=U(e.bindings,ty(i=>i.ty==="binding"),Me(t.transform),Wu(o));return{...e,bindings:r}},recordPat:(e,t)=>t.sortRecordLike(e),record:(e,t)=>t.sortRecordLike(e)},hh=(e,t)=>{const{parse:{ais:n,nodeMap:s},nameResolve:{sis:o,mod:r,bindingHostMap:i,bindingMap:l,exportInfo:{recordMap:d},globalScope:a,scopeMap:u}}=t.use(e,["parse","nameResolve"]),h=Ji(b=>({throw:I=>{throw I},enterNodeScope:I=>b.fork({scope:b.scopeMap.get(I.astId)}),getFixity:I=>b.fixityMap.get(I)??De.def(),sortRecordLike:I=>{const w=b.recordMap.get(I.con.id.id),$=U(I.fields,Me(C=>[C.key.id,b.transform(C)]),He.of),N=U(w.fieldDict,He.keys,Me(C=>$[C]));return{...I,fields:N}}}),mh)({sis:o,nf:new ds(cs.of(n,s)),fixityMap:Ny,bindingMap:l,bindingHostMap:i,scope:a,scopeMap:u,recordMap:d});return me.wrap(()=>({mod:h.transform(r)}))},gh=`-- Boolean

(||) :: Bool -> Bool -> Bool
True  || _ = True
False || y = y

(&&) :: Bool -> Bool -> Bool
False && _ = False
True  && y = y

not :: Bool -> Bool
not True = False
not False = True

-- Number

(+) :: Num -> Num -> Num
(+) = addNum

(-) :: Num -> Num -> Num
(-) = subNum

(*) :: Num -> Num -> Num
(*) = mulNum

(/) :: Num -> Num -> Num
(/) = divNum

(%) :: Num -> Num -> Num
(%) = modNum

(==) :: Num -> Num -> Bool
(==) = eqNum

(/=) :: Num -> Num -> Bool
(/=) x y = not (x == y)

(<) :: Num -> Num -> Bool
(<) = ltNum

(>) :: Num -> Num -> Bool
(>) = gtNum

(<=) :: Num -> Num -> Bool
(<=) = leNum

(>=) :: Num -> Num -> Bool
(>=) = geNum

inf :: Num
inf = 1 / 0

neg :: Num -> Num
neg x = 0 - x

min :: Num -> Num -> Num
min x y = if x < y then x else y

max :: Num -> Num -> Num
max x y = if x > y then x else y

abs :: Num -> Num
abs x = if x < 0 then neg x else x

-- Function

id :: a -> a
id x = x

const :: a -> b -> a
const x _ = x

flip :: (a -> b -> c) -> b -> a -> c
flip f x y = f y x

(|>) :: a -> (a -> b) -> b
x |> f = f x

($) :: (a -> b) -> a -> b
f $ x = f x

(<<) :: (b -> c) -> (a -> b) -> a -> c
(f << g) x = f (g x)

(>>) :: (a -> b) -> (b -> c) -> a -> c
(f >> g) x = g (f x)

-- List

map :: (a -> b) -> [a] -> [b]
map _ [] = []
map f (x:xs) = f x : map f xs

(<$>) = map
infixl 4 <$>

filter :: (a -> Bool) -> [a] -> [a]
filter _ [] = []
filter p (x:xs) =
  let xs' = filter p xs
  in  if p x then x:xs' else xs'

sort :: [Num] -> [Num]
sort [] = []
sort (p:xs) =
  let smallers = filter (< p) xs
      biggers = filter (>= p) xs
  in  sort smallers ++ (p : sort biggers)

(++) :: [a] -> [a] -> [a]
[] ++ ys = ys
(x:xs) ++ ys = x : (xs ++ ys)

take :: Num -> [a] -> [a]
take 0 _ = []
take _ [] = []
take n (x:xs) = x : take (n - 1) xs

drop :: Num -> [a] -> [a]
drop 0 xs = xs
drop _ [] = []
drop n (x:xs) = drop (n - 1) xs

foldr :: (a -> b -> b) -> b -> [a] -> b
foldr _ z [] = z
foldr f z (x:xs) = f x (foldr f z xs)

-- Maybe

data Maybe a = Just a | Nothing

listToMaybe :: [a] -> Maybe a
listToMaybe [] = Nothing
listToMaybe (x:_) = Just x

maybeToList :: Maybe a -> [a]
maybeToList Nothing = []
maybeToList (Just x) = [x]

-- Tuple

data Solo a = MkSolo a

fst :: (a, b) -> a
fst (x, _) = x

snd :: (a, b) -> b
snd (_, y) = y

-- Either

data Either a b = Left a | Right b

-- Ordering

data Ordering = LT | EQ | GT
`,vh={Prelude:gh};class bh{prefix;constructor(t){this.prefix=t}counter=0;nextId(){return`${this.prefix}${this.counter++}`}}class kh extends bh{fresh(){return Ly(this.nextId())}}const ha=class ha{bindingHostMaps;dataMap;recordMap;kvs=new kh("k");constructor(t,n,s){this.bindingHostMaps=t,this.dataMap=n,this.recordMap=s}infer(t,n){return Be(t).with({ty:"con"},({id:s})=>s in n?X({kind:n[s],subst:{}}):ve({type:"UndefinedCon",id:s})).with({ty:"var"},({id:s})=>s in n?X({kind:n[s],subst:{}}):ve({type:"UndefinedVar",id:s})).with({ty:"apply"},({func:s,arg:o})=>this.infer(s,n).bind(({kind:r,subst:i})=>this.infer(o,Re.applyDict(i)(n)).bind(({kind:l,subst:d})=>{const a=Re.apply(d)(r),u=this.kvs.fresh(),y=Qo(l,u);return at.unify(a,y).mapErr(at.Unify.wrapErr).map(h=>({kind:Re.apply(h)(u),subst:Re.compose([h,d,i])}))}))).with({ty:"func"},({param:s,ret:o})=>this.infer(s,n).bind(({kind:r,subst:i})=>this.infer(o,Re.applyDict(i)(n)).bind(({kind:l,subst:d})=>at.unify(r,bn()).bind(a=>at.unify(l,bn()).map(u=>({kind:bn(),subst:Re.compose([u,a,d,i])}))).mapErr(at.Unify.wrapErr)))).with({ty:"forall"},()=>{throw Error("Inferring kinds of forall types is not supported")}).exhaustive()}inferDataLike(t,n){const{id:s,params:o}=t,r=U(o,Me(l=>[l.id,this.kvs.fresh()]),He.of),i=Qi(...o.map(({id:l})=>r[l]),bn());return at.unify(n[s],i).mapErr(at.Unify.wrapErr).bind(l=>{const d={...Re.applyDict(l)(n),...r};return me.fold(o,{env:d,subst:l},({env:a,subst:u},y)=>this.infer(y,a).bind(({kind:h,subst:b})=>at.unify(h,bn()).mapErr(at.Unify.wrapErr).map(I=>({env:Re.applyDict(I)(a),subst:Re.compose([I,b,u])}))))})}inferDataLikeList(t,n){const s=U(t,Me(r=>[r.id,this.kvs.fresh()]),He.of),o={...n,...s};return me.fold(t,{env:o,subst:Re.empty()},({env:r,subst:i},l)=>this.inferDataLike(l,r).map(({subst:d,env:a})=>({env:a,subst:Re.compose2(d,i)}))).map(({env:r,subst:i})=>U(t,Me(l=>at.monomorphize(r[l.id]).subst),Wu([i]),Re.compose,l=>({env:Re.applyDict(l)(r),subst:l})))}checkSigDecl(t,n){const s=t.sig.typeScheme.type,o=U(s,ge.collectTypeVars,dt.of,dt.map(({id:i})=>[i,i in n?n[i]:this.kvs.fresh()]),He.of),r={...n,...o};return this.infer(s,r).bind(({kind:i,subst:l})=>at.unify(i,bn()).mapErr(at.Unify.wrapErr).map(d=>{const a=Re.compose2(d,l);return{subst:a,env:Re.applyDict(a)(r)}}))}checkList(t,n,s){return me.fold(t,{env:s,subst:Re.empty()},({env:o,subst:r},i)=>n(i,o).map(({env:l,subst:d})=>({env:l,subst:Re.compose2(d,r)})))}checkClassDef(t,n){const s=t.id.id,o=t.param.type.id,r={...n,[o]:this.kvs.fresh()},i=this.bindingHostMaps.get(t.bindingHost.astId);return this.checkList([...i.idSigDeclMap.values()],this.checkSigDecl,r).map(({env:l,subst:d})=>({env:{...l,[s]:Qo(Re.apply(d)(r[o]),By())},subst:d}))}checkMod(t,n){const s=this.bindingHostMaps.get(t.bindingHost.astId);return this.inferDataLikeList([...this.dataMap.values(),...this.recordMap.values()],n).bind(({env:o})=>this.checkList([...s.idSigDeclMap.values()],this.checkSigDecl,o).bind(({env:r})=>this.checkList(t.classDefs,this.checkClassDef,r)))}};Hn(ha);let mi=ha;const Ih=(e,t)=>{const{semanticsDesugar:{mod:n},nameResolve:{bindingHostMap:s,exportInfo:{dataMap:o,recordMap:r},importMap:i}}=t.use(e,["nameResolve","semanticsDesugar"]),l=ai.empty();for(const[u,y]of i){const{kindCheck:{kindEnvIntro:h}}=t.use(u,["kindCheck"]);for(const[b]of y.byType.get("type"))l[b]=h[b]}const d={...uh,...l};return new mi(s,o,r).checkMod(n,d).map(({env:u})=>({kindEnv:u,kindEnvIntro:Yu(u,vr(d))}))};(function(e){e.empty=()=>te.empty(),e.emptyD=()=>sn.empty(Oe.empty),e.solveSCCs=t=>{const n=e.emptyD();for(const[u,y]of t)for(const h of y)n.get(h).add(u);const s=Oe.empty(),o=te.empty(),r=[];let i=0;const l=Array.of(),d=u=>{s.add(u);for(const y of t.get(u))s.has(y)||d(y);r.push(u)},a=(u,y)=>{y.add(u),o.set(u,i);for(const h of n.get(u))o.has(h)||a(h,y)};for(const u of t.keys())s.has(u)||d(u);for(;r.length>0;){const u=r.pop();if(!o.has(u)){i++;const y=Oe.empty();a(u,y),l.push({color:i,nodes:y})}}return{colorMap:o,comps:l}},e.condense=(t,n,s)=>{const o=te.of(s.map(({color:r})=>[r,Oe.empty()]));for(const[r,i]of t){const l=n.get(r);for(const d of i){const a=n.get(d);l!==a&&o.get(l).add(a)}}return o},e.topoSort=t=>{const n=Array.of(),s=sn.empty(()=>0);for(const[r,i]of t){const l=i.size;s.set(r,l),l===0&&n.push(r)}const o=Array.of();for(;n.length>0;){const r=n.pop();o.push(r);for(const[i,l]of t)l.has(r)&&s.update(i,a=>a-1)===0&&n.push(i)}return o}})(eo||(eo={}));var eo;const wh=(e,t)=>{const n=te.empty(),s=eo.emptyD(),o=U(e.bindings,Me(i=>t.get(i.astId).symIdSet),Oe.union);for(const i of e.bindings){const{symIdSet:l,refSymIdSet:d}=t.get(i.astId),a=d.intersection(o).union(l);for(const u of l)n.set(u,i),s.set(u,a)}const{comps:r}=eo.solveSCCs(s);return r.reverse().map(({color:i,nodes:l})=>{const d=U([...l],Me(a=>n.get(a)),wy(gt("astId")));return{id:i,bindings:d,symIdSet:l}})},Mh=(e,t)=>{const{nameResolve:{bindingMap:n},semanticsDesugar:{mod:s}}=t.use(e,["nameResolve","semanticsDesugar"]),o=te.empty();return Ki(()=>({}),{bindingHost:(l,d)=>{o.set(l.astId,wh(l,n)),d.walkDefault(l)}})({}).walk(s),X({bindingGroupsMap:o})};(function(e){e.getTypedIds=t=>U([...t.members.values()],Me(n=>({id:n.id,type:U(n.sigType,on.unionConstrs([{classId:t.id,arg:t.param}])),symId:n.symId})))})(hi||(hi={}));var hi;(function(e){e.wrapErr=t=>({type:"Wrapped",via:"UnifyErr",err:t})})(Mt||(Mt={}));class Sh{prefix;constructor(t){this.prefix=t}counter=0;nextId(){return`${this.prefix}${this.counter++}`}}class Eh extends Sh{fresh(){return Fe(this.nextId())}freshRigid(t){return Yi(this.nextId(),t)}instantiate(t,n,s=!1){const o=U(t.boundVarSet,Array.from,Me(({id:r,rigid:i})=>[r,s&&i?this.freshRigid(r):this.fresh()]),He.of);return{type:J.apply(o)(t.type),constrs:t.constrs.map(r=>U(r,Qs.of(n),J.applyConstrSourced(o)))}}}(function(e){e.empty=()=>({subst:J.empty(),constrs:[]}),e.unionConstrs=t=>n=>({subst:n.subst,constrs:Qs.union(n.constrs,t)}),e.compose2=(t,n)=>({subst:J.compose2(t.subst,n.subst),constrs:Qs.union(n.constrs.map(J.applyConstrSourced(t.subst)),t.constrs)}),e.compose=t=>t.reduceRight((n,s)=>e.compose2(s,n),e.empty())})(Ge||(Ge={}));(function(e){e.empty=()=>({...Ge.empty(),env:Zo.empty()}),e.ofEnv=t=>({...Ge.empty(),env:t})})(wl||(wl={}));(function(e){e.pure=t=>({type:t,subst:J.empty(),constrs:[]})})(Qn||(Qn={}));(function(e){e.wrapErr=t=>t.type==="Wrapped"?t:{type:"Wrapped",via:"PatErr",err:t}})(Fs||(Fs={}));(function(e){e.wrapErr=t=>t.type==="Wrapped"?t:{type:"Wrapped",via:"InstanceErr",err:t}})(vi||(vi={}));(function(e){e.wrapErr=t=>({type:"Wrapped",via:"ConstrsSolveErr",err:t})})(bi||(bi={}));const ga=class ga{bindingMap;bindingHostMap;bindingGroupsMap;symInfoMap;classMap;classInstanceMap;recordMap;tvs=new Eh("t");bindingEvidenceMap=te.empty();astTypeMap=te.empty();constructor(t,n,s,o,r,i,l){this.bindingMap=t,this.bindingHostMap=n,this.bindingGroupsMap=s,this.symInfoMap=o,this.classMap=r,this.classInstanceMap=i,this.recordMap=l}inferPat(t,n,s=Yo.empty()){return Be(t).with({ty:"wildcardPat"},()=>X({subst:{},env:{},type:this.tvs.fresh()})).with({ty:"numPat"},()=>X({env:{},type:G("Num")})).with({ty:"varPat"},({symId:o})=>{const r=o in s?s[o]:this.tvs.fresh();return X({env:{[o]:on.pure(r)},type:r})}).with({ty:"dataPat"},({args:o,con:{symId:r},astId:i})=>{const{type:l}=this.tvs.instantiate(n[r],[]),d=de.actualPat(l,i),a=de.inferFuncRet(this.tvs.fresh(),i);return me.fold(o,{env:n,argTypes:Array.of()},({env:u,argTypes:y},h)=>this.inferPat(h,u,s).map(({env:b,type:I})=>({env:{...u,...b},argTypes:[...y,I]}))).bind(({env:u,argTypes:y})=>ge.unify(d,de.actualFunc(mt(...y,a),i)).mapErr(Mt.wrapErr).map(h=>({env:J.applyEnv(h)(u),type:J.applySourced(h)(a)})))}).with({ty:"recordPat"},({con:o,fields:r,astId:i})=>{const l=o.id.id,{fieldDict:d,params:a,astId:u}=this.recordMap.get(l),y=U(a,Me(({id:b})=>[b,this.tvs.fresh()]),He.of),h=Ns(y);return me.fold(r,{env:n,state:Ge.empty()},({env:b,state:I},{key:{id:w,astId:$},pat:N})=>this.inferPat(N,b,s).bind(({type:C,env:V})=>ge.unify(C,de.expectRecordField(J.apply(y)(d[w].type),$,u)).mapErr(Mt.wrapErr).map(S=>({state:J.applyInferState(S)(I),env:{...b,...V}})))).map(({env:b,state:I})=>({type:de.actualPat(Ln(G(l),...h.map(J.apply(I.subst))),i),env:J.applyEnv(I.subst)(b)}))}).exhaustive().map(({type:o,env:r})=>({env:r,type:de.isSourced(o)?o:de.actualPat(o,t.astId)}))}inferInstance(t,n,s){const{bindingHost:o}=n,{scope:r}=this.bindingHostMap.get(o.astId),i=this.classMap.get(t.classId),l={[i.param.id]:t.arg},d=J.applyConstrs(l)(i.constrs),{envPreset:a,constrsPreset:u}=U([...r.entries()],Me(([y,h])=>{const b=i.members.get(y),{type:I,constrs:w}=U(b.sigType,on.free(i.param),J.applyScheme(l),$=>this.tvs.instantiate($,[]));return[[h.symId,de.expectClassMember(I,b.astId)],[h.symId,w]]}),Dy,([y,h])=>({envPreset:He.of(y),constrsPreset:He.of(h)}));return this.inferBindingHost(o,s,a).bind(({env:y,state:h})=>me.fold([...r.entries()],{env:y,state:h},({env:b,state:I},[w,$])=>{const N=i.members.get(w),C=u[$.symId],[V]=qe.asNodes($.source),S=b[$.symId].constrs,L=J.applyConstrs(I.subst)([...d,...C]),W=S.filter(ee=>!Zs.entail(L,ee));return W.length?ve({type:"ExtraConstrs",knownConstrs:L,extraConstrs:W,class:i.astId,decl:N.astId,def:V}):X({env:b,state:I})}))}inferBindingHost(t,n,s=Yo.empty()){return me.fold(t.bindings,{env:n,bindingTypeMap:te.empty()},({env:o,bindingTypeMap:r},i)=>this.inferPat(i.pat,o,s).mapErr(Fs.wrapErr).map(({env:l,type:d})=>({env:{...o,...l},bindingTypeMap:r.set(i.astId,d)}))).bind(({env:o,bindingTypeMap:r})=>this.inferBindingHostBody(t,o,r))}inferBindingHostBody(t,n,s){const{symSigDeclMap:o}=this.bindingHostMap.get(t.astId),r=this.bindingGroupsMap.get(t.astId);return me.fold(r,{state:Ge.empty(),env:n},({state:i,env:l},d)=>this.inferBindingGroup(d,s,o,l).map(({state:a,env:u})=>({state:Ge.compose2(a,i),env:{...l,...u}}))).map(({state:i,env:l})=>({state:i,env:l}))}solveConstrs(t,n){const s=sn.empty(()=>[]),o={paramCount:0,evidenceMap:s};this.bindingEvidenceMap.set(n.astId,o);const r=(i,l)=>{for(const d of i.sources)s.get(d).push(l)};return me.fold(t.constrs,{state:{subst:t.subst,constrs:[]}},({state:i},l)=>{const d=this.classInstanceMap.get(l.classId),a=de.constr(ge.rigidify(l.arg),l),u=d.map(b=>{const I=de.instance(b.arg,b);return{instance:b,unify:ge.unify(a,I)}}).filter(({unify:b})=>b.isOk).map(({instance:b,unify:I})=>({instance:b,subst:I.unwrap()}));if(u.length===0)return ge.isGround(a)?ve({type:"NoInstance",constr:l}):(r(l,Jo.param(o.paramCount++,a)),X({state:Ge.unionConstrs([l])(i)}));if(u.length>1)return ve({type:"AmbiguousInstance",constr:l,instances:u.map(gt("instance"))});const[{instance:y,subst:h}]=u;return r(J.applyConstrSourced(h)(l),Jo.instance(y.instanceId,y.symId)),X({state:{subst:J.compose2(h,i.subst),constrs:i.constrs}})})}inferBindingGroup({bindings:t,symIdSet:n},s,o,r){return me.fold(t,{env:r,state:Ge.empty()},({env:i,state:l},d)=>this.infer(d.body,i).bind(({type:a,...u})=>ge.unify(a,J.applySourced(u.subst)(s.get(d.astId))).bind(y=>{const h=J.applyInferState(y)(u),{symIdSet:b}=this.bindingMap.get(d.astId);return me.fold([...b].filter(te.keyOf(o)),{state:Ge.compose2(h,l),env:J.applyEnv(h.subst)(i)},({state:I,env:w},$)=>{const[N]=qe.asNodes(this.symInfoMap.get($).source),C=de.inferBindingVar(w[$].type,N,d.astId),{type:V,constrs:S}=this.tvs.instantiate(o.get($).sig.typeScheme,[],!0),L=de.annDecl(V,o.get($).astId,$);return ge.unify(C,L).map(W=>({state:J.applyInferState(W)(Ge.unionConstrs(S)(I)),env:J.applyEnv(W)(w)}))})}).mapErr(Mt.wrapErr).bind(({state:y,env:h})=>this.solveConstrs(y,d).mapErr(bi.wrapErr).map(({state:b})=>{const I=U(h,He.omitBySet(n),Ns(),Me(on.collectTypeVars),nn.union),w=U(h,He.pickBySet(n),Js(({type:$})=>ge.generalize($,b.constrs,I)));return{state:b,env:{...h,...w}}}))))}infer(t,n){return Be(t).with({ty:"num"},()=>X(Qn.pure(de.actual(G("Num"),t.astId)))).with({ty:"unit"},()=>X(Qn.pure(de.actual(G(""),t.astId)))).with({ty:"var"},({symId:s,astId:o})=>{const{type:r,constrs:i}=this.tvs.instantiate(n[s],[o]);return X({type:de.actual(r,t.astId),subst:{},constrs:i})}).with({ty:"char"},()=>X(Qn.pure(de.actual(G("Char"),t.astId)))).with({ty:"str"},()=>X(Qn.pure(de.actual(xn(G("[]"),G("Char")),t.astId)))).with({ty:"lambda"},({param:s,body:o})=>this.inferPat(s,n).mapErr(Fs.wrapErr).bind(({env:r,type:i})=>this.infer(o,{...n,...r}).map(({type:l,subst:d,constrs:a})=>({type:de.actual(fs(J.apply(d)(i),l),t.astId),subst:d,constrs:a})))).with({ty:"apply"},({func:s,arg:o})=>this.infer(s,n).bind(({type:r,...i})=>this.infer(o,J.applyEnv(i.subst)(n)).bind(({type:l,...d})=>{const a=J.applySourced(d.subst)(r),u=de.inferFuncRet(this.tvs.fresh(),s.astId),y=de.actualFunc(fs(l,u),t.astId),h=Ge.compose2(d,i);return ge.unify(a,y).mapErr(Mt.wrapErr).map(b=>J.applyInfer(b)({...h,type:u}))}))).with({ty:"let"},({bindingHost:s,body:o})=>this.inferBindingHost(s,n).bind(({env:r,state:i})=>this.infer(o,{...n,...r}).map(({type:l,...d})=>({type:l,...Ge.compose2(d,i)})))).with({ty:"case"},({scrutinee:s,branches:o})=>this.infer(s,n).bind(({type:r,...i})=>{const l=J.applyEnv(i.subst)(n),d=Vy(de.inferCase(this.tvs.fresh(),t.astId));return me.fold(o,{type:d,...i},({type:a,...u},y)=>this.inferPat(y.pat,l).mapErr(Fs.wrapErr).bind(({env:h,type:b})=>ge.unify(J.applySourced(u.subst)(r),b).mapErr(Mt.wrapErr).bind(I=>{const w=J.applyInferState(I)(u);return this.infer(y.body,J.applyEnv(w.subst)({...l,...h})).bind(({type:$,...N})=>{const C=Ge.compose2(N,w);return ge.unify(J.applySourced(C.subst)(a),$).mapErr(Mt.wrapErr).map(V=>J.applyInfer(V)({type:a,...C}))})})))})).with({ty:"cond"},({cond:s,yes:o,no:r})=>this.infer(s,n).bind(({type:i,...l})=>ge.unify(i,de.expectCond(G("Bool"),t.astId)).mapErr(Mt.wrapErr).bind(d=>{const a=J.applyInferState(d)(l),u=J.applyEnv(a.subst)(n);return this.infer(o,u).bind(({type:y,...h})=>this.infer(r,J.applyEnv(h.subst)(u)).bind(({type:b,...I})=>ge.unify(y,b).mapErr(Mt.wrapErr).map(w=>J.applyInfer(w)({type:b,...Ge.compose([I,h,a])}))))}))).with({ty:"ann"},({expr:s,ann:o,astId:r})=>this.infer(s,n).bind(({type:i,...l})=>{const{type:d,constrs:a}=this.tvs.instantiate(o.typeScheme,[],!0),u=de.annAnn(d,s.astId);return ge.unify(i,u).mapErr(Mt.wrapErr).map(y=>J.applyInfer(y)({type:u,...Ge.unionConstrs(a)(l)}))})).with({ty:"record"},({con:s,fields:o,astId:r})=>{const i=s.id.id,{fieldDict:l,params:d,astId:a}=this.recordMap.get(i),u=U(d,Me(({id:b})=>[b,this.tvs.fresh()]),He.of),y=Ns(u),h=U(o,Me(({key:{id:b,astId:I},val:w})=>({id:b,val:w,type:de.expectRecordField(J.apply(u)(l[b].type),I,a)})));return me.fold(h,Ge.empty(),(b,{type:I,val:w})=>this.infer(w,n).bind(({type:$,...N})=>ge.unify(J.applySourced(N.subst)(I),$).mapErr(Mt.wrapErr).map(C=>J.applyInferState(C)(Ge.compose2(N,b))))).map(b=>({...b,type:de.actualRecord(Ln(G(i),...y.map(J.apply(b.subst))),r)}))}).exhaustive().tap(({type:s})=>{this.astTypeMap.set(t.astId,s)})}};Hn(ga);let gi=ga;const xh=(e,t)=>{const{nameResolve:{bindingMap:n,bindingHostMap:s,instanceMap:o,exportInfo:{dataMap:r,recordMap:i,classMap:l,classInstanceMap:d},importMap:a,symInfoMap:u},bindingGroupResolve:{bindingGroupsMap:y},semanticsDesugar:{mod:h}}=t.use(e,["bindingGroupResolve","semanticsDesugar","nameResolve"]),b=Zo.empty();for(const[V,S]of a){const{typeCheck:{typeEnvIntro:L}}=t.use(V,["typeCheck"]);for(const W of S.byType.get("binding").values())b[W.symId]=L[W.originSymId]}const I=U(r.values(),dt.toArray,zo(_o.getTypedIds),Me(({symId:V,type:S})=>[V,S]),He.of),w=U(l.values(),dt.toArray,zo(hi.getTypedIds),Me(({symId:V,type:S})=>[V,S]),He.of),$={...fh,...b},N={...$,...I,...w},C=new gi(n,s,y,u,l,d,i);return me.fold(h.instanceDefs,{env:N},({env:V},S)=>C.inferInstance(o.get(S.astId),S,V).mapErr(vi.wrapErr)).bind(({env:V})=>C.inferBindingHost(h.bindingHost,V)).map(({env:V,state:S})=>({typeEnv:V,typeEnvIntro:U(V,Yu(vr($))),...Zu(C,["bindingEvidenceMap","astTypeMap"]),typeInferState:S}))};var Mt,Ge,wl,Qn,Fs,vi,bi;const Ch={bindingHost:(e,t)=>{const n=te.empty(),s=t.fork({bindingRemap:n}).transformDefault(e);return t.bindingGroupsMap.get(e.astId).forEach(r=>{r.bindings=r.bindings.map(i=>n.get(i.astId)??i)}),s},binding:(e,t)=>{const{paramCount:n,evidenceMap:s}=t.bindingEvidenceMap.get(e.astId),o=Gi(n,t.sis.next),i={dictArgs:o.map((d,a)=>t.nf.makeVar(`!dict${a}`,d)),evidenceMap:s};t=t.fork({evidenceState:i});const l={...e,body:t.nf.makeLambdaMulti(o.map((d,a)=>t.nf.makeVarPat(`!dict${a}`,d)),t.transform(e.body))};return t.bindingRemap.set(e.astId,l),l},var:(e,t)=>{const{evidenceMap:n,dictArgs:s}=t.evidenceState,o=n.get(e.astId);return o.length&&console.log(o),t.nf.makeApplyMulti([e,...o.map(r=>Be(r).with({type:"param"},({ix:i})=>s[i]).with({type:"instance"},({symId:i,instanceId:l})=>t.nf.makeVar(l,i)).exhaustive())])}},$h=(e,t)=>{const{parse:{ais:n,nodeMap:s},semanticsDesugar:{mod:o},nameResolve:{sis:r,exportInfo:{classMap:i},instanceMap:l,bindingHostMap:d},bindingGroupResolve:{bindingGroupsMap:a},typeCheck:{bindingEvidenceMap:u,typeEnv:y}}=t.use(e,["parse","semanticsDesugar","nameResolve","bindingGroupResolve","typeCheck"]),h=new ds(cs.of(n,s)),I=Ji(()=>({}),Ch)({nf:h,sis:r,bindingEvidenceMap:u,evidenceState:null,bindingRemap:null,bindingGroupsMap:a}),w=[...i],$=w.map(([ne,{param:Z,members:ue}])=>h.make({ty:"recordDef",id:h.makeId(`!Dict.${ne}`),params:[h.make({ty:"type",type:Z})],fields:[...ue].map(([Ue,{sigType:Ke}])=>h.make({ty:"recordDefField",key:h.makeId(Ue),type:h.make({ty:"type",type:{ty:"forall",...Ke,boundVarSet:Ke.boundVarSet.clone().delete(Z)}})}))})),N=o.instanceDefs.map(ne=>{const{instanceId:Z,classId:ue,symId:Ue,arg:Ke}=l.get(ne.astId),{members:It,symId:zn}=i.get(ue),{scope:Je}=d.get(ne.bindingHost.astId);return y[Ue]=on.pure(xn(G(`!Dict.${ue}`),Ke)),h.make({ty:"binding",pat:h.makeVarPat(Z,Ue),body:h.make({ty:"let",bindingHost:I.transform(ne.bindingHost),body:h.make({ty:"record",con:h.makeVarRef(`!Dict.${ue}`,zn),fields:[...It.keys()].map(xe=>h.make({ty:"recordBindingField",key:h.makeId(xe),val:h.makeVar(xe,Je.get(xe).symId)}))})})})}),C=Oe.empty(),V=w.flatMap(([ne,{members:Z,symId:ue}])=>[...Z].map(([Ue,{symId:Ke}])=>{const It=r.next();return C.add(Ke),h.make({ty:"binding",pat:h.makeVarPat(Ue,Ke),body:h.make({ty:"lambda",param:h.make({ty:"recordPat",con:h.makeVarRef(`!Dict.${ne}`,ue),fields:[h.make({ty:"recordPatRebindingField",key:h.makeId(Ue),pat:h.makeVarPat("!member",It)})]}),body:h.makeVar("!member",It)})})})),S=a.get(o.bindingHost.astId),L={id:-2,symIdSet:U(l.values(),dt.map(ne=>ne.symId),Oe.of),bindings:N},W={id:-1,symIdSet:C,bindings:V};S.unshift(L,W);const ee=I.transform(o.bindingHost),ie={...o,classDefs:[],instanceDefs:[],recordDefs:[...$,...o.recordDefs],bindingHost:{...ee,bindings:[...N,...V,...ee.bindings]}};return X({mod:ie})};var Td;Td=Symbol.iterator;class Ht{parent;static builtin(){const t=new Ht(null);for(const{id:n,value:s}of ch)t.register(`Builtin:${n}`,s);return t}static global(){return new Ht(Ht.builtin())}static derive(t){return new Ht(t)}valueMap=te.empty();constructor(t=null){this.parent=t}lookup(t){return this.valueMap.get(t)??this.parent?.lookup(t)??null}register(t,n){const s={value:n};return this.valueMap.set(t,s),s}preserve(t){this.valueMap.set(t,{value:null})}[Td](){return this.valueMap[Symbol.iterator]()}}class Fr extends Error{name="EvalError"}const va=class va{bindingGroupsMap;constructor(t){this.bindingGroupsMap=t}matchPat(t,n,s,o){switch(t.ty){case"wildcardPat":return Yn.empty;case"numPat":return!tn.is(n,["num"])||n.val!==t.val?null:Yn.empty;case"varPat":if(!o)return()=>{s.register(t.symId,n)};{const r=s.lookup(t.symId);return()=>{r.value=n}}case"dataPat":{if(!tn.is(n,["data"])||n.con!==t.con.symId)return null;const r=[];for(const[i,l]of Ys(t.args,n.args)){const d=this.matchPat(i,l,s,o);if(!d)return null;r.push(d)}return Yn.sequenceV(r)}case"recordPat":{if(!tn.is(n,["record"])||n.con!==t.con.symId)return null;const r=[];for(const[i,l]of Ys(t.fields,n.fields)){const d=this.matchPat(i.pat,l,s,o);if(!d)return null;r.push(d)}return Yn.sequenceV(r)}}}matchPatOrThrow(t,n,s,o){const r=this.matchPat(t,n,s,o);if(!r)throw console.log(t,n),new Fr("Non-exhaustive patterns.");r()}evaluateBindingHost(t,n){const s=this.bindingGroupsMap.get(t.astId);for(const o of s){for(const r of o.symIdSet)n.preserve(r);for(const r of o.bindings){const i=this.evaluate(r.body,n);this.matchPatOrThrow(r.pat,i,n,!0)}}}evaluate(t,n){switch(t.ty){case"num":return ld(t.val);case"char":return hl(t.val);case"unit":return ud();case"str":return jy([...t.val].map(hl));case"cond":{const s=this.evaluate(t.cond,n);tn.assert(s,["data"]);const o=s.con==="Builtin:True";return this.evaluate(o?t.yes:t.no,n)}case"record":return Hy(t.con.symId,t.fields.map(s=>this.evaluate(s.val,n)));case"ann":return this.evaluate(t.expr,n);case"var":{const s=n.lookup(t.symId);if(!s.value)throw new Fr(`Uninitialized variable #${t.symId}`);return s.value}case"let":{const s=Ht.derive(n);return this.evaluateBindingHost(t.bindingHost,s),this.evaluate(t.body,s)}case"lambda":return Xi(s=>{const o=Ht.derive(n);return this.matchPatOrThrow(t.param,s,o,!1),this.evaluate(t.body,o)});case"apply":{const s=this.evaluate(t.func,n);tn.assert(s,["func"]);const o=this.evaluate(t.arg,n);return s.func(o)}case"case":{const s=this.evaluate(t.scrutinee,n);for(const o of t.branches){const r=Ht.derive(n),i=this.matchPat(o.pat,s,r,!1);if(i)return i(),this.evaluate(o.body,r)}throw new Fr("Non-exhaustive patterns in case.")}}}};Hn(va);let ki=va;const Ph=(e,t)=>{const{nameResolve:{importMap:n},bindingGroupResolve:{bindingGroupsMap:s},classDesugar:{mod:o}}=t.use(e,["nameResolve","bindingGroupResolve","classDesugar"]),r=new ki(s);return me.wrap(()=>{const i=Ht.global();for(const[d,a]of n){const{evaluate:{introScope:u}}=t.use(d,["evaluate"]);for(const y of a.byType.get("binding").values()){const h=u.lookup(y.originSymId);i.register(y.symId,h.value)}}const l=Ht.derive(i);return r.evaluateBindingHost(o.bindingHost,l),{globalScope:i,introScope:l}})};class Br extends Error{name="PipelineError"}const Nd=["parse","syntaxDesugar","modResolve","nameResolve","semanticsDesugar","kindCheck","bindingGroupResolve","typeCheck","classDesugar","evaluate"];(function(e){e.ok=(t,n)=>({status:"ok",output:t,time:n}),e.err=(t,n)=>({status:"err",err:t,time:n}),e.pending=()=>({status:"pending"})})(tr||(tr={}));class Dh{passSeq;modStates;constructor(t,n={}){this.passSeq=t,this.modStates=n}log(t,...n){console.log(`[ModStore] ${t}`,...n)}error(t,...n){console.error(`[ModStore] ${t}`,...n)}create(t,n){this.modStates[t]={source:n,parse:{status:"pending"},syntaxDesugar:{status:"pending"},modResolve:{status:"pending"},nameResolve:{status:"pending"},semanticsDesugar:{status:"pending"},kindCheck:{status:"pending"},bindingGroupResolve:{status:"pending"},typeCheck:{status:"pending"},classDesugar:{status:"pending"},evaluate:{status:"pending"}}}load(t){throw new Br("Loading mod by id is not supported yet.")}get(t){return this.modStates[t]}has(t){return t in this.modStates}use(t,n){const s=this.modStates[t];if(!s)throw new Br(`Module not found in pipeline store: <${t}>`);const o={source:s.source};for(const r of n){const i=s[r];if(i.status!=="ok")throw new Br(`Required pass not completed successfully: <${r}> for module <${t}>`);o[r]=i.output}return o}handle(t,n,s){try{const o=Date.now(),r=s(),l=Date.now()-o;return this.log(`handle pass <${n}> for module <${t}> (${r.isOk?"ok":"err"}, ${l}ms):`,r.union()),this.modStates[t][n]=r.match(d=>tr.ok(d,l),d=>tr.err(d,l)),r.isOk||this.clearAfter(t,n),{isOk:r.isOk,pass:n}}catch(o){return this.error(`handle pass <${n}> for module <${t}> (exception):`,o),this.clearAfter(t,n),{isOk:!1,pass:n}}}clearAfter(t,n){const s=this.passSeq.indexOf(n);for(const o of this.passSeq.slice(s+1))this.modStates[t][o]={status:"pending"}}}class Vh{graph=eo.emptyD();addDep(t,n){this.graph.get(t).add(n)}getDeps(t){return this.graph.get(t)}}const Ls=class Ls{passSeq;passActions;store;graph;constructor(t={},n=Ls.passSeq){this.passSeq=n,this.passActions={parse:rh,syntaxDesugar:ah,modResolve:lh,nameResolve:yh,semanticsDesugar:hh,kindCheck:Ih,bindingGroupResolve:Mh,typeCheck:xh,classDesugar:$h,evaluate:Ph},this.store=new Dh(n,t),this.graph=new Vh}loadStd(){this.load("Prelude",vh.Prelude)}load(t,n){this.store.create(t,n);for(const s of this.passSeq)if(!this.store.handle(t,s,()=>this.passActions[s](t,this.store,this.graph)).isOk)break;return this.store.get(t)}};Sa(Ls,"passSeq",Nd),Hn(Ls);let Ii=Ls;var tr;function Od(e){return Ol()?(nc(e),!0):!1}function Ah(e){if(!fe(e))return is(e);const t=new Proxy({},{get(n,s,o){return T(Reflect.get(e.value,s,o))},set(n,s,o){return fe(e.value[s])&&!fe(o)?e.value[s].value=o:e.value[s]=o,!0},deleteProperty(n,s){return Reflect.deleteProperty(e.value,s)},has(n,s){return Reflect.has(e.value,s)},ownKeys(){return Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return is(t)}function Rh(e){return Ah(Ne(e))}const Th=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Nh=Object.prototype.toString,Oh=e=>Nh.call(e)==="[object Object]",Fh=()=>{};function Bh(...e){if(e.length!==1)return Pc(...e);const t=e[0];return typeof t=="function"?Eo(eu(()=>({get:t,set:Fh}))):ut(t)}function Fd(e,...t){const n=t.flat(),s=n[0];return Rh(()=>Object.fromEntries(typeof s=="function"?Object.entries(xc(e)).filter(([o,r])=>s(ns(r),o)):n.map(o=>[o,Bh(e,o)])))}function wo(e){return Array.isArray(e)?e:[e]}function Lh(e){return hs()}function Hh(e,t=!0,n){Lh()?as(e,n):t?e():su(e)}function Uh(e,t,n){return Pt(e,t,{...n,immediate:!0})}const ua=Th?window:void 0;function Rn(e){var t;const n=ns(e);return(t=n?.$el)!=null?t:n}function Tn(...e){const t=[],n=()=>{t.forEach(l=>l()),t.length=0},s=(l,d,a,u)=>(l.addEventListener(d,a,u),()=>l.removeEventListener(d,a,u)),o=Ne(()=>{const l=wo(ns(e[0])).filter(d=>d!=null);return l.every(d=>typeof d!="string")?l:void 0}),r=Uh(()=>{var l,d;return[(d=(l=o.value)==null?void 0:l.map(a=>Rn(a)))!=null?d:[ua].filter(a=>a!=null),wo(ns(o.value?e[1]:e[0])),wo(T(o.value?e[2]:e[1])),ns(o.value?e[3]:e[2])]},([l,d,a,u])=>{if(n(),!l?.length||!d?.length||!a?.length)return;const y=Oh(u)?{...u}:u;t.push(...l.flatMap(h=>d.flatMap(b=>a.map(I=>s(h,b,I,y)))))},{flush:"post"}),i=()=>{r(),n()};return Od(n),i}function jh(){const e=Co(!1),t=hs();return t&&as(()=>{e.value=!0},t),e}function qh(e){const t=jh();return Ne(()=>(t.value,!!e()))}function zh(e,t,n={}){const{window:s=ua,...o}=n;let r;const i=qh(()=>s&&"ResizeObserver"in s),l=()=>{r&&(r.disconnect(),r=void 0)},d=Ne(()=>{const y=ns(e);return Array.isArray(y)?y.map(h=>Rn(h)):[Rn(y)]}),a=Pt(d,y=>{if(l(),i.value&&s){r=new ResizeObserver(t);for(const h of y)h&&r.observe(h,o)}},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return Od(u),{isSupported:i,stop:u}}function Wh(e,t={width:0,height:0},n={}){const{window:s=ua,box:o="content-box"}=n,r=Ne(()=>{var y,h;return(h=(y=Rn(e))==null?void 0:y.namespaceURI)==null?void 0:h.includes("svg")}),i=Co(t.width),l=Co(t.height),{stop:d}=zh(e,([y])=>{const h=o==="border-box"?y.borderBoxSize:o==="content-box"?y.contentBoxSize:y.devicePixelContentBoxSize;if(s&&r.value){const b=Rn(e);if(b){const I=b.getBoundingClientRect();i.value=I.width,l.value=I.height}}else if(h){const b=wo(h);i.value=b.reduce((I,{inlineSize:w})=>I+w,0),l.value=b.reduce((I,{blockSize:w})=>I+w,0)}else i.value=y.contentRect.width,l.value=y.contentRect.height},n);Hh(()=>{const y=Rn(e);y&&(i.value="offsetWidth"in y?y.offsetWidth:t.width,l.value="offsetHeight"in y?y.offsetHeight:t.height)});const a=Pt(()=>Rn(e),y=>{i.value=y?t.width:0,l.value=y?t.height:0});function u(){d(),a()}return{width:i,height:l,stop:u}}const Gh=()=>({hoveringLoc:null,selectedLoc:null}),Lr=e=>{if(!e.node.astId)return!0;const t=e.path?.at(-1)??null;return!!(e.node.ty==="id"&&t&&Go.is(t,["var","varPat","varRef"]))},Bd=(e,t,n)=>(Tn(e,"mousemove",s=>{Lr(n)||(s.stopPropagation(),t.hoveringLoc=n)}),Tn(e,"mouseleave",()=>{t.hoveringLoc?.node.astId===n.node.astId&&(t.hoveringLoc=null)}),Tn(e,"click",s=>{Lr(n)||(s.stopPropagation(),t.selectedLoc=t.selectedLoc?.node.astId===n.node.astId?null:n)}),{classes:Ne(()=>Lr(n)?{hovering:!1,selected:!1}:{hovering:t.hoveringLoc?.node.astId===n.node.astId,selected:t.selectedLoc?.node.astId===n.node.astId})}),Kh=e=>{if(e===null)return null;try{return JSON.parse(e)}catch{return null}},nt=(e,t)=>{const n=Kh(localStorage.getItem(e)),s=ut(n??t);return Pt(s,o=>{localStorage.setItem(e,JSON.stringify(o))}),s},Jh={class:"pass"},Yh={key:0,class:"pass-time node-spaced-left"},Zh={ref:"sectionMainEl",class:"main"},Qh={key:2,class:"obscure"},Xh=le({__name:"PassSection",props:{pass:{},modId:{},stateMap:{}},setup(e){const t=e,n=Ne(()=>t.stateMap[t.pass]),s=nt(`folded.${t.modId}.${t.pass}.section`,!1);return(o,r)=>(c(),p("section",{class:ot([n.value.status,T(s)?"folded":null])},[x("div",{onClick:r[0]||(r[0]=i=>s.value=!T(s)),class:"badge"},[x("span",Jh,ce(e.pass),1),n.value.status!=="pending"?(c(),p("span",Yh,ce(n.value.time)+"ms",1)):F("",!0)]),lu(x("div",Zh,[n.value.status==="ok"?Ao(o.$slots,"ok",{key:0,output:n.value.output},void 0,!0):n.value.status==="err"?Ao(o.$slots,"err",{key:1,err:n.value.err},void 0,!0):n.value.status==="pending"?(c(),p("span",Qh,"Skipped")):F("",!0)],512),[[Zf,!T(s)]])],2))}}),jn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},Kt=jn(Xh,[["__scopeId","data-v-c69ac4ad"]]),Ld=Symbol("modStates"),uo=Symbol("nodeSelection"),fn=Symbol("outputs"),da=Symbol("typeShowPrettyIds"),ca=Symbol("typeSchemeImplicit"),Mo=le({__name:"ConstrV",props:{constr:{}},setup(e){return(t,n)=>(c(),Y(qn,{class:"constr",type:T(xn)(T(G)(e.constr.classId),e.constr.arg)},null,8,["type"]))}}),_h={key:0,class:"node-spaced-right"},wi=le({__name:"ConstrsV",props:{constrs:{}},setup(e){return(t,n)=>(c(),p("span",{class:ot(["constrs node",{"node-paren":e.constrs.length!==1}])},[(c(!0),p(g,null,q(e.constrs,(s,o)=>(c(),p("span",{key:o},[m(Mo,{constr:s},null,8,["constr"]),o<e.constrs.length-1?(c(),p("span",_h,",")):F("",!0)]))),128))],2))}}),eg=["data-ty"],tg={key:0},ng={key:1,class:"node-con"},sg={key:0,class:"node-spaced-right"},og={key:0,class:"node-op node-spaced"},rg={key:0},ig={key:0},ag={key:1},lg=le({__name:"TypeDescV",props:{type:{},parent:{}},setup(e){const t=e,n=Ne(()=>ge.checkParen(t.type,t.parent)),s=We(da)??ut(!0),o=We(ca)??ut(!1);return(r,i)=>{const l=so("TypeDescV",!0);return c(),p("span",{class:ot(["type",{"node-paren":n.value}]),"data-ty":e.type.ty},[e.type.ty==="var"?(c(),p("span",{key:0,class:ot(["type-var","node-special",{rigid:e.type.rigid}])},ce(e.type.rigid&&T(s)?e.type.customId:e.type.id),3)):e.type.ty==="con"?(c(),p(g,{key:1},[e.type.id==="[]"?(c(),p("span",tg,"[]")):(c(),p("span",ng,ce(e.type.id),1))],64)):e.type.ty==="tuple"?(c(),p(g,{key:2},[i[0]||(i[0]=M(" (",-1)),(c(!0),p(g,null,q(e.type.args,(d,a)=>(c(),p(g,{key:a},[m(l,{type:d,parent:e.type},null,8,["type","parent"]),a+1<e.type.args.length?(c(),p("span",sg,",")):F("",!0)],64))),128)),i[1]||(i[1]=M(") ",-1))],64)):e.type.ty==="list"?(c(),p(g,{key:3},[i[2]||(i[2]=M(" [",-1)),m(l,{type:e.type.arg,parent:e.type},null,8,["type","parent"]),i[3]||(i[3]=M("] ",-1))],64)):e.type.ty==="func"?(c(!0),p(g,{key:4},q(e.type.args,(d,a)=>(c(),p(g,{key:a},[m(l,{type:d,parent:e.type},null,8,["type","parent"]),a+1<e.type.args.length?(c(),p("span",og,"->")):F("",!0)],64))),128)):e.type.ty==="apply"?(c(!0),p(g,{key:5},q(e.type.args,(d,a)=>(c(),p(g,{key:a},[m(l,{type:d,parent:e.type},null,8,["type","parent"]),a+1<e.type.args.length?(c(),p("span",rg,"")):F("",!0)],64))),128)):e.type.ty==="forall"?(c(),p(g,{key:6},[!T(o)&&e.type.boundVarSet.size?(c(),p("span",ig,[i[4]||(i[4]=x("span",{class:"node-sym"},"",-1)),(c(!0),p(g,null,q(e.type.boundVarSet,(d,a)=>(c(),Y(l,{key:d.id,type:d,parent:null,class:ot({"node-spaced-left":a>0})},null,8,["type","class"]))),128)),i[5]||(i[5]=x("span",{class:"node-sym node-spaced-right"},".",-1))])):F("",!0),e.type.constrs.length?(c(),p("span",ag,[m(wi,{constrs:e.type.constrs},null,8,["constrs"]),i[6]||(i[6]=x("span",{class:"node-sym node-spaced"},"=>",-1))])):F("",!0),m(l,{type:e.type.type,parent:e.type},null,8,["type","parent"])],64)):F("",!0)],10,eg)}}}),qn=le({__name:"TypeV",props:{type:{},hasParent:{type:Boolean}},setup(e){const t=e,n=Ne(()=>ge.describe(t.type)),s=Ne(()=>t.hasParent?{ty:"dummy",inner:n.value}:null);return(o,r)=>(c(),Y(lg,{type:n.value,parent:s.value},null,8,["type","parent"]))}}),ug={class:"type-scheme"},dg=le({__name:"TypeSchemeV",props:{typeScheme:{},isImplicit:{type:Boolean}},setup(e){const t=e;return kn(ca,Ne(()=>t.isImplicit)),(n,s)=>(c(),p("div",ug,[m(qn,{type:{ty:"forall",...e.typeScheme},parent:null},null,8,["type"])]))}}),fa=jn(dg,[["__scopeId","data-v-2927ec99"]]),cg=["data-ty","data-id"],fg={key:0,class:"node-lit"},pg={key:2,class:"node-lit"},yg={key:3,class:"node-lit"},mg={class:"node-inline-block"},hg={class:"node-inline-block"},gg={key:16,class:"node-lit"},vg={key:0,class:"node-spaced-right"},bg={key:0,class:"node-spaced"},kg={key:24,class:"node-sym"},Ig={key:0,class:"node-spaced-right"},wg={key:0,class:"node-spaced-right"},Mg={key:0,class:"node-spaced-right"},Sg={key:0,class:"node-spaced-right"},Eg={class:"node-inline-block"},xg={key:0,class:"node-spaced-right"},Cg={key:0,class:"node-spaced-right"},$g={key:0,class:"node-spaced-right"},Pg={class:"node-kw node-spaced-right"},Dg={class:"node-lit node-spaced-right"},Vg={key:0,class:"node-spaced-right"},Ag={key:0,class:"node-sym node-spaced"},Rg={key:0,class:"node-sym node-spaced-right"},Tg={key:0,class:"node-kw"},Ng={key:0,class:"node-spaced-right"},Ee=le({__name:"NodeV",props:{node:{},path:{default:()=>[]},isBrief:{type:Boolean}},setup(e){const t=e,n=We(uo),s=os("node"),{classes:o}=Bd(s,n,Fd(t,["node","path"])),r=Ne(()=>t.path.at(-1)??null),i=Ne(()=>[...t.path,t.node]),l=Ne(()=>Go.checkParen(t.node,r.value));return(d,a)=>{const u=so("NodeV",!0);return c(),p("span",{class:ot(["node",{...T(o),"node-root":!r.value,"node-host":e.node.ty==="mod"||e.node.ty==="bindingHost","node-paren":l.value}]),ref:"node","data-ty":e.node.ty,"data-id":e.node.astId},[e.node.ty==="num"?(c(),p("span",fg,ce(e.node.val),1)):e.node.ty==="unit"?(c(),p(g,{key:1},[M(" () ")],64)):e.node.ty==="char"?(c(),p("span",pg,ce(T(us)(e.node.val,"'")),1)):e.node.ty==="str"?(c(),p("span",yg,ce(T(us)(e.node.val,'"')),1)):e.node.ty==="var"?(c(),Y(u,{key:4,node:e.node.id,path:i.value},null,8,["node","path"])):e.node.ty==="id"?(c(),p("span",{key:5,class:ot({big:"node-con",small:"node-var",sym:"node-op",other:null}[e.node.style])},ce(e.node.id),3)):e.node.ty==="roll"?(c(),p(g,{key:6},[e.node.times?(c(),Y(u,{key:0,node:e.node.times,path:i.value},null,8,["node","path"])):F("",!0),a[0]||(a[0]=x("span",{class:"node-sym"},"@",-1)),m(u,{node:e.node.sides,path:i.value},null,8,["node","path"])],64)):e.node.ty==="cond"?(c(),p(g,{key:7},[a[3]||(a[3]=x("span",{class:"node-kw"},"if",-1)),m(u,{node:e.node.cond,path:i.value},null,8,["node","path"]),x("div",mg,[a[1]||(a[1]=x("span",{class:"node-kw"},"then",-1)),m(u,{node:e.node.yes,path:i.value},null,8,["node","path"])]),x("div",hg,[a[2]||(a[2]=x("span",{class:"node-kw"},"else",-1)),m(u,{node:e.node.no,path:i.value},null,8,["node","path"])])],64)):e.node.ty==="let"?(c(),p(g,{key:8},[a[5]||(a[5]=x("span",{class:"node-kw"},"let",-1)),m(u,{node:e.node.bindingHost,path:i.value},null,8,["node","path"]),x("div",null,[a[4]||(a[4]=x("span",{class:"node-kw"},"in",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])])],64)):e.node.ty==="binding"?(c(),p(g,{key:9},[m(u,{node:e.node.pat,path:i.value},null,8,["node","path"]),a[6]||(a[6]=x("span",{class:"node-sym node-spaced"},"=",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])],64)):e.node.ty==="equationApplyHead"||e.node.ty==="equationApplyFlattenHead"?(c(),p(g,{key:10},[m(u,{node:e.node.func,path:i.value},null,8,["node","path"]),(c(!0),p(g,null,q(e.node.params,y=>(c(),Y(u,{node:y,path:i.value,class:"node-spaced-left"},null,8,["node","path"]))),256))],64)):e.node.ty==="equationInfixHead"?(c(),p(g,{key:11},[m(u,{node:e.node.lhs,path:i.value},null,8,["node","path"]),m(u,{node:e.node.op,path:i.value,class:"node-spaced"},null,8,["node","path"]),m(u,{node:e.node.rhs,path:i.value},null,8,["node","path"])],64)):e.node.ty==="equation"?(c(),p(g,{key:12},[m(u,{node:e.node.head,path:i.value},null,8,["node","path"]),a[7]||(a[7]=x("span",{class:"node-sym node-spaced"},"=",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])],64)):e.node.ty==="case"?(c(),p(g,{key:13},[a[8]||(a[8]=x("span",{class:"node-kw"},"case",-1)),m(u,{node:e.node.scrutinee,path:i.value},null,8,["node","path"]),a[9]||(a[9]=x("span",{class:"node-kw node-spaced"},"of",-1)),(c(!0),p(g,null,q(e.node.branches,(y,h)=>(c(),p("div",{key:h,class:"node-inline-block"},[m(u,{node:y,path:i.value},null,8,["node","path"])]))),128))],64)):e.node.ty==="caseBranch"?(c(),p(g,{key:14},[m(u,{node:e.node.pat,path:i.value},null,8,["node","path"]),a[10]||(a[10]=x("span",{class:"node-sym node-spaced"},"->",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])],64)):e.node.ty==="varPat"?(c(),Y(u,{key:15,node:e.node.id,path:i.value},null,8,["node","path"])):e.node.ty==="numPat"?(c(),p("span",gg,ce(e.node.val),1)):e.node.ty==="unitPat"?(c(),p(g,{key:17},[M(" () ")],64)):e.node.ty==="dataPat"?(c(),p(g,{key:18},[m(u,{node:e.node.con,path:i.value},null,8,["node","path"]),(c(!0),p(g,null,q(e.node.args,y=>(c(),p(g,null,[a[11]||(a[11]=x("span",{class:"node-spaced-right"},null,-1)),m(u,{node:y,path:i.value},null,8,["node","path"])],64))),256))],64)):e.node.ty==="recordPatPunningField"?(c(),Y(u,{key:19,node:e.node.key,path:i.value},null,8,["node","path"])):e.node.ty==="recordPatRebindingField"?(c(),p(g,{key:20},[m(u,{node:e.node.key,path:i.value},null,8,["node","path"]),a[12]||(a[12]=x("span",{class:"node-sym"},"@",-1)),m(u,{node:e.node.pat,path:i.value},null,8,["node","path"])],64)):e.node.ty==="recordPat"?(c(),p(g,{key:21},[m(u,{node:e.node.con,path:i.value,class:"node-spaced-right"},null,8,["node","path"]),a[13]||(a[13]=x("span",{class:"node-spaced-right"},"{",-1)),(c(!0),p(g,null,q(e.node.fields,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.fields.length-1?(c(),p("span",vg,",")):F("",!0)],64))),256)),a[14]||(a[14]=x("span",{class:"node-spaced-left"},"}",-1))],64)):e.node.ty==="infixPat"?(c(!0),p(g,{key:22},q(e.node.args,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.args.length-1?(c(),p("span",bg,[m(u,{node:e.node.ops[h],path:i.value},null,8,["node","path"])])):F("",!0)],64))),256)):e.node.ty==="varRef"?(c(),Y(u,{key:23,node:e.node.id,path:i.value},null,8,["node","path"])):e.node.ty==="wildcardPat"?(c(),p("span",kg,"_")):e.node.ty==="listPat"?(c(),p(g,{key:25},[a[15]||(a[15]=M(" [",-1)),(c(!0),p(g,null,q(e.node.elems,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.elems.length-1?(c(),p("span",Ig,",")):F("",!0)],64))),256)),a[16]||(a[16]=M("] ",-1))],64)):e.node.ty==="tuplePat"?(c(),p(g,{key:26},[a[17]||(a[17]=M(" (",-1)),(c(!0),p(g,null,q(e.node.elems,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.elems.length-1?(c(),p("span",wg,",")):F("",!0)],64))),256)),a[18]||(a[18]=M(") ",-1))],64)):e.node.ty==="recordPunningField"?(c(),Y(u,{key:27,node:e.node.key,path:i.value},null,8,["node","path"])):e.node.ty==="recordBindingField"?(c(),p(g,{key:28},[m(u,{node:e.node.key,path:i.value},null,8,["node","path"]),e.node.val?(c(),p(g,{key:0},[a[19]||(a[19]=x("span",{class:"node-sym node-spaced"},"=",-1)),m(u,{node:e.node.val,path:i.value},null,8,["node","path"])],64)):F("",!0)],64)):e.node.ty==="record"?(c(),p(g,{key:29},[m(u,{node:e.node.con,path:i.value,class:"node-spaced-right"},null,8,["node","path"]),a[20]||(a[20]=x("span",{class:"node-spaced-right"},"{",-1)),(c(!0),p(g,null,q(e.node.fields,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.fields.length-1?(c(),p("span",Mg,",")):F("",!0)],64))),256)),a[21]||(a[21]=x("span",{class:"node-spaced-left"},"}",-1))],64)):e.node.ty==="recordUpdatePunningMatchingField"?(c(),p(g,{key:30},[m(u,{node:e.node.key,path:i.value},null,8,["node","path"]),a[22]||(a[22]=x("span",{class:"node-sym node-spaced"},"->",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])],64)):e.node.ty==="recordUpdatePipeField"?(c(),p(g,{key:31},[m(u,{node:e.node.key,path:i.value},null,8,["node","path"]),a[23]||(a[23]=x("span",{class:"node-sym node-spaced"},"|>",-1)),m(u,{node:e.node.func,path:i.value},null,8,["node","path"])],64)):e.node.ty==="recordUpdateMatchingField"?(c(),p(g,{key:32},[m(u,{node:e.node.key,path:i.value},null,8,["node","path"]),a[24]||(a[24]=x("span",{class:"node-sym"},"@",-1)),m(u,{node:e.node.pat,path:i.value},null,8,["node","path"]),a[25]||(a[25]=x("span",{class:"node-sym node-spaced"},"->",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])],64)):e.node.ty==="recordUpdate"?(c(),p(g,{key:33},[m(u,{node:e.node.con,path:i.value,class:"node-spaced-right"},null,8,["node","path"]),a[26]||(a[26]=x("span",{class:"node-spaced-right"},"{",-1)),(c(!0),p(g,null,q(e.node.fields,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.fields.length-1?(c(),p("span",Sg,",")):F("",!0)],64))),256)),a[27]||(a[27]=x("span",{class:"node-spaced-left"},"}",-1))],64)):e.node.ty==="apply"?(c(),p(g,{key:34},[m(u,{node:e.node.func,path:i.value},null,8,["node","path"]),m(u,{node:e.node.arg,path:i.value,class:"node-spaced-left"},null,8,["node","path"])],64)):e.node.ty==="applyMulti"?(c(),p(g,{key:35},[m(u,{node:e.node.func,path:i.value},null,8,["node","path"]),(c(!0),p(g,null,q(e.node.args,y=>(c(),Y(u,{node:y,path:i.value,class:"node-spaced-left"},null,8,["node","path"]))),256))],64)):e.node.ty==="infix"?(c(!0),p(g,{key:36},q(e.node.args,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.args.length-1?(c(),Y(u,{key:0,node:e.node.ops[h],path:i.value,class:"node-spaced"},null,8,["node","path"])):F("",!0)],64))),256)):e.node.ty==="sectionL"?(c(),p(g,{key:37},[m(u,{node:e.node.arg,path:i.value},null,8,["node","path"]),m(u,{node:e.node.op,path:i.value,class:"node-spaced-left"},null,8,["node","path"])],64)):e.node.ty==="sectionR"?(c(),p(g,{key:38},[m(u,{node:e.node.op,path:i.value,class:"node-spaced-right"},null,8,["node","path"]),m(u,{node:e.node.arg,path:i.value},null,8,["node","path"])],64)):e.node.ty==="lambda"?(c(),p(g,{key:39},[a[28]||(a[28]=x("span",{class:"node-sym"},"\\",-1)),m(u,{node:e.node.param,path:i.value,class:"node-spaced-right"},null,8,["node","path"]),a[29]||(a[29]=x("span",{class:"node-sym node-spaced-right"},"->",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])],64)):e.node.ty==="lambdaMulti"?(c(),p(g,{key:40},[a[30]||(a[30]=x("span",{class:"node-sym"},"\\",-1)),(c(!0),p(g,null,q(e.node.params,y=>(c(),Y(u,{node:y,path:i.value,class:"node-spaced-right"},null,8,["node","path"]))),256)),a[31]||(a[31]=x("span",{class:"node-sym node-spaced-right"},"->",-1)),m(u,{node:e.node.body,path:i.value},null,8,["node","path"])],64)):e.node.ty==="lambdaCase"?(c(),p(g,{key:41},[a[32]||(a[32]=x("span",{class:"node-sym"},"\\case",-1)),(c(!0),p(g,null,q(e.node.branches,y=>(c(),p("div",Eg,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256))],64)):e.node.ty==="list"?(c(),p(g,{key:42},[a[33]||(a[33]=M(" [",-1)),(c(!0),p(g,null,q(e.node.elems,(y,h)=>(c(),p(g,{key:h},[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.elems.length-1?(c(),p("span",xg,",")):F("",!0)],64))),128)),a[34]||(a[34]=M("] ",-1))],64)):e.node.ty==="tuple"?(c(),p(g,{key:43},[a[35]||(a[35]=M(" (",-1)),(c(!0),p(g,null,q(e.node.elems,(y,h)=>(c(),p(g,{key:h},[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.elems.length-1?(c(),p("span",Cg,",")):F("",!0)],64))),128)),a[36]||(a[36]=M(") ",-1))],64)):e.node.ty==="paren"?(c(),p(g,{key:44},[a[37]||(a[37]=M(" (",-1)),m(u,{node:e.node.expr,path:i.value},null,8,["node","path"]),a[38]||(a[38]=M(") ",-1))],64)):e.node.ty==="ann"?(c(),p(g,{key:45},[m(u,{node:e.node.expr,path:i.value},null,8,["node","path"]),a[39]||(a[39]=x("span",{class:"node-sym node-spaced"},"::",-1)),m(u,{node:e.node.ann,path:i.value},null,8,["node","path"])],64)):e.node.ty==="type"?(c(),Y(qn,{key:46,type:e.node.type},null,8,["type"])):e.node.ty==="typeScheme"?(c(),Y(fa,{key:47,"type-scheme":e.node.typeScheme,"is-implicit":e.node.isImplicit},null,8,["type-scheme","is-implicit"])):e.node.ty==="sigDecl"?(c(),p(g,{key:48},[(c(!0),p(g,null,q(e.node.ids,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.ids.length-1?(c(),p("span",$g,",")):F("",!0)],64))),256)),a[40]||(a[40]=x("span",{class:"node-sym node-spaced"},"::",-1)),m(u,{node:e.node.sig,path:i.value},null,8,["node","path"])],64)):e.node.ty==="fixityDecl"?(c(),p(g,{key:49},[x("span",Pg,"infix"+ce(e.node.fixity.assoc==="left"?"l":e.node.fixity.assoc==="right"?"r":""),1),x("span",Dg,ce(e.node.fixity.prec),1),(c(!0),p(g,null,q(e.node.ids,(y,h)=>(c(),p(g,null,[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.ids.length-1?(c(),p("span",Vg,",")):F("",!0)],64))),256))],64)):e.node.ty==="dataApplyCon"?(c(),p(g,{key:50},[m(u,{node:e.node.func,path:i.value},null,8,["node","path"]),(c(!0),p(g,null,q(e.node.params,y=>(c(),Y(u,{node:y,path:i.value,class:"node-spaced-left"},null,8,["node","path"]))),256))],64)):e.node.ty==="dataInfixCon"?(c(),p(g,{key:51},[m(u,{node:e.node.lhs,path:i.value},null,8,["node","path"]),m(u,{node:e.node.op,path:i.value,class:"node-spaced"},null,8,["node","path"]),m(u,{node:e.node.rhs,path:i.value},null,8,["node","path"])],64)):e.node.ty==="dataDef"?(c(),p(g,{key:52},[a[41]||(a[41]=x("span",{class:"node-kw node-spaced-right"},"data",-1)),m(u,{node:e.node.id,path:i.value},null,8,["node","path"]),(c(!0),p(g,null,q(e.node.params,y=>(c(),Y(u,{node:y,class:"node-spaced-left"},null,8,["node"]))),256)),a[42]||(a[42]=x("span",{class:"node-sym node-spaced"},"=",-1)),(c(!0),p(g,null,q(e.node.cons,(y,h)=>(c(),p(g,{key:h},[h>0?(c(),p("span",Ag,"|")):F("",!0),m(u,{node:y,path:i.value},null,8,["node","path"])],64))),128))],64)):e.node.ty==="recordDefField"?(c(),p(g,{key:53},[m(u,{node:e.node.key,path:i.value},null,8,["node","path"]),a[43]||(a[43]=x("span",{class:"node-sym node-spaced"},"::",-1)),m(u,{node:e.node.type,path:i.value},null,8,["node","path"])],64)):e.node.ty==="recordDef"?(c(),p(g,{key:54},[a[44]||(a[44]=x("span",{class:"node-kw node-spaced-right"},"record",-1)),m(u,{node:e.node.id,path:i.value},null,8,["node","path"]),(c(!0),p(g,null,q(e.node.params,y=>(c(),Y(u,{node:y,class:"node-spaced-left"},null,8,["node"]))),256)),a[45]||(a[45]=x("span",{class:"node-sym node-spaced"},"=",-1)),a[46]||(a[46]=x("span",{class:"node-spaced-right"},"{",-1)),(c(!0),p(g,null,q(e.node.fields,(y,h)=>(c(),p(g,{key:h},[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.fields.length-1?(c(),p("span",Rg,",")):F("",!0)],64))),128)),a[47]||(a[47]=x("span",{class:"node-spaced-left"},"}",-1))],64)):e.node.ty==="importItem"?(c(),p(g,{key:55},[m(u,{node:e.node.id,path:i.value},null,8,["node","path"]),e.node.qid?(c(),p(g,{key:0},[a[48]||(a[48]=x("span",{class:"node-kw node-spaced"},"as",-1)),m(u,{node:e.node.qid,path:i.value},null,8,["node","path"])],64)):F("",!0)],64)):e.node.ty==="import"?(c(),p(g,{key:56},[a[52]||(a[52]=x("span",{class:"node-kw"},"import",-1)),m(u,{node:e.node.modId,path:i.value,class:"node-spaced-right"},null,8,["node","path"]),e.node.isOpen?(c(),p("span",Tg,"open")):F("",!0),e.node.items?(c(),p(g,{key:1},[a[49]||(a[49]=x("span",{class:"node-spaced-right"},"{",-1)),(c(!0),p(g,null,q(e.node.items,(y,h)=>(c(),p(g,{key:h},[m(u,{node:y,path:i.value},null,8,["node","path"]),h<e.node.items.length-1?(c(),p("span",Ng,",")):F("",!0)],64))),128)),a[50]||(a[50]=x("span",{class:"node-spaced-left"},"}",-1))],64)):F("",!0),x("span",{class:ot(e.node.items?null:"node-spaced-left")},[e.node.qid?(c(),p(g,{key:0},[a[51]||(a[51]=x("span",{class:"node-kw node-spaced"},"as",-1)),m(u,{node:e.node.qid,path:i.value},null,8,["node","path"])],64)):F("",!0)],2)],64)):e.node.ty==="bindingHost"?(c(),p(g,{key:57},[(c(!0),p(g,null,q(e.node.sigDecls,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256)),(c(!0),p(g,null,q(e.node.fixityDecls,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256)),(c(!0),p(g,null,q(e.node.bindings,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256))],64)):e.node.ty==="classDef"?(c(),p(g,{key:58},[a[54]||(a[54]=x("span",{class:"node-kw"},"class",-1)),m(u,{class:"node-spaced-right",node:e.node.id,path:i.value},null,8,["node","path"]),m(u,{node:e.node.param,class:"node-spaced-right"},null,8,["node"]),e.isBrief?F("",!0):(c(),p(g,{key:0},[a[53]||(a[53]=x("span",{class:"node-kw node-spaced-right"},"where",-1)),m(u,{node:e.node.bindingHost,path:i.value,class:"node-block"},null,8,["node","path"])],64))],64)):e.node.ty==="instanceDef"?(c(),p(g,{key:59},[a[56]||(a[56]=x("span",{class:"node-kw"},"instance",-1)),m(u,{class:"node-spaced-right",node:e.node.classId,path:i.value},null,8,["node","path"]),m(u,{node:e.node.arg},null,8,["node"]),e.isBrief?F("",!0):(c(),p(g,{key:0},[a[55]||(a[55]=x("span",{class:"node-kw node-spaced"},"where",-1)),m(u,{node:e.node.bindingHost,path:i.value,class:"node-block"},null,8,["node","path"])],64))],64)):e.node.ty==="mod"?(c(),p(g,{key:60},[(c(!0),p(g,null,q(e.node.imports,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256)),(c(!0),p(g,null,q(e.node.dataDefs,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256)),(c(!0),p(g,null,q(e.node.recordDefs,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256)),(c(!0),p(g,null,q(e.node.classDefs,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256)),(c(!0),p(g,null,q(e.node.instanceDefs,y=>(c(),p("div",null,[m(u,{node:y,path:i.value},null,8,["node","path"])]))),256)),m(u,{node:e.node.bindingHost,path:i.value},null,8,["node","path"])],64)):F("",!0)],10,cg)}}}),ze=le({__name:"SwitchButton",props:tf({reversed:{type:Boolean}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Sf(e,"modelValue");return(n,s)=>(c(),p("button",{onClick:s[0]||(s[0]=o=>t.value=!t.value)},[M(ce(t.value===e.reversed?"+":"-"),1),Ao(n.$slots,"default")]))}}),Og={class:"header"},Fg={class:"node-spaced-right"},st=le({__name:"SectionHeader",props:{title:{}},setup(e){return(t,n)=>(c(),p("div",Og,[x("u",Fg,ce(e.title)+":",1),Ao(t.$slots,"default")]))}}),Bg=le({__name:"ParseRes",props:{modId:{},stateMap:{}},setup(e){const t=e,n=We(uo),s=nt(`folded.${t.modId}.parse.ast`,!1);return(o,r)=>(c(),Y(Kt,{pass:"parse","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:i})=>[m(st,{title:"AST"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(s),"onUpdate:modelValue":r[0]||(r[0]=l=>fe(s)?s.value=l:null)},null,8,["modelValue"])]),_:1}),T(s)?F("",!0):(c(),Y(Ee,{key:0,node:i.mod,onMouseleave:r[1]||(r[1]=l=>T(n).hoveringLoc=null)},null,8,["node"]))]),err:ae(({err:i})=>[i===null?(c(),p(g,{key:0},[M(" Unknown Error ")],64)):(c(),p(g,{key:1},[M(ce(i.type),1)],64))]),default:ae(()=>[r[2]||(r[2]=M('" ',-1))]),_:1},8,["state-map","mod-id"]))}}),Lg=jn(Bg,[["__scopeId","data-v-93e58aee"]]),Hg=le({__name:"SyntaxDesugarRes",props:{modId:{},stateMap:{}},setup(e){const n=nt(`folded.${e.modId}.syntaxDesugar`,!1);return(s,o)=>(c(),Y(Kt,{pass:"syntaxDesugar","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:r})=>[m(st,{title:"Syntax-desugared AST"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":o[0]||(o[0]=i=>fe(n)?n.value=i:null)},null,8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),Y(Ee,{key:0,node:r.mod},null,8,["node"]))]),_:1},8,["state-map","mod-id"]))}}),Ug={key:0,class:"node-spaced-left"},jg=le({__name:"NodeLink",props:{node:{},showTy:{type:Boolean}},setup(e){const t=e,n=os("nodeLink"),s=We(uo),{classes:o}=Bd(n,s,Fd(t,"node"));return(r,i)=>(c(),p("span",{class:ot(["node-link",T(o)]),ref:"nodeLink"},[x("span",null,"#"+ce(e.node.astId),1),e.showTy?(c(),p("span",Ug,"<"+ce(e.node.ty)+">",1)):F("",!0)],2))}}),ys=jn(jg,[["__scopeId","data-v-c21d6105"]]),ye=le({__name:"NodeRef",props:{astId:{},isBrief:{type:Boolean},flavor:{default:"brief"}},setup(e){const t=e,n=We(fn),s=Ne(()=>n.value.parse.nodeMap.get(t.astId));return(o,r)=>e.flavor==="link"?(c(),Y(ys,{key:0,node:s.value},null,8,["node"])):e.flavor==="brief"?(c(),Y(Ee,{key:1,node:s.value,"is-brief":e.isBrief},null,8,["node","is-brief"])):F("",!0)}}),qg={class:"sym-source"},zg={key:0,class:"node-spaced-right"},Bs=le({__name:"SymSourceV",props:{source:{},isBrief:{type:Boolean}},setup(e){return(t,n)=>(c(),p("span",qg,[e.source?e.source.type==="nodes"?(c(!0),p(g,{key:1},q(e.source.astIds,(s,o)=>(c(),p("span",null,[m(ye,{"ast-id":s,"is-brief":e.isBrief},null,8,["ast-id","is-brief"]),o<e.source.astIds.length-1?(c(),p("span",zg,",")):F("",!0)]))),256)):e.source.type==="builtin"?(c(),Y(Ee,{key:2,node:T(Ae).makeVar(e.source.id),"is-brief":e.isBrief},null,8,["node","is-brief"])):F("",!0):(c(),p(g,{key:0},[M("?")],64))]))}}),Wg={class:"sym-table"},Gg={class:"node-spaced-right"},Ml=le({__name:"SymTableV",props:{symTable:{}},setup(e){return(t,n)=>(c(),p("div",Wg,[(c(!0),p(g,null,q(e.symTable,([s,o])=>(c(),p("div",{key:s},[x("span",Gg,"("+ce(vr(o).join(", "))+")",1),m(Ee,{node:T(Ae).makeVar(s)},null,8,["node"])]))),128))]))}}),Kg={class:"sym-ref"},Jg={key:0,class:"link node-spaced-right"},ms=le({__name:"SymRef",props:{symId:{},isBrief:{type:Boolean},showSymId:{type:Boolean},showSource:{type:Boolean}},setup(e){const t=e,n=We(fn),s=Ne(()=>n.value.nameResolve.symInfoMap.get(t.symId));return(o,r)=>(c(),p("span",Kg,[e.showSymId?(c(),p("span",Jg,ce(e.symId),1)):F("",!0),e.showSource?(c(),Y(Bs,{key:1,source:s.value.source,"is-brief":e.isBrief},null,8,["source","is-brief"])):(c(),Y(Ee,{key:2,node:T(Ae).makeVar(s.value.id)},null,8,["node"]))]))}}),Yg={key:0},Zg={key:1},Qg={class:"node-con"},Xg={key:2},_g={key:0,class:"node-spaced-right"},ev={key:3},tv={key:0,class:"node-spaced-right"},nv={key:0,class:"node-spaced-right"},sv={key:0,class:"node-spaced-right"},ov=le({__name:"NameResolveRes",props:{modId:{},stateMap:{}},setup(e){const t=e,n=nt(`folded.${t.modId}.nameResolve.exports`,!1),s=nt(`folded.${t.modId}.nameResolve.imports`,!1),o=nt(`folded.${t.modId}.nameResolve.scopes`,!1),r=nt(`folded.${t.modId}.nameResolve.bindings`,!0),i=nt(`showSymId.${t.modId}.nameResolve.bindings`,!1),l=We(fn);return(d,a)=>(c(),Y(Kt,{pass:"nameResolve","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:{scopeMap:u,exportInfo:y,bindingMap:h,importMap:b}})=>[m(st,{title:"Exported symbols"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":a[0]||(a[0]=I=>fe(n)?n.value=I:null)},null,8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),p("div",Yg,[m(Ml,{"sym-table":y.symTable},null,8,["sym-table"])])),m(st,{title:"Imported symbols"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(s),"onUpdate:modelValue":a[1]||(a[1]=I=>fe(s)?s.value=I:null)},null,8,["modelValue"])]),_:1}),T(s)?F("",!0):(c(),p("div",Zg,[(c(!0),p(g,null,q(b,([I,w])=>(c(),p("div",{key:I},[x("span",Qg,ce(I),1),a[5]||(a[5]=x("span",{class:"node-sym node-spaced"},"=>",-1)),m(Ml,{"sym-table":w,class:"node-indent"},null,8,["sym-table"])]))),128))])),m(st,{title:"Scopes"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(o),"onUpdate:modelValue":a[2]||(a[2]=I=>fe(o)?o.value=I:null)},null,8,["modelValue"])]),_:1}),T(o)?F("",!0):(c(),p("div",Xg,[(c(!0),p(g,null,q(u,([I,w])=>(c(),p("div",null,[m(ys,{node:T(l).parse.nodeMap.get(I)},null,8,["node"]),a[6]||(a[6]=x("span",{class:"node-sym node-spaced"},"=>",-1)),a[7]||(a[7]=x("span",null,"{",-1)),(c(!0),p(g,null,q(w.entries(),([$],N)=>(c(),p("span",null,[m(Ee,{node:T(Ae).makeVar($)},null,8,["node"]),N<w.size-1?(c(),p("span",_g,",")):F("",!0)]))),256)),a[8]||(a[8]=x("span",null,"}",-1))]))),256))])),m(st,{title:"Bindings"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(r),"onUpdate:modelValue":a[3]||(a[3]=I=>fe(r)?r.value=I:null)},null,8,["modelValue"]),m(ze,{modelValue:T(i),"onUpdate:modelValue":a[4]||(a[4]=I=>fe(i)?i.value=I:null)},{default:ae(()=>[...a[9]||(a[9]=[M("symbol",-1)])]),_:1},8,["modelValue"])]),_:1}),T(r)?F("",!0):(c(),p("div",ev,[(c(!0),p(g,null,q(h,([I,w])=>(c(),p("div",null,[m(ys,{node:T(l).parse.nodeMap.get(I)},null,8,["node"]),a[10]||(a[10]=x("span",{class:"node-sym node-spaced"},"=>",-1)),a[11]||(a[11]=x("span",null,"{",-1)),(c(!0),p(g,null,q(w.refSymIdSet,($,N)=>(c(),p("span",{class:ot(T(i)?"node-block":null)},[m(ms,{"sym-id":$,"show-sym-id":T(i),"show-source":!0},null,8,["sym-id","show-sym-id"]),N<w.refSymIdSet.size-1?(c(),p("span",tv,",")):F("",!0)],2))),256)),a[12]||(a[12]=x("span",null,"}",-1))]))),256))]))]),err:ae(({err:u})=>[u.type==="ConflictingId"?(c(),p(g,{key:0},[u.ty==="binding/across"?(c(),p(g,{key:0},[a[13]||(a[13]=M(" Conflicting definitions for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[14]||(a[14]=M(": ",-1))],64)):u.ty==="binding/param"?(c(),p(g,{key:1},[a[15]||(a[15]=M(" Conflicting definitions for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[16]||(a[16]=M(" in parameters: ",-1))],64)):u.ty==="binding/bindingPat"?(c(),p(g,{key:2},[a[17]||(a[17]=M(" Conflicting definitions for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[18]||(a[18]=M(" in some binding pattern: ",-1))],64)):u.ty==="binding/dataCon"?(c(),p(g,{key:3},[a[19]||(a[19]=M(" Conflicting definitions for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[20]||(a[20]=M(" in data constructors: ",-1))],64)):u.ty==="classDef"?(c(),p(g,{key:4},[a[21]||(a[21]=M(" Multiple class definitions for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[22]||(a[22]=M(": ",-1))],64)):u.ty==="dataDef"?(c(),p(g,{key:5},[a[23]||(a[23]=M(" Multiple data definitions for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[24]||(a[24]=M(": ",-1))],64)):u.ty==="fixityDecl"?(c(),p(g,{key:6},[a[25]||(a[25]=M(" Multiple fixity declarations for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[26]||(a[26]=M(": ",-1))],64)):u.ty==="sigDecl"?(c(),p(g,{key:7},[a[27]||(a[27]=M(" Multiple signature declarations for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[28]||(a[28]=M(": ",-1))],64)):u.ty==="moduleQualified"?(c(),p(g,{key:8},[a[29]||(a[29]=M(" Conflicting qualified imports for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[30]||(a[30]=M(": ",-1))],64)):u.ty==="moduleOpen"?(c(),p(g,{key:9},[a[31]||(a[31]=M(" Multiple open imports for ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[32]||(a[32]=M(": ",-1))],64)):F("",!0),m(Bs,{source:u.source1},null,8,["source"]),a[33]||(a[33]=M(" <-> ",-1)),m(Bs,{source:u.source2},null,8,["source"])],64)):u.type==="ConflictingSym"?(c(),p(g,{key:1},[a[34]||(a[34]=M(" Conflicting export for sym ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[35]||(a[35]=M(". ",-1))],64)):u.type==="UndefinedId"?(c(),p(g,{key:2},[a[36]||(a[36]=M(" Missing definition for ",-1)),m(ye,{"ast-id":u.astId},null,8,["ast-id"]),a[37]||(a[37]=M(". ",-1))],64)):u.type==="RecordMissingField"?(c(),p(g,{key:3},[a[38]||(a[38]=M(" Record literal ",-1)),m(ye,{"ast-id":u.astId},null,8,["ast-id"]),a[39]||(a[39]=M(" is missing fields: ",-1)),(c(!0),p(g,null,q(u.fields,(y,h)=>(c(),p(g,null,[m(Ee,{node:T(Ae).makeVar(y)},null,8,["node"]),h<u.fields.length-1?(c(),p("span",nv,",")):F("",!0)],64))),256))],64)):u.type==="RecordExtraField"?(c(),p(g,{key:4},[a[40]||(a[40]=M(" Record literal ",-1)),m(ye,{"ast-id":u.astId},null,8,["ast-id"]),a[41]||(a[41]=M(" has extra fields: ",-1)),(c(!0),p(g,null,q(u.fields,(y,h)=>(c(),p(g,null,[m(Ee,{node:T(Ae).makeVar(y)},null,8,["node"]),h<u.fields.length-1?(c(),p("span",sv,",")):F("",!0)],64))),256))],64)):u.type==="RecordDuplicateField"?(c(),p(g,{key:5},[a[42]||(a[42]=M(" Record literal ",-1)),m(ye,{"ast-id":u.astId},null,8,["ast-id"]),a[43]||(a[43]=M(" has duplicate field ",-1)),m(Ee,{node:T(Ae).makeVar(u.field)},null,8,["node"]),a[44]||(a[44]=M(". ",-1))],64)):u.type==="MissingMain"?(c(),p(g,{key:6},[a[45]||(a[45]=M(" Missing entry variable ",-1)),m(Ee,{node:T(Ae).makeVar("main")},null,8,["node"]),a[46]||(a[46]=M(". ",-1))],64)):u.type==="MissingDef"?(c(),p(g,{key:7},[a[47]||(a[47]=M(" Missing definition for signature ",-1)),m(ye,{"ast-id":u.sigDeclAstId},null,8,["ast-id"]),a[48]||(a[48]=M(". ",-1))],64)):u.type==="InstanceMissingDef"?(c(),p(g,{key:8},[a[49]||(a[49]=M(" Missing definition for class member ",-1)),m(ye,{"ast-id":u.sigDeclAstId},null,8,["ast-id"]),a[50]||(a[50]=M(" in ",-1)),m(ye,{"ast-id":u.instanceAstId,"is-brief":!0},null,8,["ast-id"]),a[51]||(a[51]=M(". ",-1))],64)):u.type==="InstanceExtraDef"?(c(),p(g,{key:9},[a[52]||(a[52]=M(" Extra definition ",-1)),m(Bs,{source:u.source},null,8,["source"]),a[53]||(a[53]=M(" in ",-1)),m(ye,{"ast-id":u.instanceAstId,"is-brief":!0},null,8,["ast-id"]),a[54]||(a[54]=M(". ",-1))],64)):u.type==="UnknownImport"?(c(),p(g,{key:10},[a[55]||(a[55]=M(" Module ",-1)),m(Ee,{node:T(Ae).makeVar(u.modId)},null,8,["node"]),a[56]||(a[56]=M(" does not export ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[57]||(a[57]=M(". ",-1))],64)):u.type==="DiffEquationArity"?(c(),p(g,{key:11},[a[58]||(a[58]=M(" Equations of ",-1)),m(Ee,{node:T(Ae).makeVar(u.id)},null,8,["node"]),a[59]||(a[59]=M(" have different arities. ",-1))],64)):F("",!0)]),_:1},8,["state-map","mod-id"]))}}),rv={class:"node-con"},iv={key:0,class:"node-spaced-right"},av=le({__name:"ModResolveRes",props:{modId:{},stateMap:{}},setup(e){return(t,n)=>(c(),Y(Kt,{pass:"modResolve","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:{depModIdSet:s}})=>[m(st,{title:"Dependencies"}),n[0]||(n[0]=M(" {",-1)),(c(!0),p(g,null,q(s,(o,r)=>(c(),p(g,null,[x("span",rv,ce(o),1),r<s.size-1?(c(),p("span",iv,",")):F("",!0)],64))),256)),n[1]||(n[1]=M("} ",-1))]),err:ae(({err:s})=>[s.type==="UnknownDepMod"?(c(),p(g,{key:0},[n[2]||(n[2]=M(" Unknown module ",-1)),m(Ee,{node:T(Ae).makeVar(s.modId)},null,8,["node"]),n[3]||(n[3]=M(". ",-1))],64)):F("",!0)]),_:1},8,["state-map","mod-id"]))}}),lv=le({__name:"SemanticsDesugarRes",props:{modId:{},stateMap:{}},setup(e){const n=nt(`folded.${e.modId}.semanticsDesugar`,!1);return(s,o)=>(c(),Y(Kt,{pass:"semanticsDesugar","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:r})=>[m(st,{title:"Semantics-desugared AST"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":o[0]||(o[0]=i=>fe(n)?n.value=i:null)},null,8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),Y(Ee,{key:0,node:r.mod},null,8,["node"]))]),err:ae(({err:r})=>[r.type==="Fixity"?(c(),p(g,{key:0},[o[1]||(o[1]=M(" Operators of ambiguous fixity in the same infix expression: ",-1)),m(ye,{"ast-id":r.lOp},null,8,["ast-id"]),M(" ("+ce(T(De).show(r.lFixity))+") <-> ",1),m(ye,{"ast-id":r.rOp},null,8,["ast-id"]),M(" ("+ce(T(De).show(r.rFixity))+") ",1)],64)):r.type==="Section"?(c(),p(g,{key:1},[o[2]||(o[2]=M(" Section of ambiguous fixity: ",-1)),m(ye,{"ast-id":r.section},null,8,["ast-id"])],64)):F("",!0)]),_:1},8,["state-map","mod-id"]))}}),uv=["data-ty"],dv={key:0,class:"node-var"},cv={key:1,class:"node-con"},fv={key:2,class:"node-con"},Hr=le({__name:"KindV",props:{kind:{},parent:{default:null}},setup(e){const t=e,n=Ne(()=>at.checkParen(t.kind,t.parent));return(s,o)=>{const r=so("KindV",!0);return c(),p("span",{class:ot(["kind",{"node-paren":n.value}]),"data-ty":e.kind.ty},[e.kind.ty==="var"?(c(),p("span",dv,ce(e.kind.id),1)):e.kind.ty==="type"?(c(),p("span",cv,"*")):e.kind.ty==="constr"?(c(),p("span",fv,"Constraint")):e.kind.ty==="func"?(c(),p(g,{key:3},[m(r,{kind:e.kind.param,parent:e.kind},null,8,["kind","parent"]),o[0]||(o[0]=x("span",{class:"node-op node-spaced"},"->",-1)),m(r,{kind:e.kind.ret,parent:e.kind},null,8,["kind","parent"])],64)):F("",!0)],10,uv)}}}),pv={key:0},yv=le({__name:"KindCheckRes",props:{modId:{},stateMap:{}},setup(e){const n=nt(`folded.${e.modId}.kindCheck`,!1),s=ut(!1);return(o,r)=>(c(),Y(Kt,{pass:"kindCheck","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:{kindEnv:i,kindEnvIntro:l}})=>[m(st,{title:"Kinds"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":r[0]||(r[0]=d=>fe(n)?n.value=d:null)},null,8,["modelValue"]),m(ze,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=d=>s.value=d)},{default:ae(()=>[...r[2]||(r[2]=[M("external",-1)])]),_:1},8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),p("div",pv,[(c(!0),p(g,null,q(s.value?i:l,(d,a)=>(c(),p("div",{key:a},[m(qn,{type:T(Wi)(a)?T(Fe)(a):T(G)(a),"has-parent":!0},null,8,["type"]),r[3]||(r[3]=x("span",{class:"node-sym node-spaced"},"::",-1)),m(Hr,{kind:d},null,8,["kind"])]))),128))]))]),err:ae(({err:i})=>[i.type==="UnifyKindErr"?(c(),p(g,{key:0},[r[4]||(r[4]=M(" Cannot unify kind ",-1)),m(Hr,{kind:i.err.lhs},null,8,["kind"]),r[5]||(r[5]=M(" with kind ",-1)),m(Hr,{kind:i.err.rhs},null,8,["kind"]),M(" because "+ce(i.err.type==="Recursion"?"of recursion":i.err.type==="DiffShape"?"they are of different shapes":"of unknown reasons")+". ",1)],64)):i.type==="UndefinedCon"?(c(),p(g,{key:1},[M(" Undefined type constructor '"+ce(i.id)+"'. ",1)],64)):i.type==="UndefinedVar"?(c(),p(g,{key:2},[M(" Undefined type variable '"+ce(i.id)+"'. ",1)],64)):F("",!0)]),_:1},8,["state-map","mod-id"]))}}),mv={key:0},hv={class:"node-block"},gv={key:0,class:"node-spaced-right"},vv=le({__name:"BindingGroupResolveRes",props:{modId:{},stateMap:{}},setup(e){const n=nt(`folded.${e.modId}.bindingGroupResolve`,!1),s=We(fn);return(o,r)=>(c(),Y(Kt,{pass:"bindingGroupResolve","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:{bindingGroupsMap:i}})=>[m(st,{title:"Binding groups"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":r[0]||(r[0]=l=>fe(n)?n.value=l:null)},null,8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),p("div",mv,[(c(!0),p(g,null,q(i,([l,d])=>(c(),p("div",null,[m(ys,{node:T(s).parse.nodeMap.get(l)},null,8,["node"]),r[3]||(r[3]=x("span",{class:"node-sym node-spaced"},"=>",-1)),r[4]||(r[4]=x("span",null,"[",-1)),(c(!0),p(g,null,q(d,({bindings:a})=>(c(),p("div",hv,[r[1]||(r[1]=M(" {",-1)),(c(!0),p(g,null,q(a,(u,y)=>(c(),p("span",null,[m(ys,{node:T(s).parse.nodeMap.get(u.astId)},null,8,["node"]),y!==a.length-1?(c(),p("span",gv,",")):F("",!0)]))),256)),r[2]||(r[2]=M("} ",-1))]))),256)),r[5]||(r[5]=x("span",null,"]",-1))]))),256))]))]),_:1},8,["state-map","mod-id"]))}}),bv=le({__name:"TypeSourceV",props:{source:{}},setup(e){return(t,n)=>{const s=so("TypeSourceV",!0);return e.source.type==="actual"?(c(),p(g,{key:0},[n[0]||(n[0]=M(" expression ",-1)),m(ye,{"ast-id":e.source.expr},null,8,["ast-id"])],64)):e.source.type==="actual.func"?(c(),p(g,{key:1},[n[1]||(n[1]=M(" application ",-1)),m(ye,{"ast-id":e.source.funcNode},null,8,["ast-id"])],64)):e.source.type==="actual.pat"?(c(),p(g,{key:2},[n[2]||(n[2]=M(" pattern ",-1)),m(ye,{"ast-id":e.source.pat},null,8,["ast-id"])],64)):e.source.type==="actual.record"?(c(),p(g,{key:3},[n[3]||(n[3]=M(" record expression ",-1)),m(ye,{"ast-id":e.source.recordExpr},null,8,["ast-id"])],64)):e.source.type==="elim.func.param"?(c(),p(g,{key:4},[M(" the "+ce(e.source.from.source.type==="actual.func"?"argument":"parameter")+" of ",1),m(s,{source:e.source.from.source},null,8,["source"])],64)):e.source.type==="elim.func.ret"?(c(),p(g,{key:5},[n[4]||(n[4]=M(" the return type of ",-1)),m(s,{source:e.source.from.source},null,8,["source"])],64)):e.source.type==="expect.cond"?(c(),p(g,{key:6},[n[5]||(n[5]=M(" the expected type of the condition of ",-1)),m(ye,{"ast-id":e.source.condExpr},null,8,["ast-id"])],64)):e.source.type==="expect.record.field"?(c(),p(g,{key:7},[n[6]||(n[6]=M(" field ",-1)),m(ye,{"ast-id":e.source.fieldKey},null,8,["ast-id"]),n[7]||(n[7]=M(" of record ",-1)),m(ye,{"ast-id":e.source.recordDef},null,8,["ast-id"])],64)):e.source.type==="expect.class.member"?(c(),p(g,{key:8},[n[8]||(n[8]=M(" class member ",-1)),m(ye,{"ast-id":e.source.sigDecl},null,8,["ast-id"])],64)):e.source.type==="infer.func.ret"?(c(),p(g,{key:9},[n[9]||(n[9]=M(" the inferred return type of function ",-1)),m(ye,{"ast-id":e.source.funcNode},null,8,["ast-id"])],64)):e.source.type==="infer.binding.var"?(c(),p(g,{key:10},[n[10]||(n[10]=M(" the inferred type of variable ",-1)),m(ye,{"ast-id":e.source.varPat},null,8,["ast-id"]),n[11]||(n[11]=M(" in binding ",-1)),m(ye,{"ast-id":e.source.bindingNode},null,8,["ast-id"])],64)):e.source.type==="infer.binding.val"?(c(),p(g,{key:11},[n[12]||(n[12]=M(" the inferred type of expression ",-1)),m(ye,{"ast-id":e.source.valExpr},null,8,["ast-id"]),n[13]||(n[13]=M(" in binding ",-1)),m(ye,{"ast-id":e.source.bindingNode},null,8,["ast-id"])],64)):e.source.type==="infer.case"?(c(),p(g,{key:12},[n[14]||(n[14]=M(" the inferred type of case expression ",-1)),m(ye,{"ast-id":e.source.caseExpr},null,8,["ast-id"])],64)):e.source.type==="infer.lambda.param"?(c(),p(g,{key:13},[n[15]||(n[15]=M(" the inferred type of lambda parameter ",-1)),m(ye,{"ast-id":e.source.lambdaExpr},null,8,["ast-id"])],64)):e.source.type==="ann.ann"?(c(),p(g,{key:14},[n[16]||(n[16]=M(" the annotated type in expression ",-1)),m(ye,{"ast-id":e.source.annExpr},null,8,["ast-id"])],64)):e.source.type==="ann.decl"?(c(),p(g,{key:15},[n[17]||(n[17]=M(" the annotated type in declaration ",-1)),m(ye,{"ast-id":e.source.sigDecl},null,8,["ast-id"])],64)):e.source.type==="elim.apply.arg"?(c(),p(g,{key:16},[n[18]||(n[18]=M(" the argument of ",-1)),m(s,{source:e.source.from.source},null,8,["source"])],64)):e.source.type==="elim.apply.func"?(c(),p(g,{key:17},[n[19]||(n[19]=M(" the function of ",-1)),m(s,{source:e.source.from.source},null,8,["source"])],64)):F("",!0)}}}),Sl=le({__name:"TypeSourcedV",props:{type:{}},setup(e){return(t,n)=>(c(),p("span",null,[n[0]||(n[0]=M(" type ",-1)),m(qn,{type:e.type},null,8,["type"]),n[1]||(n[1]=M(" of ",-1)),m(bv,{source:e.type.source},null,8,["source"])]))}}),kv={class:"sym-info"},Iv=le({__name:"SymInfoV",props:{info:{},showSource:{type:Boolean}},setup(e){return(t,n)=>(c(),p("span",kv,[e.showSource?(c(),Y(Bs,{key:0,source:e.info.source},null,8,["source"])):(c(),Y(Ee,{key:1,node:T(Ae).makeVar(e.info.id)},null,8,["node"]))]))}}),wv={class:"evidence"},Mv={class:"link node-spaced-right"},Sv=le({__name:"EvidenceV",props:{evidence:{}},setup(e){return(t,n)=>(c(),p("span",wv,[e.evidence.type==="instance"?(c(),Y(ms,{key:0,"sym-id":e.evidence.symId,"is-brief":!0,"show-source":!0},null,8,["sym-id"])):(c(),p(g,{key:1},[x("span",Mv,"param @"+ce(e.evidence.ix),1),m(qn,{type:e.evidence.argType},null,8,["type"])],64))]))}}),Ev={key:0},xv={key:1},Cv={key:0,class:"node-indent"},$v={key:0,class:"node-spaced-right"},Pv={class:"node-indent"},Dv={class:"node-indent"},Vv={class:"node-indent"},Av={class:"node-indent"},Rv={class:"node-indent"},Tv=le({__name:"TypeCheckRes",props:{modId:{},stateMap:{}},setup(e){const t=e,n=nt(`folded.${t.modId}.typeCheck.env`,!1),s=nt(`folded.${t.modId}.typeCheck.evidences`,!1),o=ut(!1),r=ut(!0),i=ut(!0),l=We(fn);return kn(da,i),(d,a)=>(c(),Y(Kt,{pass:"typeCheck","state-map":e.stateMap,"mod-id":e.modId},{ok:ae(({output:{typeEnv:u,typeEnvIntro:y,bindingEvidenceMap:h}})=>[m(st,{title:"Types"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":a[0]||(a[0]=b=>fe(n)?n.value=b:null)},null,8,["modelValue"]),m(ze,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=b=>o.value=b)},{default:ae(()=>[...a[5]||(a[5]=[M("external",-1)])]),_:1},8,["modelValue"]),m(ze,{modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=b=>r.value=b)},{default:ae(()=>[...a[6]||(a[6]=[M("source",-1)])]),_:1},8,["modelValue"]),m(ze,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=b=>i.value=b)},{default:ae(()=>[...a[7]||(a[7]=[M("prettify",-1)])]),_:1},8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),p("div",Ev,[(c(!0),p(g,null,q(o.value?u:y,(b,I)=>(c(),p("div",{key:I},[m(Iv,{info:T(l).nameResolve.symInfoMap.get(I),"show-source":r.value},null,8,["info","show-source"]),a[8]||(a[8]=x("span",{class:"node-sym node-spaced"},"::",-1)),m(fa,{"type-scheme":T(on).prettify(b)},null,8,["type-scheme"])]))),128))])),m(st,{title:"Evidences"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(s),"onUpdate:modelValue":a[4]||(a[4]=b=>fe(s)?s.value=b:null)},null,8,["modelValue"])]),_:1}),T(s)?F("",!0):(c(),p("div",xv,[(c(!0),p(g,null,q(h,([b,{evidenceMap:I}])=>(c(),p("div",null,[m(ye,{"ast-id":b,flavor:"link"},null,8,["ast-id"]),a[12]||(a[12]=x("span",{class:"node-sym node-spaced"},"=>",-1)),a[13]||(a[13]=x("span",null,"{",-1)),(c(!0),p(g,null,q(I,([w,$])=>(c(),p(g,null,[$.length?(c(),p("div",Cv,[m(ye,{"ast-id":w},null,8,["ast-id"]),a[9]||(a[9]=x("span",{class:"node-sym node-spaced"},"=>",-1)),a[10]||(a[10]=x("span",null,"[",-1)),(c(!0),p(g,null,q($,(N,C)=>(c(),p(g,{key:C},[m(Sv,{evidence:N},null,8,["evidence"]),C+1<$.length?(c(),p("span",$v,",")):F("",!0)],64))),128)),a[11]||(a[11]=x("span",null,"]",-1))])):F("",!0)],64))),256)),a[14]||(a[14]=x("span",null,"}",-1))]))),256))]))]),err:ae(({err:u})=>[u.via==="UnifyErr"?(c(),p(g,{key:0},[a[17]||(a[17]=M(" Cannot unify ",-1)),x("div",Pv,[m(Sl,{type:u.err.lhs},null,8,["type"])]),a[18]||(a[18]=M(" with ",-1)),x("div",Dv,[m(Sl,{type:u.err.rhs},null,8,["type"])]),a[19]||(a[19]=M(" because ",-1)),u.err.type==="Recursion"?(c(),p(g,{key:0},[M("of recursion")],64)):u.err.type==="DiffShape"?(c(),p(g,{key:1},[M("they are of different shapes")],64)):u.err.type==="DiffCon"?(c(),p(g,{key:2},[M("they are different constructors")],64)):u.err.type==="RigidVar"?(c(),p(g,{key:3},[a[15]||(a[15]=M("the variable ",-1)),m(qn,{type:T(Fe)(u.err.var)},null,8,["type"]),a[16]||(a[16]=M(" is rigid",-1))],64)):(c(),p(g,{key:4},[M("of unknown reasons")],64)),a[20]||(a[20]=M(". ",-1))],64)):u.via==="PatErr"?(c(),p(g,{key:1},[M(" Illegal pattern "+ce(u.err.type),1)],64)):u.via==="ConstrsSolveErr"?(c(),p(g,{key:2},[u.err.type==="NoInstance"?(c(),p(g,{key:0},[a[21]||(a[21]=M(" No instance found for constraint ",-1)),m(Mo,{constr:u.err.constr},null,8,["constr"])],64)):u.err.type==="AmbiguousInstance"?(c(),p(g,{key:1},[a[22]||(a[22]=M(" Ambiguous instances found for constraint ",-1)),m(Mo,{constr:u.err.constr},null,8,["constr"]),a[23]||(a[23]=M(": ",-1)),x("div",Vv,[(c(!0),p(g,null,q(u.err.instances,y=>(c(),p("div",null,[m(Mo,{constr:y},null,8,["constr"])]))),256))])],64)):F("",!0)],64)):u.via==="InstanceErr"?(c(),p(g,{key:3},[u.err.type==="ExtraConstrs"?(c(),p(g,{key:0},[a[28]||(a[28]=M(" Extra constraints ",-1)),m(wi,{constrs:u.err.extraConstrs},null,8,["constrs"]),a[29]||(a[29]=M(" collected ",-1)),x("div",Av,[a[24]||(a[24]=M(" from member definition ",-1)),m(ye,{"ast-id":u.err.def},null,8,["ast-id"])]),a[30]||(a[30]=M(" cannot be entailed by known constraints ",-1)),m(wi,{constrs:u.err.knownConstrs},null,8,["constrs"]),x("div",Rv,[x("div",null,[a[25]||(a[25]=M("from class context ",-1)),m(ye,{"ast-id":u.err.class,"is-brief":!0},null,8,["ast-id"])]),x("div",null,[a[26]||(a[26]=M("and member declaration ",-1)),m(ye,{"ast-id":u.err.decl,"is-brief":!0},null,8,["ast-id"]),a[27]||(a[27]=M(".",-1))])])],64)):F("",!0)],64)):F("",!0)]),_:1},8,["state-map","mod-id"]))}}),Nv={class:"link"},Ov={key:0,class:"node-sym node-spaced"},El=le({__name:"NodeLoc",props:{loc:{}},setup(e){const t=e,n=Ne(()=>{const{loc:s}=t;return s?[...s.path??[],s.node]:null});return(s,o)=>(c(),p("span",Nv,[n.value?(c(!0),p(g,{key:1},q(n.value,(r,i)=>(c(),p(g,null,[m(ys,{node:r,"show-ty":!0},null,8,["node"]),i<n.value.length-1?(c(),p("span",Ov,"/")):F("",!0)],64))),256)):(c(),p(g,{key:0},[M("<null>")],64))]))}}),Fv=(e,t)=>t(e.value),Bv={class:"node-info"},Lv={key:0},Hv={key:1},xl=le({__name:"NodeInfo",props:{node:{}},setup(e){const t=e,n=We(fn),s=Ne(()=>n.value.nameResolve?.astSymMap.get(t.node.astId)??null),o=Ne(()=>Fv(s,r=>r?n.value.typeCheck?.typeEnv[r]??null:null));return(r,i)=>(c(),p("div",Bv,[s.value?(c(),p("div",Lv,[i[0]||(i[0]=M("Symbol: ",-1)),m(ms,{"sym-id":s.value,"show-sym-id":!0,"show-source":!0},null,8,["sym-id"])])):F("",!0),o.value?(c(),p("div",Hv,[i[1]||(i[1]=M("Symbol type: ",-1)),m(fa,{"type-scheme":o.value},null,8,["type-scheme"])])):F("",!0)]))}}),Uv={class:"node-selection"},jv={class:"node-selection"},qv=le({__name:"NodeSelection",setup(e){const t=We(uo);return(n,s)=>(c(),p("section",null,[x("div",Uv,[m(st,{title:"Hovering node"},{default:ae(()=>[m(El,{loc:T(t).hoveringLoc},null,8,["loc"])]),_:1}),T(t).hoveringLoc?(c(),Y(xl,{key:0,node:T(t).hoveringLoc.node},null,8,["node"])):F("",!0)]),x("div",jv,[m(st,{title:"Selected node"},{default:ae(()=>[m(El,{loc:T(t).selectedLoc},null,8,["loc"])]),_:1}),T(t).selectedLoc?(c(),Y(xl,{key:0,node:T(t).selectedLoc.node},null,8,["node"])):F("",!0)])]))}}),zv=jn(qv,[["__scopeId","data-v-bf677fa7"]]),Wv=le({__name:"ClassDesugarRes",props:{modId:{},stateMap:{}},setup(e){const n=nt(`folded.${e.modId}.classDesugar`,!1);return(s,o)=>(c(),Y(Kt,{pass:"classDesugar","mod-id":e.modId,"state-map":e.stateMap},{ok:ae(({output:{mod:r}})=>[m(st,{title:"Class-desugared AST"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":o[0]||(o[0]=i=>fe(n)?n.value=i:null)},null,8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),Y(Ee,{key:0,node:r},null,8,["node"]))]),_:1},8,["mod-id","state-map"]))}}),Gv={class:"node-value"},Kv={key:0,class:"node-lit"},Jv={key:1,class:"node-lit"},Yv={key:2,class:"node-lit"},Zv={key:3,class:"node-special"},Qv={key:4},Xv={key:0},_v={key:5},eb={key:0},tb={key:6},nb={key:7},sb={key:0},ob=le({__name:"TypedValueDesc",props:{desc:{}},setup(e){return(t,n)=>{const s=so("TypedValueDesc",!0);return c(),p("span",Gv,[e.desc.ty==="num"?(c(),p("span",Kv,ce(e.desc.val),1)):e.desc.ty==="char"?(c(),p("span",Jv,ce(T(us)(e.desc.val,"'")),1)):e.desc.ty==="str"?(c(),p("span",Yv,ce(T(us)(e.desc.val,'"')),1)):e.desc.ty==="func"?(c(),p("span",Zv,"Func")):e.desc.ty==="list"?(c(),p("span",Qv,[n[0]||(n[0]=x("span",null,"[",-1)),(c(!0),p(g,null,q(e.desc.elems,(o,r)=>(c(),p(g,{key:r},[m(s,{desc:o},null,8,["desc"]),r<e.desc.elems.length-1?(c(),p("span",Xv,", ")):F("",!0)],64))),128)),n[1]||(n[1]=x("span",null,"]",-1))])):e.desc.ty==="tuple"?(c(),p("span",_v,[n[2]||(n[2]=x("span",null,"(",-1)),(c(!0),p(g,null,q(e.desc.elems,(o,r)=>(c(),p(g,{key:r},[m(s,{desc:o},null,8,["desc"]),r<e.desc.elems.length-1?(c(),p("span",eb,", ")):F("",!0)],64))),128)),n[3]||(n[3]=x("span",null,")",-1))])):e.desc.ty==="data"?(c(),p("span",tb,[m(ms,{"sym-id":e.desc.con},null,8,["sym-id"]),(c(!0),p(g,null,q(e.desc.args,o=>(c(),Y(s,{desc:o,class:"node-spaced-left"},null,8,["desc"]))),256))])):e.desc.ty==="record"?(c(),p("span",nb,[m(ms,{"sym-id":e.desc.con},null,8,["sym-id"]),n[4]||(n[4]=x("span",{class:"node-spaced"},"{",-1)),(c(!0),p(g,null,q(e.desc.fields,(o,r)=>(c(),p(g,{key:r},[m(s,{desc:o},null,8,["desc"]),r<e.desc.fields.length-1?(c(),p("span",sb,", ")):F("",!0)],64))),128)),n[5]||(n[5]=x("span",{class:"node-spaced-left"},"}",-1))])):F("",!0)])}}}),rb=le({__name:"TypedValueV",props:{value:{},type:{}},setup(e){const t=e;We(fn);const n=Ne(()=>li.describe(t));return(s,o)=>(c(),Y(ob,{desc:n.value},null,8,["desc"]))}}),ib={key:0},ab=le({__name:"EvaluateRes",props:{modId:{},stateMap:{}},setup(e){const n=nt(`folded.${e.modId}.evaluate`,!1),s=We(fn);return(o,r)=>(c(),Y(Kt,{pass:"evaluate","mod-id":e.modId,"state-map":e.stateMap},{ok:ae(({output:{introScope:i}})=>[m(st,{title:"Scope"},{default:ae(()=>[m(ze,{reversed:!0,modelValue:T(n),"onUpdate:modelValue":r[0]||(r[0]=l=>fe(n)?n.value=l:null)},null,8,["modelValue"])]),_:1}),T(n)?F("",!0):(c(),p("div",ib,[(c(!0),p(g,null,q(i,([l,{value:d}])=>(c(),p("div",null,[m(ms,{"sym-id":l},null,8,["sym-id"]),r[1]||(r[1]=x("span",{class:"node-sym node-spaced"},"=",-1)),d?(c(),Y(rb,{key:0,value:d,type:T(s).typeCheck.typeEnv[l].type},null,8,["value","type"])):F("",!0),r[2]||(r[2]=x("template",null,[x("span",{class:"node-special"},"Uninit")],-1))]))),256))]))]),err:ae(({err:i})=>[M(ce(i.message),1)]),_:1},8,["mod-id","state-map"]))}}),lb=le({__name:"ModPipeline",props:{modId:{},leftEl:{},rightEl:{}},setup(e){const t=We(Ld),n=e,s=Ne(()=>t[n.modId]);return kn(fn,Ne(()=>{const o={};for(const r of Nd){const i=s.value[r];i.status==="ok"&&(o[r]=i.output)}return o})),(o,r)=>s.value?(c(),p(g,{key:0},[(c(),Y(Aa,{to:e.leftEl},[m(zv)],8,["to"])),(c(),Y(Aa,{to:e.rightEl},[m(Lg,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(Hg,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(av,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(ov,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(lv,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(yv,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(vv,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(Tv,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(Wv,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"]),m(ab,{"mod-id":e.modId,"state-map":s.value},null,8,["mod-id","state-map"])],8,["to"]))],64)):F("",!0)}}),ub=le({__name:"SplitterBar",props:{el:{},direction:{default:"vertical"},moveDirection:{default:1}},setup(e){const t=e,n=a=>{const{clientX:u,clientY:y}=a instanceof MouseEvent?a:a.touches[0];return{x:u,y}},s=os("splitterEl"),o=ut(!1);let r=null;const i=a=>{o.value=!0,r=n(a),document.body.style.cursor=t.direction==="horizontal"?"ns-resize":"ew-resize"},l=a=>{const{el:u,moveDirection:y,direction:h}=t;if(!r||!u)return;const b=n(a);h==="vertical"?u.style.width=`${u.clientWidth+(b.x-r.x)*y}px`:u.style.height=`${u.clientHeight+(b.y-r.y)*y}px`,r=b},d=a=>{l(a),r=null,o.value=!1,document.body.style.cursor=""};return Tn(s,["pointerdown","touchstart"],i),Tn(["pointermove","touchmove"],l),Tn(["pointerup","touchend","touchcancel"],d),Tn(window,"selectstart",a=>{o.value&&a.preventDefault()}),(a,u)=>(c(),p("div",{ref:"splitterEl",class:ot(["splitter",{moving:o.value},e.direction])},[...u[0]||(u[0]=[x("div",{class:"splitter-inner"},null,-1)])],2))}}),db=jn(ub,[["__scopeId","data-v-aeed17b6"]]),cb={class:"app"},fb={class:"col left",ref:"left"},pb={class:"mod-tabs"},yb=["onClick"],mb={class:"col right",ref:"right"},hb="main = @6",gb=le({__name:"App",setup(e){const t=ut(localStorage.source??hb),n=is(Gh()),s=Ql({}),o=new Ii(s),r=ut("Main");as(()=>{o.loadStd(),Pt(t,()=>{localStorage.source=t.value,n.hoveringLoc=n.selectedLoc=null,o.load("Main",t.value)},{immediate:!0}),Pt(n,()=>{if(!l.value)return;const h=n.hoveringLoc??n.selectedLoc;if(!h)return;const{node:b}=h;if(window.$node=b,!!i.value)if(b.range){const{start:I,end:w}=b.range;l.value.focus(),l.value.setSelectionRange(I,w)}else l.value.setSelectionRange(null,null)})});const i=ut(!1),l=os("inputEl"),d=os("left"),a=os("right"),u=nt("inputHeight",200),{height:y}=Wh(l);return as(()=>{l.value.style.height=`${u.value}px`}),Pt(y,h=>{u.value=h}),window.$node=null,window.$pipeline=o,kn(Ld,s),kn(uo,n),kn(da,ut(!0)),kn(ca,ut(!1)),(h,b)=>(c(),p("div",cb,[x("main",null,[x("div",fb,[x("section",null,[x("div",pb,[(c(!0),p(g,null,q(T(s),(I,w)=>(c(),p("span",{class:ot(["mod-tab",[I[T(o).passSeq.at(-1)].status==="ok"?"ok":"err",w===r.value?"selected":null]]),onClick:$=>r.value=w},ce(w),11,yb))),256))])]),x("section",null,[m(ze,{modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=I=>i.value=I)},{default:ae(()=>[...b[2]||(b[2]=[M("range",-1)])]),_:1},8,["modelValue"]),lu(x("textarea",{"onUpdate:modelValue":b[1]||(b[1]=I=>t.value=I),ref_key:"inputEl",ref:l,spellcheck:"false"},null,512),[[cp,t.value]])])],512),m(db,{el:d.value},null,8,["el"]),x("div",mb,null,512),(c(),Y(Uc,{key:r.value},[m(lb,{"mod-id":r.value,"left-el":d.value,"right-el":a.value},null,8,["mod-id","left-el","right-el"])],1024))]),b[3]||(b[3]=x("footer",null,[x("p",null,[x("a",{href:"https://github.com/ForkKILLET/Dicel"},"Dicel"),M(" made by "),x("a",{href:"https://github.com/ForkKILLET",target:"_blank"},"ForkKILLET"),M(" with >_< ")])],-1))]))}}),vb=jn(gb,[["__scopeId","data-v-a0be0df7"]]);yp(vb).mount("#app");
